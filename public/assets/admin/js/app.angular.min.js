/*! 
 * app.angular v0.0.1
 * https://alexei-cioina.b9ad.pro-us-east-1.openshiftapps.com
 * Copyright (c) 2019 Alexei Cioina
 * License: MIT
 */

!function(){"use strict";angular.module("acioina.loadingBarInterceptor",["acioina.loadingBar"]).config(["$httpProvider",function(u){var a=["$q","$cacheFactory","$timeout","$rootScope","$log","acioinaLoadingBar",function(e,n,t,o,i,r){var s,c=0,d=0,l=r.latencyThreshold;function m(){t.cancel(s),r.complete(),c=d=0}function p(a){var e,t=n.get("$http"),o=u.defaults;!a.cache&&!o.cache||!1===a.cache||"GET"!==a.method&&"JSONP"!==a.method||(e=angular.isObject(a.cache)?a.cache:angular.isObject(o.cache)?o.cache:t);var i=void 0!==e&&void 0!==e.get(a.url);return void 0!==a.cached&&i!==a.cached?a.cached:a.cached=i}return{request:function(a){return a.ignoreLoadingBar||p(a)||(o.$broadcast("acioinaLoadingBar:loading",{url:a.url}),0===c&&(s=t(function(){r.start()},l)),c++,r.set(d/c)),a},response:function(a){return a&&a.config?a.config.ignoreLoadingBar||p(a.config)||(c<=++d?(o.$broadcast("acioinaLoadingBar:loaded",{url:a.config.url,result:a}),m()):r.set(d/c)):i.error("Broken interceptor detected: Config object not supplied."),a},responseError:function(a){return a&&a.config?a.config.ignoreLoadingBar||p(a.config)||(c<=++d?(o.$broadcast("acioinaLoadingBar:loaded",{url:a.config.url,result:a}),m()):r.set(d/c)):i.error("Broken interceptor detected: Config object not supplied."),e.reject(a)}}}];u.interceptors.push(a)}]),angular.module("acioina.loadingBar",[]).provider("acioinaLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(i,n,r,s){var c,t,d,l=this.parentSelector,m=angular.element(this.loadingBarTemplate),o=m.find("div").eq(0),p=angular.element(this.spinnerTemplate),u=!1,g=0,f=this.autoIncrement,$=this.includeSpinner,h=this.includeBar,x=this.startSize;function F(a){if(u){var e=100*a+"%";o.css("width",e),g=a,f&&(r.cancel(t),t=r(function(){S()},250))}}function S(){if(!(1<=j())){var a=0,e=j();a=0<=e&&e<.25?(3*Math.random()+3)/100:.25<=e&&e<.65?3*Math.random()/100:.65<=e&&e<.9?2*Math.random()/100:.9<=e&&e<.99?.005:0,F(j()+a)}}function j(){return g}function e(){g=0,u=!1}return{start:function(){if(c=c||i.get("$animate"),r.cancel(d),!u){var a=n[0],e=a.querySelector?a.querySelector(l):n.find(l)[0];e=e||a.getElementsByTagName("body")[0];var t=angular.element(e),o=e.lastChild&&angular.element(e.lastChild);s.$broadcast("acioinaLoadingBar:started"),u=!0,h&&c.enter(m,t,o),$&&c.enter(p,t,m),F(x)}},set:F,status:j,inc:S,complete:function(){c=c||i.get("$animate"),F(1),r.cancel(d),d=r(function(){var a=c.leave(m,e);a&&a.then&&a.then(e),c.leave(p),s.$broadcast("acioinaLoadingBar:completed")},500)},autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),angular.module("acioina.commonForm",[]).provider("acioinaCommonForm",function(){"use strict";this.mainForm=void 0,this.form1=void 0,this.form2=void 0,this.loading=void 0,this.json0=void 0,this.json1=void 0,this.json2=void 0,this.json3=void 0,this.nextStep=void 0,this.MAX_STEPS=void 0,this.enableBackButtonStep=void 0,this.nextStepFlag=void 0,this.serverError=void 0,this.$get=["$http","$q","$injector","$document","$timeout","$rootScope","$stateParams","$state",function(i,o,a,e,n,t,r,s){var c,d=this.mainForm,l=this.form1,m=this.form2,p=this.loading,u=this.json0,g=this.json1,f=this.json2,h=this.json3,x=this.MAX_STEPS,F=this.enableBackButtonStep;function S(){$(".alpaca-form-button-goBack").attrProp("disabled",$.acioina.getNextStep()<F)}function j(a,e){e?a.hasClass("hidden")&&a.removeClass("hidden"):a.hasClass("hidden")||a.addClass("hidden")}function N(a){$.acioina.isOverlayVisible()&&$.acioina.close(),a&&j(m,!0)}function b(a,e){f.data.info=a,e?(f.options.label=e,f.options.fields.info.label=" "):(f.options.label="",f.options.fields.info.label=f.data.infoLabel),m.alpaca(f),j(m,!0)}function M(a,e,t){t||N(!0),g.data.info=e,g.options.label=a,$.acioina.getServerError()?($.acioina.destroyAlpacaForm(1),b(e,a)):m.alpaca(g)}function v(){return f.data.easyMapster?f.data.easyMapster:$.acioina.getImageMap().mapster("get")}function w(){return f.data.stepID?f.data.stepID:$.acioina.getStepId()}function A(a,e){B(),$.acioina.setNextStepFlag(a),e()}function P(e,a){a.schema.title=e,a.options.form.buttons.closeButton.click=function(){$.acioina.setNextStep($.acioina.getNextStep()+1),$.acioina.setServerError(!1),j(p,!0),$.acioina.destroyAlpacaForm(1),j(d,!1),n.cancel(c),c=n(function(){i.get(f.data.ajaxUrl+f.data.ajaxRoute+"/"+$.acioina.getNextStep()+"?robot="+v()+"&formid="+w()).then(function(a){a.data&&a.data.success&&$.acioina.writeFormMessage(0,e,"#form1"),j(p,!1)},function(){j(p,!1)})},500)},a.postRender=function(a){$.acioina.setAlpacaForm(0,a),N(!1),$.scrollTo(d.offset().top,200,{axis:"y"}),j(p,!1)}}function y(a,e){e?E(!0,a,e):a?E(!0,a):E(!1,f.data.serverErrorMessage)}function E(a,e,t){var o;($.acioina.setServerError(!0),N(!(f.postRender=function(a){j(p,!1),$.acioina.setAlpacaForm(1,a),S(),a.childrenByPropertyId.info.getFieldEl().css("background-color","red").css("border-style","solid").css("border-color","red")})),a)?(o=$.acioina.getAlpacaForm(0).view.getMessage(e))?t&&(o=$.alpaca.substituteTokens(o,[t])):o=e:o=e;b(o,f.data.errorTitle)}function B(){Object.keys(r).includes("id")&&void 0!==r.id&&$.acioina.setNextStep(parseInt(r.id,10))}return $.acioina.setNextStep(this.nextStep),$.acioina.setNextStepFlag(this.nextStepFlag),$.acioina.setServerError(this.serverError),{doNextButton:function(a,t){t.postRender=function(e){f.postRender=function(a){g.postRender=function(a){$.acioina.setAlpacaForm(2,a),$.acioina($.acioina.showPrompt(m,function(){j(l,!0),$.acioina.destroyAlpacaForm(2)}))},$.acioina.setAlpacaForm(1,a),S(),N(!1),$.acioina.setAlpacaForm(0,e)},f.options.form.buttons.goNext.title=a,f.data.info=t.schema.description,f.options.label="",f.options.fields.info.label=f.data.infoLabel,l.alpaca(f),j(p,!1)},d.alpaca(t),s.go(f.data.state,{id:$.acioina.getNextStep()})},nextOrBack:A,doInit:function(a,t,o){h.postRender=function(e){f.postRender=function(a){j(p,!1),u.postRender=function(a){$(".alpaca-form-button-goYes").attrProp("disabled",!0),$.acioina.setAlpacaForm(2,a),$.acioina.getAlpacaForm(2).childrenByPropertyId.prompt.on("change",function(){$(".alpaca-form-button-goYes").attrProp("disabled",!1===$.acioina.getAlpacaForm(2).childrenByPropertyId.prompt.getValue())}),$.acioina($.acioina.showPrompt(m,function(){$.acioina.getServerError()?($.acioina.destroyAlpacaForm(2),m.alpaca(f),j(m,!0)):(j(l,!0),$.acioina.destroyAlpacaForm(2))}))},u.options.form.buttons.goYes.click=function(){o()},u.options.form.buttons.goNo.click=function(){N(!1)},g.postRender=function(a){$.acioina.setAlpacaForm(2,a),$.acioina($.acioina.showPrompt(m,function(){j(l,!0),$.acioina.destroyAlpacaForm(2)}))},$.acioina.setAlpacaForm(1,a),t&&S(),$.acioina.setAlpacaForm(0,e)},f.options.form.buttons.goBack.click=function(){A(!1,a)},f.options.form.buttons.goNext.click=function(){A(!0,a)},f.data.info=h.schema.description,l.alpaca(f)}},doNext:function(a,t){$.acioina.getNextStep()>x?P(a,t):t.postRender=function(e){f.postRender=function(a){g.postRender=function(a){$.acioina.setAlpacaForm(2,a),$.acioina($.acioina.showPrompt(m,function(){j(l,!0),$.acioina.destroyAlpacaForm(2)}))},$.acioina.setAlpacaForm(1,a),S(),N(!1),$.acioina.setAlpacaForm(0,e)},f.options.form.buttons.goNext.title=$.acioina.getNextStep()===x?f.data.submitName:f.data.nextName,f.data.info=t.schema.description,f.options.label="",f.options.fields.info.label=f.data.infoLabel,l.alpaca(f),j(p,!1)},d.alpaca(t),s.go(f.data.state,{id:$.acioina.getNextStep()})},showResults:P,showFailMessage:function(a,e,t){$.acioina.getNextStep()>x?$.acioina.writeFormMessage(0,a,"#form1"):y(e,t)},showError:y,updateNextStep:B,setInputAttributes:function(a,e,t){a.val(e),a.attr("readonly",t),a.attr("disabled",t)},disabledBackButton:S,showHideForm:j,closeModal:N,createButtons:b,createPrompt:M,createConfirm:function(a){N(!0),$.acioina.getServerError()&&$.acioina.destroyAlpacaForm(1),u.options.fields.prompt.label=a,m.alpaca(u)},hideMap:function(){$("#robot1,#robot2").each(function(){$(this).hasClass("hidden")||$(this).addClass("hidden")})},getSelectedImageMap:v,getStepId:w,selectErrorMessage:function(){var a=f.data.refreshPage;j(p,!1),$.acioina.getNextStep()>x&&(a=f.data.partialSuccess),$.acioina.writeFormMessage(0,a,"#form1")},getSelectById:function(e,a,t,o){i.get(f.data.ajaxUrl+"/select/edit/"+a+"?robot="+v()+"&formid="+w()).then(function(a){a.data&&a.data.success?e(a.data.records):o||$.acioina.isOverlayVisible()||t()},function(){o||$.acioina.isOverlayVisible()||t()})},showServerError:E,getDataAjax:function(){var e=o.defer();return i.get(f.data.ajaxUrl+f.data.ajaxRoute+"/"+$.acioina.getNextStep()+"?robot="+v()+"&formid="+w()).then(function(a){e.resolve(a.data)},function(){e.reject()}),e.promise},executeNextStep:function(){var a=!1,e=$.acioina.getAlpacaForm(0).getValue(),t=o.defer();return j(p,!0),$.acioina.getAlpacaForm(2)&&($.acioina.destroyAlpacaForm(2),a=!0),$.acioina.destroyAlpacaForm(1),M(f.data.promptTitle,f.data.promptMessage,a),n.cancel(c),c=n(function(){"{}"===e&&(e={}),e.Status=v(),e.ID=w(),e.StepId=$.acioina.getNextStep(),i.post(f.data.ajaxUrl+f.data.ajaxRoute,{Data:JSON.stringify(e)}).then(function(a){t.resolve(a.data)},function(){t.reject()})},500),t.promise},mainForm:d,form1:l,form2:m,loading:p,json0:u,json1:g,json2:f,json3:h,MAX_STEPS:x,enableBackButtonStep:F}}]}),angular.module("acioina.guestEmailForm",["acioina.commonForm"]).provider("acioinaGuestEmailForm",function(){"use strict";this.$get=["$http","$q","$injector","$document","$timeout","$rootScope","$stateParams","$state","acioinaCommonForm",function(a,e,t,o,i,n,r,s,c){var d=!1,l=function(){c.showFailMessage(c.json2.data.thanksMessage)},m=function(a){a.success?(c.updateNextStep(),$.acioina.getNextStepFlag()?$.acioina.setNextStep($.acioina.getNextStep()+1):$.acioina.setNextStep($.acioina.getNextStep()-1),c.getDataAjax().then(p,l)):c.showError(a.error,a.param1)},p=function(a){a.success?(d=!0,c.hideMap(),$.acioina.destroyAlpacaForm(0),a.next.data&&(a.next.data.facebookPictureUrl||a.next.data.facebookLoginUrl)?(a.next.data.facebookLoginUrl?$.acioina.writeFormMessage(0,c.json2.data.thanksMessage,"#form1"):($.acioina.writeFormMessage(0,a.next.data.facebookPictureUrl,"#form1"),$(".img_group1").acioina({rel:"img_group1",slideshow:!0,maxWidth:"100%",maxHeight:"100%"})),c.showHideForm(c.loading,!1)):(a.next.options.fields.state&&(a.next.options.fields.state.dataSource=function(a){c.getSelectById(a,0,c.selectErrorMessage,$.acioina.getNextStep()>c.MAX_STEPS)}),a.next.options.fields.country&&(a.next.options.fields.country.dataSource=function(a){c.getSelectById(a,1,c.selectErrorMessage,$.acioina.getNextStep()>c.MAX_STEPS)}),a.next.options.fields.FirstName&&(a.next.options.fields.FirstName.onValidValue=function(a){$.acioina.validateName(a,0)}),a.next.options.fields.LastName&&(a.next.options.fields.LastName.onValidValue=function(a){$.acioina.validateName(a,0)}),c.doNext(c.json2.data.thanksMessage,a.next))):c.showFailMessage(c.json2.data.thanksMessage,a.error,a.param1)};function u(){c.showHideForm(c.form1,!1),$.acioina.getAlpacaForm(0).refreshValidationState(!0),$.acioina.getAlpacaForm(0).isValid(!0)?c.getSelectedImageMap()?0!==$.acioina.getNextStep()||d?$.acioina.getNextStep()===c.MAX_STEPS&&$.acioina.getNextStepFlag()?c.createConfirm(c.json2.data.confirmLastStep):($.acioina.setServerError(!1),c.executeNextStep().then(m,l)):c.createConfirm(c.json2.data.confirmFirstStep):c.createPrompt(c.json2.data.robotTitle,c.json2.data.robotMessage,!1):c.createPrompt(c.json2.data.formErrorTitle,c.json2.data.formErrorMessage,!1)}function g(){$.acioina.setServerError(!1),c.executeNextStep().then(m,l)}return{initAlpaca:function(){c.doInit(u,!0,g),c.json3.options.fields.FirstName.onValidValue=function(a){$.acioina.validateName(a,0)},c.json3.options.fields.LastName.onValidValue=function(a){$.acioina.validateName(a,0)},c.mainForm.alpaca(c.json3)}}}]}),angular.module("acioina.loginForm",["acioina.commonForm"]).provider("acioinaLoginForm",function(){"use strict";this.$get=["$http","$q","$injector","$document","$timeout","$rootScope","$stateParams","$state","acioinaCommonForm",function(a,e,t,o,i,n,r,s,c){function d(a){$(a.control).attr("autocomplete","new-password")}var l=function(){c.showFailMessage(c.json2.data.serverErrorMessage)},m=function(a){a.success?(c.updateNextStep(),c.getDataAjax().then(p,l)):c.showError(a.error,a.param1)},p=function(a){a.success?(c.hideMap(),$.acioina.destroyAlpacaForm(0),a.next.data&&a.next.data.facebookPictureUrl?($.acioina.writeFormMessage(0,a.next.data.facebookPictureUrl,"#form1"),$(".img_group1").acioina({rel:"img_group1",slideshow:!0,maxWidth:"100%",maxHeight:"100%"}),c.showHideForm(c.loading,!1)):c.showFailMessage(c.json2.data.serverErrorMessage)):c.showFailMessage(c.json2.data.serverErrorMessage,a.error,a.param1)};return{initAlpaca:function(){c.json3.postRender=function(e){c.json2.postRender=function(a){c.showHideForm(c.loading,!1),c.json1.postRender=function(a){$.acioina.setAlpacaForm(2,a),$.acioina($.acioina.showPrompt(c.form2,function(){c.showHideForm(c.form1,!0),$.acioina.destroyAlpacaForm(2)}))},$.acioina.setAlpacaForm(1,a),$.acioina.setAlpacaForm(0,e)},c.json2.options.form.buttons.goNext.title=c.json3.data.buttonName,c.json2.options.form.buttons.goNext.click=function(){c.updateNextStep(),$.acioina.setNextStepFlag(!0),c.showHideForm(c.form1,!1),$.acioina.getAlpacaForm(0).refreshValidationState(!0),$.acioina.getAlpacaForm(0).isValid(!0)?c.getSelectedImageMap()?($.acioina.setServerError(!1),c.executeNextStep().then(m,l)):c.createPrompt(c.json2.data.robotTitle,c.json2.data.robotMessage,!1):c.createPrompt(c.json2.data.formErrorTitle,c.json2.data.formErrorMessage,!1)},c.json2.data.info=c.json3.schema.description,c.form1.alpaca(c.json2)},c.json3.data.saveLogin||(c.json3.options.fields.Login.onAutocomplete=d,c.json3.options.fields.Password.onAutocomplete=d),c.mainForm.alpaca(c.json3)}}}]}),angular.module("acioina.sendEmailForm",["acioina.commonForm"]).provider("acioinaSendEmailForm",function(){"use strict";this.$get=["$http","$q","$injector","$document","$timeout","$rootScope","$stateParams","$state","acioinaCommonForm",function(a,e,t,o,i,n,r,s,c){var d=function(){c.showFailMessage(c.json2.data.thanksMessage)},l=function(a){a.success?(c.updateNextStep(),c.getDataAjax().then(m,d)):c.showError(a.error,a.param1)},m=function(a){a.success?(c.hideMap(),$.acioina.destroyAlpacaForm(0),a.next.data&&a.next.data.facebookPictureUrl?($.acioina.writeFormMessage(0,a.next.data.facebookPictureUrl,"#form1"),$(".img_group1").acioina({rel:"img_group1",slideshow:!0,maxWidth:"100%",maxHeight:"100%"}),c.showHideForm(c.loading,!1)):a.next.data&&a.next.data.facebookLoginUrl?(a.next.schema.title=c.json2.data.facebookLoginTitle,a.next.options.form.buttons.closeButton&&(a.next.data.cancelFacebookLogin&&(c.json2.data.cancelFacebookLogin=a.next.data.cancelFacebookLogin),a.next.options.form.buttons.closeButton.click=function(){c.showHideForm(c.loading,!1),$.acioina.writeFormMessage(0,c.json2.data.cancelFacebookLogin,"#form1")}),a.next.options.form.buttons.goButton&&(a.next.options.form.buttons.goButton.click=function(){c.showHideForm(c.loading,!0),$.acioina.writeFormMessage(0,c.json2.data.waitForFacebook,"#form1"),window.location=a.next.data.facebookLoginUrl}),a.next.postRender=function(a){$.acioina.setAlpacaForm(0,a),c.closeModal(!1),$.scrollTo(c.mainForm.offset().top,200,{axis:"y"}),c.showHideForm(c.loading,!1)},c.mainForm.alpaca(a.next)):(c.updateNextStep(),$.acioina.setNextStep($.acioina.getNextStep()+1),c.doNextButton(c.json2.data.submitName,a.next))):c.showFailMessage(c.json2.data.thanksMessage,a.error,a.param1)};function p(){c.showHideForm(c.form1,!1),$.acioina.getNextStepFlag()?($.acioina.getAlpacaForm(0).refreshValidationState(!0),$.acioina.getAlpacaForm(0).isValid(!0)?c.getSelectedImageMap()?$.acioina.getNextStep()>c.MAX_STEPS?c.createConfirm(c.json2.data.confirmSubmit):($.acioina.setServerError(!1),c.executeNextStep().then(l,d)):c.createPrompt(c.json2.data.robotTitle,c.json2.data.robotMessage,!1):c.createPrompt(c.json2.data.formErrorTitle,c.json2.data.formErrorMessage,!1)):c.createConfirm(c.json2.data.confirmCancel)}function u(){$.acioina.getNextStepFlag()?($.acioina.setServerError(!1),c.executeNextStep().then(l,d)):(c.closeModal(!1),c.showHideForm(c.form2,!1),$.acioina.destroyAlpacaForm(1),c.showHideForm(c.loading,!1),c.hideMap(),c.showHideForm(c.form1,!0),$.acioina.writeFormMessage(0,c.json2.data.thanksMessage,"#form1"))}return{initAlpaca:function(){c.doInit(p,!1,u),c.mainForm.alpaca(c.json3)}}}]}),angular.module("acioina.surveyForm",["acioina.commonForm"]).provider("acioinaSurveyForm",function(){"use strict";this.$get=["$http","$q","$injector","$document","$timeout","$rootScope","$stateParams","$state","acioinaCommonForm",function(a,e,t,o,i,n,r,s,c){var d=function(){c.showFailMessage(c.json2.data.doneMessage)},l=function(a){a.success?(c.updateNextStep(),$.acioina.getNextStepFlag()?$.acioina.setNextStep($.acioina.getNextStep()+1):$.acioina.setNextStep($.acioina.getNextStep()-1),c.getDataAjax().then(m,d)):c.showError(a.error,a.param1)},m=function(a){a.success?(c.hideMap(),$.acioina.destroyAlpacaForm(0),a.next.data&&(a.next.data.facebookPictureUrl||a.next.data.facebookLoginUrl)?(a.next.data.facebookLoginUrl?$.acioina.writeFormMessage(0,c.json2.data.doneMessage,"#form1"):($.acioina.writeFormMessage(0,a.next.data.facebookPictureUrl,"#form1"),$(".img_group1").acioina({rel:"img_group1",slideshow:!0,maxWidth:"100%",maxHeight:"100%"})),c.showHideForm(c.loading,!1)):(a.next.options.fields.state&&(a.next.options.fields.state.dataSource=function(a){c.getSelectById(a,0,c.selectErrorMessage,$.acioina.getNextStep()>c.MAX_STEPS)}),a.next.options.fields.country&&(a.next.options.fields.country.dataSource=function(a){c.getSelectById(a,1,c.selectErrorMessage,$.acioina.getNextStep()>c.MAX_STEPS)}),a.next.options.fields.FullName&&(a.next.options.fields.FullName.onValidValue=function(a){$.acioina.validateName(a,0)}),a.next.options.fields.isComplexName&&(a.next.options.fields.isComplexName.onValidValue=function(a){!function(a){var e=$.acioina.getAlpacaForm(0).childrenByPropertyId.complexName.getFieldEl().find("input");if(0===a.getValue().length||!1===a.getValue())c.setInputAttributes(e,"N/A",!0),$.acioina.getAlpacaForm(0).childrenByPropertyId.complexName.refreshValidationState(!1);else{e.attr("disabled")&&c.setInputAttributes(e,"",!1)}}(a)}),c.doNext(c.json2.data.doneMessage,a.next))):c.showFailMessage(c.json2.data.doneMessage,a.error,a.param1)};function p(){c.showHideForm(c.form1,!1),$.acioina.getAlpacaForm(0).refreshValidationState(!0),$.acioina.getAlpacaForm(0).isValid(!0)?c.getSelectedImageMap()?$.acioina.getNextStep()===c.MAX_STEPS&&$.acioina.getNextStepFlag()?c.createConfirm(c.json2.data.confirmLastStep):($.acioina.setServerError(!1),c.executeNextStep().then(l,d)):c.createPrompt(c.json2.data.robotTitle,c.json2.data.robotMessage,!1):c.createPrompt(c.json2.data.formErrorTitle,c.json2.data.formErrorMessage,!1)}function u(){$.acioina.setServerError(!1),c.executeNextStep().then(l,d)}return{initAlpaca:function(){c.doInit(p,!0,u),c.mainForm.alpaca(c.json3)}}}]}),angular.module("acioina.clientProfileForm",["acioina.commonForm"]).provider("acioinaClientProfileForm",function(){"use strict";this.$get=["$http","$q","$injector","$document","$timeout","$rootScope","$stateParams","$state","acioinaCommonForm",function(a,e,t,o,i,n,r,s,c){var d=function(){c.showFailMessage(c.json2.data.doneMessage)},l=function(a){a.success?(c.updateNextStep(),$.acioina.getNextStepFlag()?$.acioina.setNextStep($.acioina.getNextStep()+1):$.acioina.setNextStep($.acioina.getNextStep()-1),c.getDataAjax().then(m,d)):c.showError(a.error,a.param1)},m=function(a){a.success?(c.hideMap(),$.acioina.destroyAlpacaForm(0),a.next.data&&(a.next.data.facebookPictureUrl||a.next.data.facebookLoginUrl)?(a.next.data.facebookLoginUrl?$.acioina.writeFormMessage(0,c.json2.data.doneMessage,"#form1"):($.acioina.writeFormMessage(0,a.next.data.facebookPictureUrl,"#form1"),$(".img_group1").acioina({rel:"img_group1",slideshow:!0,maxWidth:"100%",maxHeight:"100%"})),c.showHideForm(c.loading,!1)):(a.next.options.fields.state&&(a.next.options.fields.state.dataSource=function(a){c.getSelectById(a,0,c.selectErrorMessage,$.acioina.getNextStep()>c.MAX_STEPS)}),a.next.options.fields.country&&(a.next.options.fields.country.dataSource=function(a){c.getSelectById(a,1,c.selectErrorMessage,$.acioina.getNextStep()>c.MAX_STEPS)}),a.next.options.fields.FirstName&&(a.next.options.fields.FirstName.onValidValue=function(a){$.acioina.validateName(a,0)}),a.next.options.fields.LastName&&(a.next.options.fields.LastName.onValidValue=function(a){$.acioina.validateName(a,0)}),a.next.options.fields.Password&&(a.next.options.fields.Password.onValidValue=function(a){p(a)}),a.next.options.fields.ConfirmPassword&&(a.next.options.fields.ConfirmPassword.onValidValue=function(a){p(a)}),a.next.options.fields.changePassword&&(a.next.options.fields.changePassword.onValidValue=function(a){!function(a){var e=$.acioina.getAlpacaForm(0).childrenByPropertyId.Password.getFieldEl().find("input");if(0===a.getValue().length||!1===a.getValue())c.setInputAttributes(e,"thisIsNotapassword0",!0),$.acioina.getAlpacaForm(0).childrenByPropertyId.Password.refreshValidationState(!1),c.setInputAttributes($.acioina.getAlpacaForm(0).childrenByPropertyId.ConfirmPassword.getFieldEl().find("input"),"thisIsNotapassword0",!0),$.acioina.getAlpacaForm(0).childrenByPropertyId.ConfirmPassword.refreshValidationState(!1);else{e.attr("disabled")&&(c.setInputAttributes(e,"",!1),c.setInputAttributes($.acioina.getAlpacaForm(0).childrenByPropertyId.ConfirmPassword.getFieldEl().find("input"),"",!1))}}(a)}),c.doNext(c.json2.data.doneMessage,a.next))):c.showFailMessage(c.json2.data.doneMessage,a.error,a.param1)};function p(a){if((!$.acioina.getAlpacaForm(0).childrenByPropertyId.changePassword||!1!==$.acioina.getAlpacaForm(0).childrenByPropertyId.changePassword.getValue())&&0!==a.getValue().length){var e=a.getValue();if("ConfirmPassword"===a.getName()){var t=$.acioina.getAlpacaForm(0).childrenByPropertyId.Password.getValue(),o=a.validation;e!==t&&(o.notOptional={message:c.json2.data.confirmPassword,status:!1})}else{e!==$.acioina.getAlpacaForm(0).childrenByPropertyId.ConfirmPassword.getValue()&&$.acioina.getAlpacaForm(0).childrenByPropertyId.ConfirmPassword.getFieldEl().find("input").val("")}}}function u(){c.showHideForm(c.form1,!1),$.acioina.getAlpacaForm(0).refreshValidationState(!0),$.acioina.getAlpacaForm(0).isValid(!0)?c.getSelectedImageMap()?$.acioina.getNextStep()===c.MAX_STEPS&&$.acioina.getNextStepFlag()?c.createConfirm(c.json2.data.confirmLastStep):($.acioina.setServerError(!1),c.executeNextStep().then(l,d)):c.createPrompt(c.json2.data.robotTitle,c.json2.data.robotMessage,!1):c.createPrompt(c.json2.data.formErrorTitle,c.json2.data.formErrorMessage,!1)}function g(){$.acioina.setServerError(!1),c.executeNextStep().then(l,d)}return{initAlpaca:function(){c.doInit(u,!0,g),c.mainForm.alpaca(c.json3)}}}]}),angular.module("acioina.infoForm",["acioina.commonForm"]).provider("acioinaInfoForm",function(){"use strict";this.$get=["$http","$q","$injector","$document","$timeout","$rootScope","$stateParams","$state","acioinaCommonForm",function(a,e,t,o,i,n,r,s,c){var d=function(){c.showFailMessage(c.json2.data.thanksMessage)},l=function(a){a?(c.hideMap(),$.acioina.destroyAlpacaForm(0),$.acioina.writeFormMessage(0,a,"#form1"),c.showHideForm(c.form1,!0)):c.showServerError(!1,c.json2.data.serverErrorMessage),c.showHideForm(c.loading,!1)};function m(){c.showHideForm(c.form1,!1),$.acioina.getNextStepFlag()?($.acioina.getAlpacaForm(0).refreshValidationState(!0),$.acioina.getAlpacaForm(0).isValid(!0)?c.getSelectedImageMap()?($.acioina.setServerError(!1),c.updateNextStep(),c.showHideForm(c.loading,!0),c.getDataAjax().then(l,d)):c.createPrompt(c.json2.data.robotTitle,c.json2.data.robotMessage,!1):c.createPrompt(c.json2.data.formErrorTitle,c.json2.data.formErrorMessage,!1)):c.createConfirm(c.json2.data.confirmCancel)}function p(){$.acioina.getNextStepFlag()||(c.closeModal(!1),c.showHideForm(c.form2,!1),$.acioina.destroyAlpacaForm(1),c.showHideForm(c.loading,!1),c.hideMap(),c.showHideForm(c.form1,!0),$.acioina.writeFormMessage(0,c.json2.data.thanksMessage,"#form1"))}return{initAlpaca:function(){c.doInit(m,!1,p),c.mainForm.alpaca(c.json3)}}}]});