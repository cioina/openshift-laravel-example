!function(e,t){"use strict";var n=!0;e&&void 0!==e.umd&&(n=e.umd),n&&"object"==typeof exports?module.exports=t(require("jquery"),require("handlebars")):n&&"function"==typeof define&&define.amd?define("alpaca",["jquery","handlebars"],t):e.Alpaca=t(e.jQuery,e.Handlebars)}(this,function($,Handlebars){var vL,uL,_L,nM,NM,PM,ZM,OO,nP,oP,UP,VP,dT,eT,nU,oU,TV,UV,JY,KY,QZ,XZ,d$,k$,l$,u$,z$,N$,V$,Z$,$$,z_,A_,N_,O_,v0,w0,T3,W3,X3,v4,w4,P4,Q4;return this.HandlebarsPrecompiled=this.HandlebarsPrecompiled||{},this.HandlebarsPrecompiled["web-display"]=this.HandlebarsPrecompiled["web-display"]||{},this.HandlebarsPrecompiled["web-display"]["container-object-item"]=Handlebars.template({1:function(e,t,n,i,r){return""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},u='<script type="text/x-handlebars-template">\r\n\r\n    <div>\r\n        ';return o=null!=(o=s(n,"itemField")||(null!=t?s(t,"itemField"):t))?o:e.hooks.helperMissing,l={name:"itemField",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:4,column:8},end:{line:4,column:36}}},a="function"==typeof o?o.call(null!=t?t:e.nullContext||{},l):o,s(n,"itemField")||(a=e.hooks.blockHelperMissing.call(t,a,l)),null!=a&&(u+=a),u+"\r\n    </div>\r\n\r\n<\/script>\r\n"},useData:!0}),this.HandlebarsPrecompiled["web-display"]["container-object"]=Handlebars.template({1:function(e,t,n,i,r){var a,o,l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},u="\r\n            ";return o=null!=(o=s(n,"item")||(null!=t?s(t,"item"):t))?o:e.hooks.helperMissing,l={name:"item",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:7,column:12},end:{line:7,column:30}}},a="function"==typeof o?o.call(null!=t?t:e.nullContext||{},l):o,s(n,"item")||(a=e.hooks.blockHelperMissing.call(t,a,l)),null!=a&&(u+=a),u+"\r\n\r\n"},2:function(e,t,n,i,r){return""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <div>\r\n\r\n'+(null!=(a=o(n,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"items"):t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:5,column:8},end:{line:9,column:17}}}))?a:"")+"\r\n    </div>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-display"].container=Handlebars.template({1:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <legend class="'+(null!=(a=o(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"labelClass"):a,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:6,column:23},end:{line:6,column:78}}}))?a:"")+' alpaca-container-label">'+(null!=(a=e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"label"):a,t))?a:"")+"</legend>\r\n"},2:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"labelClass"):a,t))},4:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=o(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"helpers"):a,{name:"each",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r,loc:{start:{line:10,column:8},end:{line:15,column:17}}}))?a:""},5:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <p class="alpaca-helper '+(null!=(a=o(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"helperClass"):a,{name:"if",hash:{},fn:e.program(6,r,0),inverse:e.noop,data:r,loc:{start:{line:11,column:32},end:{line:11,column:89}}}))?a:"")+'">\r\n            <i class="alpaca-icon-helper"></i>\r\n            '+(null!=(a=e.lambda(t,t))?a:"")+"\r\n        </p>\r\n"},6:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"helperClass"):a,t))},8:function(e,t,n,i,r){return""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},c='<script type="text/x-handlebars-template">\r\n\r\n    <div>\r\n\r\n'+(null!=(a=u(n,"if").call(s,null!=(a=null!=t?u(t,"options"):t)?u(a,"label"):a,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:5,column:8},end:{line:7,column:15}}}))?a:"")+"\r\n"+(null!=(a=u(n,"if").call(s,null!=(a=null!=t?u(t,"options"):t)?u(a,"helpers"):a,{name:"if",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:9,column:8},end:{line:16,column:15}}}))?a:"")+"\r\n        ";return o=null!=(o=u(n,"container")||(null!=t?u(t,"container"):t))?o:e.hooks.helperMissing,l={name:"container",hash:{},fn:e.program(8,r,0),inverse:e.noop,data:r,loc:{start:{line:18,column:8},end:{line:18,column:36}}},a="function"==typeof o?o.call(s,l):o,u(n,"container")||(a=e.hooks.blockHelperMissing.call(t,a,l)),null!=a&&(c+=a),c+"\r\n\r\n    </div>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-display"]["control-any"]=Handlebars.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <div>'+(null!=(a=(o(n,"str")||t&&o(t,"str")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?o(t,"data"):t,{name:"str",hash:{},data:r,loc:{start:{line:3,column:9},end:{line:3,column:23}}}))?a:"")+"</div>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-display"]["control-checkbox"]=Handlebars.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <div>'+(null!=(a=(o(n,"str")||t&&o(t,"str")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?o(t,"data"):t,{name:"str",hash:{},data:r,loc:{start:{line:3,column:9},end:{line:3,column:23}}}))?a:"")+"</div>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-display"]["control-password"]=Handlebars.template({1:function(e,t,n,i,r){return""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <div>'+(null!=(a=(o(n,"disguise")||t&&o(t,"disguise")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?o(t,"data"):t,"&bull;",{name:"disguise",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:9},end:{line:3,column:49}}}))?a:"")+"</div>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-display"]["control-radio"]=Handlebars.template({1:function(e,t,n,i,r,a,o){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l=(s(n,"compare")||t&&s(t,"compare")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?s(t,"value"):t,null!=o[1]?s(o[1],"data"):o[1],{name:"compare",hash:{},fn:e.program(2,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:5,column:12},end:{line:7,column:24}}}))?l:""},2:function(e,t,n,i,r){var a,o,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                "+(null!=(a="function"==typeof(o=null!=(o=l(n,"text")||(null!=t?l(t,"text"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"text",hash:{},data:r,loc:{start:{line:6,column:16},end:{line:6,column:26}}}):o)?a:"")+"\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r,a,o){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <div>\r\n'+(null!=(l=s(n,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"selectOptions"):t,{name:"each",hash:{},fn:e.program(1,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:4,column:8},end:{line:8,column:17}}}))?l:"")+"    </div>\r\n\r\n<\/script>\r\n"},useData:!0,useDepths:!0}),this.HandlebarsPrecompiled["web-display"]["control-select"]=Handlebars.template({1:function(e,t,n,i,r,a,o){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l=(s(n,"compare")||t&&s(t,"compare")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?s(t,"value"):t,null!=o[1]?s(o[1],"data"):o[1],{name:"compare",hash:{},fn:e.program(2,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:5,column:12},end:{line:7,column:24}}}))?l:""},2:function(e,t,n,i,r){var a,o,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                "+(null!=(a="function"==typeof(o=null!=(o=l(n,"text")||(null!=t?l(t,"text"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"text",hash:{},data:r,loc:{start:{line:6,column:16},end:{line:6,column:26}}}):o)?a:"")+"\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r,a,o){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <div>\r\n'+(null!=(l=s(n,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"selectOptions"):t,{name:"each",hash:{},fn:e.program(1,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:4,column:8},end:{line:8,column:17}}}))?l:"")+"    </div>\r\n\r\n<\/script>\r\n"},useData:!0,useDepths:!0}),this.HandlebarsPrecompiled["web-display"]["control-text"]=Handlebars.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <div>'+(null!=(a="function"==typeof(o=null!=(o=l(n,"data")||(null!=t?l(t,"data"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"data",hash:{},data:r,loc:{start:{line:3,column:9},end:{line:3,column:19}}}):o)?a:"")+"</div>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-display"]["control-textarea"]=Handlebars.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <p>\r\n        '+(null!=(a="function"==typeof(o=null!=(o=l(n,"data")||(null!=t?l(t,"data"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"data",hash:{},data:r,loc:{start:{line:4,column:8},end:{line:4,column:18}}}):o)?a:"")+"\r\n    </p>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-display"].control=Handlebars.template({1:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <label class="'+(null!=(a=s(n,"if").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"labelClass"):a,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:6,column:22},end:{line:6,column:77}}}))?a:"")+' alpaca-control-label" for="'+e.escapeExpression("function"==typeof(o=null!=(o=s(n,"id")||(null!=t?s(t,"id"):t))?o:e.hooks.helperMissing)?o.call(l,{name:"id",hash:{},data:r,loc:{start:{line:6,column:105},end:{line:6,column:111}}}):o)+'">'+(null!=(a=e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"label"):a,t))?a:"")+"</label>\r\n"},2:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"labelClass"):a,t))},4:function(e,t,n,i,r){return""},6:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=o(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"helpers"):a,{name:"each",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:12,column:8},end:{line:17,column:17}}}))?a:""},7:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <p class="'+(null!=(a=o(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"helperClass"):a,{name:"if",hash:{},fn:e.program(8,r,0),inverse:e.noop,data:r,loc:{start:{line:13,column:18},end:{line:13,column:75}}}))?a:"")+'">\r\n            <i class="info-sign"></i>\r\n            '+(null!=(a=e.lambda(t,t))?a:"")+"\r\n        </p>\r\n"},8:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"helperClass"):a,t))},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},c='<script type="text/x-handlebars-template">\r\n\r\n    <div>\r\n\r\n'+(null!=(a=u(n,"if").call(s,null!=(a=null!=t?u(t,"options"):t)?u(a,"label"):a,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:5,column:8},end:{line:7,column:15}}}))?a:"")+"\r\n        ";return o=null!=(o=u(n,"control")||(null!=t?u(t,"control"):t))?o:e.hooks.helperMissing,l={name:"control",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:9,column:8},end:{line:9,column:32}}},a="function"==typeof o?o.call(s,l):o,u(n,"control")||(a=e.hooks.blockHelperMissing.call(t,a,l)),null!=a&&(c+=a),c+"\r\n\r\n"+(null!=(a=u(n,"if").call(s,null!=(a=null!=t?u(t,"options"):t)?u(a,"helpers"):a,{name:"if",hash:{},fn:e.program(6,r,0),inverse:e.noop,data:r,loc:{start:{line:11,column:8},end:{line:18,column:15}}}))?a:"")+"\r\n    </div>\r\n\r\n<\/script>\r\n"},useData:!0}),this.HandlebarsPrecompiled["web-display"].form=Handlebars.template({1:function(e,t,n,i,r){return""},3:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=o(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"buttons"):a,{name:"each",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:9,column:12},end:{line:11,column:21}}}))?a:""},4:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <button data-key="'+c(typeof(o=null!=(o=p(n,"key")||r&&p(r,"key"))?o:s)==u?o.call(l,{name:"key",hash:{},data:r,loc:{start:{line:10,column:30},end:{line:10,column:38}}}):o)+'" '+(null!=(a=(p(n,"compare")||t&&p(t,"compare")||s).call(l,null!=t?p(t,"type"):t,"submit",{name:"compare",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r,loc:{start:{line:10,column:40},end:{line:10,column:91}}}))?a:"")+" "+(null!=(a=(p(n,"compare")||t&&p(t,"compare")||s).call(l,null!=t?p(t,"type"):t,"reset",{name:"compare",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:10,column:92},end:{line:10,column:141}}}))?a:"")+' class="alpaca-form-button alpaca-form-button-'+c(typeof(o=null!=(o=p(n,"key")||r&&p(r,"key"))?o:s)==u?o.call(l,{name:"key",hash:{},data:r,loc:{start:{line:10,column:187},end:{line:10,column:195}}}):o)+" "+c(typeof(o=null!=(o=p(n,"styles")||(null!=t?p(t,"styles"):t))?o:s)==u?o.call(l,{name:"styles",hash:{},data:r,loc:{start:{line:10,column:196},end:{line:10,column:206}}}):o)+'" '+(null!=(a=p(n,"each").call(l,null!=t?p(t,"value"):t,{name:"each",hash:{},fn:e.program(9,r,0),inverse:e.noop,data:r,loc:{start:{line:10,column:208},end:{line:10,column:251}}}))?a:"")+" "+(null!=(a=p(n,"each").call(l,null!=t?p(t,"attributes"):t,{name:"each",hash:{},fn:e.program(11,r,0),inverse:e.noop,data:r,loc:{start:{line:10,column:252},end:{line:10,column:301}}}))?a:"")+">"+(null!=(a=typeof(o=null!=(o=p(n,"value")||(null!=t?p(t,"value"):t))?o:s)==u?o.call(l,{name:"value",hash:{},data:r,loc:{start:{line:10,column:302},end:{line:10,column:313}}}):o)?a:"")+"</button>\r\n"},5:function(e,t,n,i,r){return'type="submit"'},7:function(e,t,n,i,r){return'type="reset"'},9:function(e,t,n,i,r){var a,o=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o("function"==typeof(a=null!=(a=l(n,"key")||r&&l(r,"key"))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:r,loc:{start:{line:10,column:223},end:{line:10,column:231}}}):a)+'="'+o(e.lambda(t,t))+'"'},11:function(e,t,n,i,r){var a,o=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" "+o("function"==typeof(a=null!=(a=l(n,"key")||r&&l(r,"key"))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:r,loc:{start:{line:10,column:273},end:{line:10,column:281}}}):a)+'="'+o(e.lambda(t,t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},c='<script type="text/x-handlebars-template">\r\n\r\n    <form role="form">\r\n\r\n        ';return o=null!=(o=u(n,"formItems")||(null!=t?u(t,"formItems"):t))?o:e.hooks.helperMissing,l={name:"formItems",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:5,column:8},end:{line:5,column:36}}},a="function"==typeof o?o.call(s,l):o,u(n,"formItems")||(a=e.hooks.blockHelperMissing.call(t,a,l)),null!=a&&(c+=a),c+'\r\n\r\n        <div class="alpaca-form-buttons-container">\r\n'+(null!=(a=u(n,"if").call(s,null!=(a=null!=t?u(t,"options"):t)?u(a,"buttons"):a,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r,loc:{start:{line:8,column:12},end:{line:12,column:19}}}))?a:"")+"        </div>\r\n\r\n    </form>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled=this.HandlebarsPrecompiled||{},this.HandlebarsPrecompiled["web-edit"]=this.HandlebarsPrecompiled["web-edit"]||{},this.HandlebarsPrecompiled["web-edit"]["container-object-item"]=Handlebars.template({1:function(e,t,n,i,r){return""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},u='<script type="text/x-handlebars-template">\r\n\r\n    <div>\r\n\r\n        ';return o=null!=(o=s(n,"itemField")||(null!=t?s(t,"itemField"):t))?o:e.hooks.helperMissing,l={name:"itemField",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:5,column:8},end:{line:5,column:36}}},a="function"==typeof o?o.call(null!=t?t:e.nullContext||{},l):o,s(n,"itemField")||(a=e.hooks.blockHelperMissing.call(t,a,l)),null!=a&&(u+=a),u+"\r\n\r\n    </div>\r\n\r\n<\/script>\r\n"},useData:!0}),this.HandlebarsPrecompiled["web-edit"]["container-object"]=Handlebars.template({1:function(e,t,n,i,r){var a,o,l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},u="\r\n            ";return o=null!=(o=s(n,"item")||(null!=t?s(t,"item"):t))?o:e.hooks.helperMissing,l={name:"item",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:7,column:12},end:{line:7,column:30}}},a="function"==typeof o?o.call(null!=t?t:e.nullContext||{},l):o,s(n,"item")||(a=e.hooks.blockHelperMissing.call(t,a,l)),null!=a&&(u+=a),u+"\r\n\r\n"},2:function(e,t,n,i,r){return""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <div>\r\n\r\n'+(null!=(a=o(n,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"items"):t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:5,column:8},end:{line:9,column:17}}}))?a:"")+"\r\n    </div>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-edit"].container=Handlebars.template({1:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <legend class="'+(null!=(a=o(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"labelClass"):a,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:6,column:23},end:{line:6,column:78}}}))?a:"")+' alpaca-container-label">'+(null!=(a=e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"label"):a,t))?a:"")+"</legend>\r\n"},2:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"labelClass"):a,t))},4:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=o(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"helpers"):a,{name:"each",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r,loc:{start:{line:10,column:8},end:{line:15,column:17}}}))?a:""},5:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <p class="alpaca-helper '+(null!=(a=o(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"helperClass"):a,{name:"if",hash:{},fn:e.program(6,r,0),inverse:e.noop,data:r,loc:{start:{line:11,column:32},end:{line:11,column:89}}}))?a:"")+'">\r\n            <i class="alpaca-icon-helper"></i>\r\n            '+(null!=(a=e.lambda(t,t))?a:"")+"\r\n        </p>\r\n"},6:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"helperClass"):a,t))},8:function(e,t,n,i,r){return""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},c='<script type="text/x-handlebars-template">\r\n\r\n    <div>\r\n\r\n'+(null!=(a=u(n,"if").call(s,null!=(a=null!=t?u(t,"options"):t)?u(a,"label"):a,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:5,column:8},end:{line:7,column:15}}}))?a:"")+"\r\n"+(null!=(a=u(n,"if").call(s,null!=(a=null!=t?u(t,"options"):t)?u(a,"helpers"):a,{name:"if",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:9,column:8},end:{line:16,column:15}}}))?a:"")+"\r\n        ";return o=null!=(o=u(n,"container")||(null!=t?u(t,"container"):t))?o:e.hooks.helperMissing,l={name:"container",hash:{},fn:e.program(8,r,0),inverse:e.noop,data:r,loc:{start:{line:18,column:8},end:{line:18,column:36}}},a="function"==typeof o?o.call(s,l):o,u(n,"container")||(a=e.hooks.blockHelperMissing.call(t,a,l)),null!=a&&(c+=a),c+"\r\n\r\n    </div>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-edit"]["control-any"]=Handlebars.template({1:function(e,t,n,i,r){return'readonly="readonly"'},3:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression("function"==typeof(a=null!=(a=o(n,"name")||(null!=t?o(t,"name"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:r,loc:{start:{line:3,column:114},end:{line:3,column:122}}}):a)+'"'},5:function(e,t,n,i,r){var a,o=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"data-"+o("function"==typeof(a=null!=(a=l(n,"key")||r&&l(r,"key"))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:r,loc:{start:{line:3,column:158},end:{line:3,column:166}}}):a)+'="'+o(e.lambda(t,t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <input type="text" id="'+e.escapeExpression("function"==typeof(o=null!=(o=s(n,"id")||(null!=t?s(t,"id"):t))?o:e.hooks.helperMissing)?o.call(l,{name:"id",hash:{},data:r,loc:{start:{line:3,column:27},end:{line:3,column:33}}}):o)+'" size="40" '+(null!=(a=s(n,"if").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"readonly"):a,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:45},end:{line:3,column:95}}}))?a:"")+" "+(null!=(a=s(n,"if").call(l,null!=t?s(t,"name"):t,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:96},end:{line:3,column:130}}}))?a:"")+" "+(null!=(a=s(n,"each").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"data"):a,{name:"each",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:131},end:{line:3,column:186}}}))?a:"")+"/>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-edit"]["control-checkbox"]=Handlebars.template({1:function(e,t,n,i,r,a,o){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\r\n"+(null!=(l=s(n,"each").call(null!=t?t:e.nullContext||{},null!=t?s(t,"checkboxOptions"):t,{name:"each",hash:{},fn:e.program(2,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:5,column:8},end:{line:17,column:17}}}))?l:"")+"\r\n"},2:function(e,t,n,i,r,a,o){var l,s,u=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.escapeExpression,h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n            <div>\r\n\r\n                <label>\r\n\r\n                    <input type="checkbox" data-checkbox-index="'+d(typeof(s=null!=(s=h(n,"index")||r&&h(r,"index"))?s:c)==p?s.call(u,{name:"index",hash:{},data:r,loc:{start:{line:11,column:64},end:{line:11,column:74}}}):s)+'" data-checkbox-value="'+d(typeof(s=null!=(s=h(n,"value")||(null!=t?h(t,"value"):t))?s:c)==p?s.call(u,{name:"value",hash:{},data:r,loc:{start:{line:11,column:97},end:{line:11,column:106}}}):s)+'" '+(null!=(l=h(n,"if").call(u,null!=(l=null!=o[1]?h(o[1],"options"):o[1])?h(l,"readonly"):l,{name:"if",hash:{},fn:e.program(3,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:11,column:108},end:{line:11,column:161}}}))?l:"")+" "+(null!=(l=h(n,"if").call(u,null!=t?h(t,"name"):t,{name:"if",hash:{},fn:e.program(5,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:11,column:162},end:{line:11,column:196}}}))?l:"")+" "+(null!=(l=h(n,"each").call(u,null!=(l=null!=o[1]?h(o[1],"options"):o[1])?h(l,"data"):l,{name:"each",hash:{},fn:e.program(7,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:11,column:197},end:{line:11,column:256}}}))?l:"")+"/>\r\n                    "+(null!=(l=typeof(s=null!=(s=h(n,"text")||(null!=t?h(t,"text"):t))?s:c)==p?s.call(u,{name:"text",hash:{},data:r,loc:{start:{line:12,column:20},end:{line:12,column:30}}}):s)?l:"")+"\r\n\r\n                </label>\r\n            </div>\r\n\r\n"},3:function(e,t,n,i,r){return'readonly="readonly"'},5:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression("function"==typeof(a=null!=(a=o(n,"name")||(null!=t?o(t,"name"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:r,loc:{start:{line:11,column:180},end:{line:11,column:188}}}):a)+'"'},7:function(e,t,n,i,r){var a,o=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"data-"+u(typeof(a=null!=(a=c(n,"key")||r&&c(r,"key"))?a:l)==s?a.call(o,{name:"key",hash:{},data:r,loc:{start:{line:11,column:227},end:{line:11,column:235}}}):a)+'="'+u(typeof(a=null!=(a=c(n,"value")||(null!=t?c(t,"value"):t))?a:l)==s?a.call(o,{name:"value",hash:{},data:r,loc:{start:{line:11,column:237},end:{line:11,column:246}}}):a)+'"'},9:function(e,t,n,i,r){var a,o=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n        <div>\r\n\r\n            <label>\r\n\r\n                <input type="checkbox" '+(null!=(a=l(n,"if").call(o,null!=(a=null!=t?l(t,"options"):t)?l(a,"readonly"):a,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r,loc:{start:{line:25,column:39},end:{line:25,column:89}}}))?a:"")+" "+(null!=(a=l(n,"if").call(o,null!=t?l(t,"name"):t,{name:"if",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r,loc:{start:{line:25,column:90},end:{line:25,column:124}}}))?a:"")+" "+(null!=(a=l(n,"each").call(o,null!=(a=null!=t?l(t,"options"):t)?l(a,"data"):a,{name:"each",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:25,column:125},end:{line:25,column:181}}}))?a:"")+"/>\r\n\r\n                "+(null!=(a=e.lambda(null!=(a=null!=t?l(t,"options"):t)?l(a,"rightLabel"):a,t))?a:"")+"\r\n            </label>\r\n\r\n        </div>\r\n\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r,a,o){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n'+(null!=(l=s(n,"if").call(null!=t?t:e.nullContext||{},null!=(l=null!=t?s(t,"options"):t)?s(l,"multiple"):l,{name:"if",hash:{},fn:e.program(1,r,0,a,o),inverse:e.program(9,r,0,a,o),data:r,loc:{start:{line:3,column:4},end:{line:32,column:11}}}))?l:"")+"\r\n<\/script>\r\n"},useData:!0,useDepths:!0}),this.HandlebarsPrecompiled["web-edit"]["control-password"]=Handlebars.template({1:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"placeholder"):a,t))+'"'},3:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'size="'+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"size"):a,t))+'"'},5:function(e,t,n,i,r){return'readonly="readonly"'},7:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression("function"==typeof(a=null!=(a=o(n,"name")||(null!=t?o(t,"name"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:r,loc:{start:{line:3,column:231},end:{line:3,column:239}}}):a)+'"'},9:function(e,t,n,i,r){var a,o=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"data-"+o("function"==typeof(a=null!=(a=l(n,"key")||r&&l(r,"key"))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:r,loc:{start:{line:3,column:275},end:{line:3,column:283}}}):a)+'="'+o(e.lambda(t,t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <input type="password" id="'+e.escapeExpression("function"==typeof(o=null!=(o=s(n,"id")||(null!=t?s(t,"id"):t))?o:e.hooks.helperMissing)?o.call(l,{name:"id",hash:{},data:r,loc:{start:{line:3,column:31},end:{line:3,column:37}}}):o)+'" '+(null!=(a=s(n,"if").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"placeholder"):a,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:39},end:{line:3,column:110}}}))?a:"")+" "+(null!=(a=s(n,"if").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"size"):a,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:111},end:{line:3,column:161}}}))?a:"")+" "+(null!=(a=s(n,"if").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"readonly"):a,{name:"if",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:162},end:{line:3,column:212}}}))?a:"")+" "+(null!=(a=s(n,"if").call(l,null!=t?s(t,"name"):t,{name:"if",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:213},end:{line:3,column:247}}}))?a:"")+" "+(null!=(a=s(n,"each").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"data"):a,{name:"each",hash:{},fn:e.program(9,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:248},end:{line:3,column:303}}}))?a:"")+"/>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-edit"]["control-radio"]=Handlebars.template({1:function(e,t,n,i,r){return""},3:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="radio">\r\n        <label>\r\n            <input type="radio" '+(null!=(a=s(n,"if").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"readonly"):a,{name:"if",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:7,column:32},end:{line:7,column:82}}}))?a:"")+' name="'+e.escapeExpression("function"==typeof(o=null!=(o=s(n,"name")||(null!=t?s(t,"name"):t))?o:e.hooks.helperMissing)?o.call(l,{name:"name",hash:{},data:r,loc:{start:{line:7,column:89},end:{line:7,column:97}}}):o)+'" value=""/>'+(null!=(a=e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"noneLabel"):a,t))?a:"")+"\r\n        </label>\r\n    </div>\r\n"},4:function(e,t,n,i,r){return'readonly="readonly"'},6:function(e,t,n,i,r,a,o){var l,s,u=null!=t?t:e.nullContext||{},c=e.escapeExpression,p=e.hooks.helperMissing,d="function",h=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="radio">\r\n        <label>\r\n            <input type="radio" '+(null!=(l=h(n,"if").call(u,null!=(l=null!=o[1]?h(o[1],"options"):o[1])?h(l,"readonly"):l,{name:"if",hash:{},fn:e.program(4,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:15,column:32},end:{line:15,column:85}}}))?l:"")+' name="'+c(e.lambda(null!=o[1]?h(o[1],"name"):o[1],t))+'" value="'+c(typeof(s=null!=(s=h(n,"value")||(null!=t?h(t,"value"):t))?s:p)==d?s.call(u,{name:"value",hash:{},data:r,loc:{start:{line:15,column:112},end:{line:15,column:121}}}):s)+'" '+(null!=(l=(h(n,"compare")||t&&h(t,"compare")||p).call(u,null!=t?h(t,"value"):t,null!=o[1]?h(o[1],"data"):o[1],{name:"compare",hash:{},fn:e.program(7,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:15,column:123},end:{line:15,column:178}}}))?l:"")+"/>"+(null!=(l=typeof(s=null!=(s=h(n,"text")||(null!=t?h(t,"text"):t))?s:p)==d?s.call(u,{name:"text",hash:{},data:r,loc:{start:{line:15,column:180},end:{line:15,column:190}}}):s)?l:"")+"\r\n        </label>\r\n    </div>\r\n"},7:function(e,t,n,i,r){return'checked="checked"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r,a,o){var l,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n'+(null!=(l=u(n,"if").call(s,null!=(l=null!=t?u(t,"options"):t)?u(l,"hideNone"):l,{name:"if",hash:{},fn:e.program(1,r,0,a,o),inverse:e.program(3,r,0,a,o),data:r,loc:{start:{line:3,column:4},end:{line:10,column:11}}}))?l:"")+"\r\n"+(null!=(l=u(n,"each").call(s,null!=t?u(t,"selectOptions"):t,{name:"each",hash:{},fn:e.program(6,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:12,column:4},end:{line:18,column:13}}}))?l:"")+"\r\n<\/script>"},useData:!0,useDepths:!0}),this.HandlebarsPrecompiled["web-edit"]["control-select"]=Handlebars.template({1:function(e,t,n,i,r){return'readonly="readonly"'},3:function(e,t,n,i,r){return'multiple="multiple"'},5:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'size="'+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"size"):a,t))+'"'},7:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression("function"==typeof(a=null!=(a=o(n,"name")||(null!=t?o(t,"name"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:r,loc:{start:{line:3,column:195},end:{line:3,column:203}}}):a)+'"'},9:function(e,t,n,i,r,a,o){var l,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\r\n"+(null!=(l=u(n,"if").call(s,null!=(l=null!=t?u(t,"options"):t)?u(l,"hideNone"):l,{name:"if",hash:{},fn:e.program(10,r,0,a,o),inverse:e.program(12,r,0,a,o),data:r,loc:{start:{line:7,column:8},end:{line:10,column:15}}}))?l:"")+"\r\n"+(null!=(l=u(n,"each").call(s,null!=t?u(t,"selectOptions"):t,{name:"each",hash:{},fn:e.program(14,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:12,column:8},end:{line:14,column:17}}}))?l:"")+"\r\n"},10:function(e,t,n,i,r){return""},12:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <option value="">'+(null!=(a=e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"noneLabel"):a,t))?a:"")+"</option>\r\n"},14:function(e,t,n,i,r,a,o){var l,s,u=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <option value="'+(null!=(l=typeof(s=null!=(s=d(n,"value")||(null!=t?d(t,"value"):t))?s:c)==p?s.call(u,{name:"value",hash:{},data:r,loc:{start:{line:13,column:23},end:{line:13,column:34}}}):s)?l:"")+'" '+(null!=(l=d(n,"each").call(u,null!=o[1]?d(o[1],"data"):o[1],{name:"each",hash:{},fn:e.program(15,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:13,column:36},end:{line:13,column:123}}}))?l:"")+">"+e.escapeExpression(typeof(s=null!=(s=d(n,"text")||(null!=t?d(t,"text"):t))?s:c)==p?s.call(u,{name:"text",hash:{},data:r,loc:{start:{line:13,column:124},end:{line:13,column:132}}}):s)+"</option>\r\n"},15:function(e,t,n,i,r,a,o){var l,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(l=(s(n,"compare")||t&&s(t,"compare")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?s(t,"value"):t,null!=o[2]?s(o[2],"value"):o[2],{name:"compare",hash:{},fn:e.program(16,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:13,column:53},end:{line:13,column:114}}}))?l:""},16:function(e,t,n,i,r){return'selected="selected"'},18:function(e,t,n,i,r,a,o){var l,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\r\n"+(null!=(l=u(n,"if").call(s,null!=(l=null!=t?u(t,"options"):t)?u(l,"hideNone"):l,{name:"if",hash:{},fn:e.program(10,r,0,a,o),inverse:e.program(12,r,0,a,o),data:r,loc:{start:{line:18,column:8},end:{line:21,column:15}}}))?l:"")+"\r\n"+(null!=(l=u(n,"each").call(s,null!=t?u(t,"selectOptions"):t,{name:"each",hash:{},fn:e.program(19,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:23,column:8},end:{line:25,column:17}}}))?l:"")+"\r\n"},19:function(e,t,n,i,r,a,o){var l,s,u=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,p="function",d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <option value="'+(null!=(l=typeof(s=null!=(s=d(n,"value")||(null!=t?d(t,"value"):t))?s:c)==p?s.call(u,{name:"value",hash:{},data:r,loc:{start:{line:24,column:23},end:{line:24,column:34}}}):s)?l:"")+'" '+(null!=(l=(d(n,"compare")||t&&d(t,"compare")||c).call(u,null!=t?d(t,"value"):t,null!=o[1]?d(o[1],"data"):o[1],{name:"compare",hash:{},fn:e.program(16,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:24,column:36},end:{line:24,column:93}}}))?l:"")+">"+e.escapeExpression(typeof(s=null!=(s=d(n,"text")||(null!=t?d(t,"text"):t))?s:c)==p?s.call(u,{name:"text",hash:{},data:r,loc:{start:{line:24,column:94},end:{line:24,column:102}}}):s)+"</option>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r,a,o){var l,s,u=null!=t?t:e.nullContext||{},c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <select id="'+e.escapeExpression("function"==typeof(s=null!=(s=c(n,"id")||(null!=t?c(t,"id"):t))?s:e.hooks.helperMissing)?s.call(u,{name:"id",hash:{},data:r,loc:{start:{line:3,column:16},end:{line:3,column:22}}}):s)+'" '+(null!=(l=c(n,"if").call(u,null!=(l=null!=t?c(t,"options"):t)?c(l,"readonly"):l,{name:"if",hash:{},fn:e.program(1,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:3,column:24},end:{line:3,column:74}}}))?l:"")+" "+(null!=(l=c(n,"if").call(u,null!=(l=null!=t?c(t,"options"):t)?c(l,"multiple"):l,{name:"if",hash:{},fn:e.program(3,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:3,column:75},end:{line:3,column:125}}}))?l:"")+" "+(null!=(l=c(n,"if").call(u,null!=(l=null!=t?c(t,"options"):t)?c(l,"size"):l,{name:"if",hash:{},fn:e.program(5,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:3,column:126},end:{line:3,column:176}}}))?l:"")+" "+(null!=(l=c(n,"if").call(u,null!=t?c(t,"name"):t,{name:"if",hash:{},fn:e.program(7,r,0,a,o),inverse:e.noop,data:r,loc:{start:{line:3,column:177},end:{line:3,column:211}}}))?l:"")+">\r\n\r\n"+(null!=(l=c(n,"if").call(u,null!=(l=null!=t?c(t,"options"):t)?c(l,"multiple"):l,{name:"if",hash:{},fn:e.program(9,r,0,a,o),inverse:e.program(18,r,0,a,o),data:r,loc:{start:{line:5,column:4},end:{line:27,column:11}}}))?l:"")+"\r\n    </select>\r\n\r\n<\/script>"},useData:!0,useDepths:!0}),this.HandlebarsPrecompiled["web-edit"]["control-text"]=Handlebars.template({1:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"placeholder"):a,t))+'"'},3:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'size="'+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"size"):a,t))+'"'},5:function(e,t,n,i,r){return'readonly="readonly"'},7:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression("function"==typeof(a=null!=(a=o(n,"name")||(null!=t?o(t,"name"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:r,loc:{start:{line:3,column:236},end:{line:3,column:244}}}):a)+'"'},9:function(e,t,n,i,r){var a,o=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"data-"+o("function"==typeof(a=null!=(a=l(n,"key")||r&&l(r,"key"))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:r,loc:{start:{line:3,column:280},end:{line:3,column:288}}}):a)+'="'+o(e.lambda(t,t))+'"'},11:function(e,t,n,i,r){var a,o=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o("function"==typeof(a=null!=(a=l(n,"key")||r&&l(r,"key"))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:r,loc:{start:{line:3,column:337},end:{line:3,column:345}}}):a)+'="'+o(e.lambda(t,t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <input type="'+c(typeof(o=null!=(o=p(n,"inputType")||(null!=t?p(t,"inputType"):t))?o:s)==u?o.call(l,{name:"inputType",hash:{},data:r,loc:{start:{line:3,column:17},end:{line:3,column:30}}}):o)+'" id="'+c(typeof(o=null!=(o=p(n,"id")||(null!=t?p(t,"id"):t))?o:s)==u?o.call(l,{name:"id",hash:{},data:r,loc:{start:{line:3,column:36},end:{line:3,column:42}}}):o)+'" '+(null!=(a=p(n,"if").call(l,null!=(a=null!=t?p(t,"options"):t)?p(a,"placeholder"):a,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:44},end:{line:3,column:115}}}))?a:"")+" "+(null!=(a=p(n,"if").call(l,null!=(a=null!=t?p(t,"options"):t)?p(a,"size"):a,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:116},end:{line:3,column:166}}}))?a:"")+" "+(null!=(a=p(n,"if").call(l,null!=(a=null!=t?p(t,"options"):t)?p(a,"readonly"):a,{name:"if",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:167},end:{line:3,column:217}}}))?a:"")+" "+(null!=(a=p(n,"if").call(l,null!=t?p(t,"name"):t,{name:"if",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:218},end:{line:3,column:252}}}))?a:"")+" "+(null!=(a=p(n,"each").call(l,null!=(a=null!=t?p(t,"options"):t)?p(a,"data"):a,{name:"each",hash:{},fn:e.program(9,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:253},end:{line:3,column:308}}}))?a:"")+" "+(null!=(a=p(n,"each").call(l,null!=(a=null!=t?p(t,"options"):t)?p(a,"attributes"):a,{name:"each",hash:{},fn:e.program(11,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:309},end:{line:3,column:365}}}))?a:"")+"/>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-edit"]["control-textarea"]=Handlebars.template({1:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"placeholder"):a,t))+'"'},3:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'rows="'+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"rows"):a,t))+'"'},5:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'cols="'+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"cols"):a,t))+'"'},7:function(e,t,n,i,r){return'readonly="readonly"'},9:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression("function"==typeof(a=null!=(a=o(n,"name")||(null!=t?o(t,"name"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:r,loc:{start:{line:3,column:269},end:{line:3,column:277}}}):a)+'"'},11:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"data-"+e.escapeExpression(typeof(o=null!=(o=c(n,"fieldId")||(null!=t?c(t,"fieldId"):t))?o:s)==u?o.call(l,{name:"fieldId",hash:{},data:r,loc:{start:{line:3,column:313},end:{line:3,column:324}}}):o)+'="'+(null!=(a=typeof(o=null!=(o=c(n,"value")||(null!=t?c(t,"value"):t))?o:s)==u?o.call(l,{name:"value",hash:{},data:r,loc:{start:{line:3,column:326},end:{line:3,column:337}}}):o)?a:"")+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <textarea id="'+e.escapeExpression("function"==typeof(o=null!=(o=s(n,"id")||(null!=t?s(t,"id"):t))?o:e.hooks.helperMissing)?o.call(l,{name:"id",hash:{},data:r,loc:{start:{line:3,column:18},end:{line:3,column:24}}}):o)+'" '+(null!=(a=s(n,"if").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"placeholder"):a,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:26},end:{line:3,column:97}}}))?a:"")+" "+(null!=(a=s(n,"if").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"rows"):a,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:98},end:{line:3,column:148}}}))?a:"")+" "+(null!=(a=s(n,"if").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"cols"):a,{name:"if",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:149},end:{line:3,column:199}}}))?a:"")+" "+(null!=(a=s(n,"if").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"readonly"):a,{name:"if",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:200},end:{line:3,column:250}}}))?a:"")+" "+(null!=(a=s(n,"if").call(l,null!=t?s(t,"name"):t,{name:"if",hash:{},fn:e.program(9,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:251},end:{line:3,column:285}}}))?a:"")+" "+(null!=(a=s(n,"each").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"data"):a,{name:"each",hash:{},fn:e.program(11,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:286},end:{line:3,column:347}}}))?a:"")+"/>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-edit"].control=Handlebars.template({1:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <label class="'+(null!=(a=s(n,"if").call(l,null!=(a=null!=t?s(t,"options"):t)?s(a,"labelClass"):a,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:6,column:22},end:{line:6,column:77}}}))?a:"")+' alpaca-control-label" for="'+e.escapeExpression("function"==typeof(o=null!=(o=s(n,"id")||(null!=t?s(t,"id"):t))?o:e.hooks.helperMissing)?o.call(l,{name:"id",hash:{},data:r,loc:{start:{line:6,column:105},end:{line:6,column:111}}}):o)+'">'+(null!=(a=e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"label"):a,t))?a:"")+"</label>\r\n"},2:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"labelClass"):a,t))},4:function(e,t,n,i,r){return""},6:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=o(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"helpers"):a,{name:"each",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:12,column:8},end:{line:17,column:17}}}))?a:""},7:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <p class="'+(null!=(a=o(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"helperClass"):a,{name:"if",hash:{},fn:e.program(8,r,0),inverse:e.noop,data:r,loc:{start:{line:13,column:18},end:{line:13,column:75}}}))?a:"")+'">\r\n            <i class="info-sign"></i>\r\n            '+(null!=(a=e.lambda(t,t))?a:"")+"\r\n        </p>\r\n"},8:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"helperClass"):a,t))},10:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=o(n,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"buttons"):a,{name:"if",hash:{},fn:e.program(11,r,0),inverse:e.noop,data:r,loc:{start:{line:21,column:12},end:{line:27,column:19}}}))?a:""},11:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="alpaca-control-buttons-container">\r\n'+(null!=(a=o(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"buttons"):a,{name:"each",hash:{},fn:e.program(12,r,0),inverse:e.noop,data:r,loc:{start:{line:23,column:16},end:{line:25,column:25}}}))?a:"")+"            </div>\r\n"},12:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <button data-key="'+c(typeof(o=null!=(o=p(n,"key")||r&&p(r,"key"))?o:s)==u?o.call(l,{name:"key",hash:{},data:r,loc:{start:{line:24,column:34},end:{line:24,column:42}}}):o)+'" type="'+c(typeof(o=null!=(o=p(n,"type")||(null!=t?p(t,"type"):t))?o:s)==u?o.call(l,{name:"type",hash:{},data:r,loc:{start:{line:24,column:50},end:{line:24,column:58}}}):o)+'" class="alpaca-control-button alpaca-control-button-'+c(typeof(o=null!=(o=p(n,"key")||r&&p(r,"key"))?o:s)==u?o.call(l,{name:"key",hash:{},data:r,loc:{start:{line:24,column:111},end:{line:24,column:119}}}):o)+" "+c(typeof(o=null!=(o=p(n,"styles")||(null!=t?p(t,"styles"):t))?o:s)==u?o.call(l,{name:"styles",hash:{},data:r,loc:{start:{line:24,column:120},end:{line:24,column:130}}}):o)+'" '+(null!=(a=p(n,"each").call(l,null!=t?p(t,"value"):t,{name:"each",hash:{},fn:e.program(13,r,0),inverse:e.noop,data:r,loc:{start:{line:24,column:132},end:{line:24,column:177}}}))?a:"")+">"+(null!=(a=typeof(o=null!=(o=p(n,"value")||(null!=t?p(t,"value"):t))?o:s)==u?o.call(l,{name:"value",hash:{},data:r,loc:{start:{line:24,column:178},end:{line:24,column:189}}}):o)?a:"")+"</button>\r\n"},13:function(e,t,n,i,r){var a,o=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return u(typeof(a=null!=(a=c(n,"key")||r&&c(r,"key"))?a:l)==s?a.call(o,{name:"key",hash:{},data:r,loc:{start:{line:24,column:147},end:{line:24,column:155}}}):a)+'="'+u(typeof(a=null!=(a=c(n,"value")||(null!=t?c(t,"value"):t))?a:l)==s?a.call(o,{name:"value",hash:{},data:r,loc:{start:{line:24,column:157},end:{line:24,column:166}}}):a)+'" '},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},c='<script type="text/x-handlebars-template">\r\n\r\n    <div>\r\n\r\n'+(null!=(a=u(n,"if").call(s,null!=(a=null!=t?u(t,"options"):t)?u(a,"label"):a,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:5,column:8},end:{line:7,column:15}}}))?a:"")+"\r\n        ";return o=null!=(o=u(n,"control")||(null!=t?u(t,"control"):t))?o:e.hooks.helperMissing,l={name:"control",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:9,column:8},end:{line:9,column:32}}},a="function"==typeof o?o.call(s,l):o,u(n,"control")||(a=e.hooks.blockHelperMissing.call(t,a,l)),null!=a&&(c+=a),c+"\r\n\r\n"+(null!=(a=u(n,"if").call(s,null!=(a=null!=t?u(t,"options"):t)?u(a,"helpers"):a,{name:"if",hash:{},fn:e.program(6,r,0),inverse:e.noop,data:r,loc:{start:{line:11,column:8},end:{line:18,column:15}}}))?a:"")+"\r\n"+(null!=(a=u(n,"if").call(s,null!=(a=null!=t?u(t,"options"):t)?u(a,"renderButtons"):a,{name:"if",hash:{},fn:e.program(10,r,0),inverse:e.noop,data:r,loc:{start:{line:20,column:8},end:{line:28,column:15}}}))?a:"")+"\r\n    </div>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-edit"].form=Handlebars.template({1:function(e,t,n,i,r){return""},3:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=o(n,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"buttons"):a,{name:"each",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:9,column:16},end:{line:11,column:25}}}))?a:""},4:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.escapeExpression,p=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                    <button data-key="'+c(typeof(o=null!=(o=p(n,"key")||r&&p(r,"key"))?o:s)==u?o.call(l,{name:"key",hash:{},data:r,loc:{start:{line:10,column:38},end:{line:10,column:46}}}):o)+'" type="'+c(typeof(o=null!=(o=p(n,"type")||(null!=t?p(t,"type"):t))?o:s)==u?o.call(l,{name:"type",hash:{},data:r,loc:{start:{line:10,column:54},end:{line:10,column:62}}}):o)+'" '+(null!=(a=p(n,"if").call(l,null!=t?p(t,"id"):t,{name:"if",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r,loc:{start:{line:10,column:64},end:{line:10,column:92}}}))?a:"")+' class="alpaca-form-button alpaca-form-button-'+c(typeof(o=null!=(o=p(n,"key")||r&&p(r,"key"))?o:s)==u?o.call(l,{name:"key",hash:{},data:r,loc:{start:{line:10,column:138},end:{line:10,column:146}}}):o)+" "+c(typeof(o=null!=(o=p(n,"styles")||(null!=t?p(t,"styles"):t))?o:s)==u?o.call(l,{name:"styles",hash:{},data:r,loc:{start:{line:10,column:147},end:{line:10,column:157}}}):o)+'" '+(null!=(a=p(n,"each").call(l,null!=t?p(t,"value"):t,{name:"each",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r,loc:{start:{line:10,column:159},end:{line:10,column:202}}}))?a:"")+" "+(null!=(a=p(n,"each").call(l,null!=t?p(t,"attributes"):t,{name:"each",hash:{},fn:e.program(9,r,0),inverse:e.noop,data:r,loc:{start:{line:10,column:203},end:{line:10,column:252}}}))?a:"")+">"+(null!=(a=typeof(o=null!=(o=p(n,"value")||(null!=t?p(t,"value"):t))?o:s)==u?o.call(l,{name:"value",hash:{},data:r,loc:{start:{line:10,column:253},end:{line:10,column:264}}}):o)?a:"")+"</button>\r\n"},5:function(e,t,n,i,r){var a,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'id="'+e.escapeExpression("function"==typeof(a=null!=(a=o(n,"id")||(null!=t?o(t,"id"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:r,loc:{start:{line:10,column:78},end:{line:10,column:84}}}):a)+'"'},7:function(e,t,n,i,r){var a,o=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return o("function"==typeof(a=null!=(a=l(n,"key")||r&&l(r,"key"))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:r,loc:{start:{line:10,column:174},end:{line:10,column:182}}}):a)+'="'+o(e.lambda(t,t))+'"'},9:function(e,t,n,i,r){var a,o=e.escapeExpression,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" "+o("function"==typeof(a=null!=(a=l(n,"key")||r&&l(r,"key"))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"key",hash:{},data:r,loc:{start:{line:10,column:224},end:{line:10,column:232}}}):a)+'="'+o(e.lambda(t,t))+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},c='<script type="text/x-handlebars-template">\r\n\r\n    <form role="form">\r\n\r\n        ';return o=null!=(o=u(n,"formItems")||(null!=t?u(t,"formItems"):t))?o:e.hooks.helperMissing,l={name:"formItems",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:5,column:8},end:{line:5,column:36}}},a="function"==typeof o?o.call(s,l):o,u(n,"formItems")||(a=e.hooks.blockHelperMissing.call(t,a,l)),null!=a&&(c+=a),c+'\r\n\r\n        <div class="alpaca-form-buttons-container">\r\n'+(null!=(a=u(n,"if").call(s,null!=(a=null!=t?u(t,"options"):t)?u(a,"buttons"):a,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r,loc:{start:{line:8,column:12},end:{line:12,column:19}}}))?a:"")+"        </div>\r\n\r\n    </form>\r\n\r\n<\/script>"},useData:!0}),this.HandlebarsPrecompiled["web-edit"].message=Handlebars.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<script type="text/x-handlebars-template">\r\n\r\n    <div class="alpaca-message alpaca-message-'+(null!=(a=typeof(o=null!=(o=c(n,"id")||(null!=t?c(t,"id"):t))?o:s)==u?o.call(l,{name:"id",hash:{},data:r,loc:{start:{line:3,column:46},end:{line:3,column:54}}}):o)?a:"")+'">\r\n        '+(null!=(a=typeof(o=null!=(o=c(n,"message")||(null!=t?c(t,"message"):t))?o:s)==u?o.call(l,{name:"message",hash:{},data:r,loc:{start:{line:4,column:8},end:{line:4,column:21}}}):o)?a:"")+"\r\n    </div>\r\n\r\n<\/script>"},useData:!0}),function(e){"use strict";e.Base=function(){"use strict";var l="function",e="object",t="string",s=false,u=["constructor","toString","valueOf"],c=u.length,p=/\bbase\b/,n,d={toSource:null,base:function(){}},h=function(){};return h.extend=function(e,t){var n=h.prototype.extend;s=!0;var i=new this;n.call(i,e),i.base=d.base,s=!1;var r=i.constructor,a=i.constructor=function(){s||(this&&(this._constructing||this.constructor===a)?(this._constructing=!0,r.apply(this,arguments),this._constructing=!1):arguments.length&&h.cast.apply(a,arguments))};return n.call(a,this),a.ancestor=this,a.prototype=i,a.valueOf=function(e){return"object"===e?a:r.valueOf()},n.call(a,t),typeof a.init==l&&a.init(),a},h.prototype.extend=function(e,t){if("string"==typeof e&&1<arguments.length){var n=this[e];if(n&&typeof t==l&&(!n.valueOf||n.valueOf()!==t.valueOf())&&p.test(t)){var i=t.valueOf();(t=function(){var e,t=this.base||d.base;return this.base=n,e=0===arguments.length?i.call(this):i.apply(this,arguments),this.base=t,e}).valueOf=function(e){return"object"===e?t:i},t.toString=h.toString}this[e]=t}else if(e){var r=h.prototype.extend;s||typeof this==l||(r=this.extend||r);for(var a,o=s?0:1;o<c;o++)e[a=u[o]]!==d[a]&&r.call(this,a,e[a]);for(a in e)d[a]||r.call(this,a,e[a])}return this},h=h.extend({base:d.base},{ancestor:Object,version:"1.1",cast:function(){for(var e,t,n=0,i=arguments.length;n<i;n++)e=(t=arguments[n]).extend||h.prototype.extend,typeof t==l?((e=t.prototype.extend||h.prototype.extend).call(t.prototype,this.prototype),e.call(t,this),t.ancestor=this):e.call(t,this.prototype);return this},implement:function(){for(var e=0;e<arguments.length;e++)this.cast.call(arguments[e],this);return this},toString:function(){return this.valueOf()+""}})}()}(this),function(F){"use strict";var T=function(){var e=T.makeArray(arguments);if(0===e.length)return T.throwDefaultError("You must supply at least one argument.  This argument can either be a DOM element against which Alpaca will generate a form or it can be a function name.  See http://www.alpacajs.org for more details.");var o=e[0];o&&T.isString(o)&&(o=F("#"+o));var r=null,a=null,l=null,s=null,u=null,t=null,c=null,p=null,n=!1,d={},i=null,h=null,f=null,m=null,y=1<e.length&&T.isString(e[1])&&-1<["get","exists","destroy"].indexOf(e[1]),g=function(){var e=null,t=F(o).find(":first");if(0<t.length){var n=F(t[0]).attr("data-alpaca-field-id");if(n)(r=T.fieldInstances[n])&&(e=r);else if(F(t[0]).attr("data-alpaca-form-id")){var i=F(t[0]).find(":first");if(0<i.length){var r,a=F(i[0]).attr("data-alpaca-field-id");if(a)(r=T.fieldInstances[a])&&(e=r)}}}return e}();if(g||y){if(y){var v=e[1];return"get"===v?g:"exists"===v?!!g:"destroy"===v?void(g&&g.destroy()):T.throwDefaultError("Unknown special function: "+v)}return g}var b=null;if(1===e.length){var O=F(o).text();b=JSON.parse(O),F(o).html("")}else b=T.isObject(e[1])?e[1]:T.isFunction(e[1])?e[1]():{data:e[1]};if(!b)return T.throwDefaultError("Unable to determine Alpaca configuration");r=b.data,a=b.schema,l=b.options,s=b.view,u=b.render,b.callback&&(u=b.callback),t=b.postRender,c=b.error,p=b.connector,i=b.dataSource,h=b.schemaSource,f=b.optionsSource,m=b.viewSource,b.ui&&(d.ui=b.ui),b.type&&(d.type=b.type),T.isEmpty(b.notTopLevel)||(n=b.notTopLevel),T.isEmpty(c)&&(c=T.defaultErrorCallback);var w="default",E={};T.isString(p)?w=p:T.isObject(p)&&p.id&&(w=p.id,p.config&&(E=p.config));var x=T.getConnectorClass(w),C=p=new x(w,E);n&&(C=new(T.getConnectorClass("default"))("default"));l=l||{};function P(e){e.parent||(e.hideInitValidationError||e.refreshValidationState(!0),"view"!==e.view.type&&T.fieldApplyFieldAndChildren(e,function(e){e.hideInitValidationError=!1}))}function k(n){n.parent||(n.observableScope=T.generateId()),T.isUndefined(l.focus)&&!n.parent&&(l.focus=T.defaultFocus),l&&l.focus?window.setTimeout(function(){function e(e){e.suspendBlurFocus=!0,e.focus(),e.suspendBlurFocus=!1}if(l.focus){if(n.isControlField&&n.isAutoFocusable())e(n);else if(n.isContainerField)if(!0===l.focus)n.children&&0<n.children.length&&e(n);else if("string"==typeof l.focus){var t=n.getControlByPath(l.focus);t&&t.isControlField&&t.isAutoFocusable()&&e(t)}P(n)}},500):P(n),"function"==typeof t&&t(n)}C.loadAll({data:r,schema:a,options:l,view:s,dataSource:i,schemaSource:h,optionsSource:f,viewSource:m},function(e,t,n,i){return e=e||r,n=n||a,t=t||l,i=i||s,T.isEmpty(e)&&T.isEmpty(n)&&(T.isEmpty(t)||T.isEmpty(t.type))&&(e="",T.isEmpty(t)?t="text":l&&T.isObject(l)&&(t.type="text")),t.view&&(i=t.view),T.init(o,e,t,n,i,d,u,k,p,c)},function(e){return c(e),null})};T.Fields={},T.Connectors={},T.Extend=F.extend,T.Create=function(){var e=Array.prototype.slice.call(arguments);return e.unshift({}),F.extend.apply(this,e)},T.Extend(T,{makeArray:function(e){return Array.prototype.slice.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isString:function(e){return"string"==typeof e},isObject:function(e){return!T.isUndefined(e)&&"[object Object]"===Object.prototype.toString.call(e)},isPlainObject:function(e){return F.isPlainObject(e)},isNumber:function(e){return"number"==typeof e},isArray:function(e){return e instanceof Array},isBoolean:function(e){return"boolean"==typeof e},isUndefined:function(e){return void 0===e},trim:function(e){var t=e;return t&&T.isString(t)&&(t=t.replace(/^\s+|\s+$/g,"")),t},safeDomParse:function(t){if(t&&T.isString(t)){t=T.trim(t);var n=null;try{n=F(t)}catch(e){n=F(t="<div>"+t+"</div>").children()}return n}return t},isEmpty:function(e,t){if(T.isUndefined(e))return!0;if(null===e)return!0;if(e&&T.isObject(e)&&0===this.countProperties(e,t))return!0;return!1},countProperties:function(e,t){var n=0;if(e&&T.isObject(e))for(var i in e)e.hasOwnProperty(i)&&(t||"function"!=typeof e[i])&&n++;return n},copyOf:function(e){var t=e;if(T.isArray(e)){t=[];for(var n=0;n<e.length;n++)t.push(T.copyOf(e[n]))}else if(T.isObject(e)){if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(e.nodeType&&"cloneNode"in e)t=e.cloneNode(!0);else if(F.isPlainObject(e))for(var i in t={},e)e.hasOwnProperty(i)&&(t[i]=T.copyOf(e[i]))}return t},cloneObject:function(e){return T.copyOf(e)},spliceIn:function(e,t,n){return e.substring(0,t)+n+e.substring(t,e.length)},compactArray:function(e){var t,n=[],i=e.length;for(t=0;t<i;t++)lang.isNull(e[t])||lang.isUndefined(e[t])||n.push(e[t]);return n},removeAccents:function(e){return e.replace(/[àáâãäå]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/[ýÿ]/g,"y").replace(/[ñ]/g,"n").replace(/[ç]/g,"c").replace(/[œ]/g,"oe").replace(/[æ]/g,"ae")},indexOf:function(e,t,n){var i,r=t.length;for(T.isFunction(n)||(n=function(e,t){return e===t}),i=0;i<r;i++)if(n.call({},e,t[i]))return i;return-1},uniqueIdCounter:0,defaultLocale:"en_US",defaultFocus:!0,setDefaultLocale:function(e){this.defaultLocale=e},defaultSchemaFieldMapping:{},registerDefaultSchemaFieldMapping:function(e,t){e&&t&&(this.defaultSchemaFieldMapping[e]=t)},defaultFormatFieldMapping:{},registerDefaultFormatFieldMapping:function(e,t){e&&t&&(this.defaultFormatFieldMapping[e]=t)},getSchemaType:function(e){var t=null;return T.isEmpty(e)?t="string":T.isArray(e)?t="array":T.isObject(e)?t="object":T.isString(e)?t="string":T.isNumber(e)?t="number":T.isBoolean(e)&&(t="boolean"),t||"object"!=typeof e||(t="object"),t},guessOptionsType:function(e){var t=null;return t=e&&void 0!==e.enum?3<e.enum.length?"select":"radio":T.defaultSchemaFieldMapping[e.type],e.format&&T.defaultFormatFieldMapping[e.format]&&(t=T.defaultFormatFieldMapping[e.format]),t},views:{},generateViewId:function(){return"view-"+this.generateId()},registerView:function(e){var t=e.id;if(!t)return T.throwDefaultError("Cannot register view with missing view id: "+t);var n=this.views[t];if(n)T.mergeObject(n,e);else{(this.views[t]=e).templates||(e.templates={});for(var i=T.TemplateEngineRegistry.ids(),r=0;r<i.length;r++){var a=i[r],o=T.TemplateEngineRegistry.find(a);if(o)for(var l=o.findCacheKeys(t),s=0;s<l.length;s++){var u=T.splitCacheKey(l[s]);e.templates[u.templateId]={type:a,template:!0,cacheKey:l[s]}}}}},getNormalizedView:function(e){return this.normalizedViews[e]},lookupNormalizedView:function(e,t){var n=null;for(var i in this.normalizedViews){var r=this.normalizedViews[i];if(r.ui===e&&r.type===t){n=i;break}}return n},registerTemplate:function(e,t,n){n=n||"base",this.views[n]||(this.views[n]={},this.views[n].id=n),this.views[n].templates||(this.views[n].templates={}),this.views[n].templates[e]=t},registerTemplates:function(e,t){for(var n in e)this.registerTemplate(n,e[n],t)},registerMessage:function(e,t,n){n=n||"base",this.views[n]||(this.views[n]={},this.views[n].id=n),this.views[n].messages||(this.views[n].messages={}),this.views[n].messages[e]=t},registerMessages:function(e,t){for(var n in e)e.hasOwnProperty(n)&&this.registerMessage(n,e[n],t)},defaultDateFormat:"MM/DD/YYYY",defaultTimeFormat:"HH:SS",regexps:{date:/^((\d{2})\D?(\d{2})\D?(\d{4}))?$/,phone:/^(\D?(\d{3})\D?\D?(\d{3})\D?(\d{4}))?$/,zipcode:/^((\d{5})\D?(\d{4})?)?$/,email:/^[a-z0-9!\#\$%&'\*\-\/=\?\+\-\^_`\{\|\}~]+(?:\.[a-z0-9!\#\$%&'\*\-\/=\?\+\-\^_`\{\|\}~]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,6}$/i,url:/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(\:[0-9]{1,5})?(\/.*)?$/i,"intranet-url":/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*(\:[0-9]{1,5})?(\/.*)?$/i,password:/^[0-9a-zA-Z\x20-\x7E]*$/,integer:/^([\+\-]?([1-9]\d*)|0)$/,number:/^([\+\-]?((([0-9]+(\.)?)|([0-9]*\.[0-9]+))([eE][+-]?[0-9]+)?))$/,ipv4:/^(?:1\d?\d?|2(?:[0-4]\d?|[6789]|5[0-5]?)?|[3-9]\d?|0)(?:\.(?:1\d?\d?|2(?:[0-4]\d?|[6789]|5[0-5]?)?|[3-9]\d?|0)){3}$/,whitespace:/^\s+$/},fieldInstances:{},fieldClassRegistry:{},registerFieldClass:function(e,t){this.fieldClassRegistry[e]=t},getFieldClass:function(e){return this.fieldClassRegistry[e]},getFieldClassType:function(e){for(var t in this.fieldClassRegistry)if(this.fieldClassRegistry.hasOwnProperty(t)&&this.fieldClassRegistry[t]===e)return t;return null},connectorClassRegistry:{},registerConnectorClass:function(e,t){this.connectorClassRegistry[e]=t},getConnectorClass:function(e){return this.connectorClassRegistry[e]},replaceAll:function(e,t,n){return e.replace(new RegExp(t,"g"),n)},element:function(e,t,n,i){var r=F("<"+e+"/>");if(t&&r.attr(t),n&&r.css(n),i)for(var a in i)r.addClass(a)},elementFromTemplate:function(e,t){var n=e;if(t)for(var i in t)n=T.replaceAll(n,"${"+i+"}",t[i]);return F(n)},generateId:function(){return T.uniqueIdCounter++,"alpaca"+T.uniqueIdCounter},later:function(e,t,n,i,r){e=e||0,t=t||{};var a,o,l=n,s=F.makeArray(i);if("string"==typeof n&&(l=t[n]),!l)throw{name:"TypeError",message:"The function is undefined."};return a=function(){l.apply(t,s)},{id:o=(r?setInterval:setTimeout)(a,e),interval:r,cancel:function(){(this.interval?clearInterval:clearTimeout)(o)}}},endsWith:function(e,t){return-1!==e.indexOf(t,e.length-t.length)},startsWith:function(e,t){return e.substr(0,t.length)===t},isUri:function(e){return T.isString(e)&&(T.startsWith(e,"http://")||T.startsWith(e,"https://")||T.startsWith(e,"/")||T.startsWith(e,"./")||T.startsWith(e,"../"))},traverseObject:function(e,t,n){T.isString(t)&&(t=t.split("."));for(var i=null,r=e,a=null;a=t.shift(),n&&a===n&&(a=t.shift()),T.isEmpty(r[a])?t=[]:(r=r[a],0===t.length&&(i=r)),0<t.length;);return i},each:function(e,t){if(T.isArray(e))for(var n=0;n<e.length;n++)t.apply(e[n]);else if(T.isObject(e))for(var i in e)t.apply(e[i])},merge:function(e,t,n){for(var i in e=e||{},t){var r=!0;n&&(r=n(i)),r&&(!T.isEmpty(t[i])&&T.isObject(t[i])?(e[i]||(e[i]={}),e[i]=T.merge(e[i],t[i])):e[i]=t[i])}return e},mergeObject:function(e,t){return e=e||{},t=t||{},this.mergeObject2(t,e),e},mergeObject2:function(e,t){var i=T.isArray,r=T.isObject,a=T.isUndefined,o=T.copyOf,l=function(t,n){return i(t)?i(n)&&F.each(t,function(e){n.push(o(t[e]))}):r(t)?r(n)&&F.each(t,function(e){a(n[e])?n[e]=o(t[e]):n[e]=l(t[e],n[e])}):n=o(t),n};return l(e,t),t},substituteTokens:function(e,t){if(!T.isEmpty(e))for(var n=0;n<t.length;n++){var i="{"+n+"}",r=e.indexOf(i);if(-1<r)e=e.substring(0,r)+t[n]+e.substring(r+3)}return e},compareObject:function(e,t){return equiv(e,t)},compareArrayContent:function(e,t){var n=e&&t&&e.length===t.length;if(n)for(var i=e.length-1;0<=i;i--){var r=e[i];if(F.inArray(r,t)<0)return!1}return n},testRegex:function(e,t){return new RegExp(e).test(t)},isValEmpty:function(e,t){var n=!1;return T.isEmpty(e,t)?n=!0:(T.isString(e)&&""===e&&(n=!0),T.isObject(e)&&F.isEmptyObject(e)&&(n=!0),T.isArray(e)&&0===e.length&&(n=!0),T.isNumber(e)&&isNaN(e)&&(n=!0)),n},init:function(l,s,u,c,p,d,h,f,m,y){var g=this;T.isObject(p)&&(p.id||(p.id=this.generateViewId()),p.parent||(p.parent="bootstrap-edit"),this.registerView(p),p=p.id);this.compile(function(e){if(e.errors&&0<e.errors.length){for(var t=[],n=0;n<e.errors.length;n++){var i=e.errors[n].view,r=e.errors[n].cacheKey,a=e.errors[n].err,o="The template with cache key: "+r+" for view: "+i+" failed to compile";a&&a.message&&(o+=", message: "+a.message,t.push(a.message)),a&&(o+=", err: "+JSON.stringify(a)),T.logError(o),delete g.normalizedViews[i],delete g.views[i]}return T.throwErrorWithCallback("View compilation failed, cannot initialize Alpaca. "+t.join(", "),y)}g._init(l,s,u,c,p,d,h,f,m,y)},y)},_init:function(e,t,n,i,r,a,o,l,s,u){var c=this,p=T.defaultView||null,d=null;if(F.mobile&&!p&&(p="jquerymobile"),"function"!=typeof F.fn.modal||p||(p="bootstrap"),void 0!==F.ui&&!p&&(p="jqueryui"),p&&(d="edit"),!r){var h=a.ui,f=a.type;h||(p=p||T.defaultUI)&&(h=p),h&&(f=f||(d||"edit"),T.logDebug("No view provided but found request for UI: "+h+" and type: "+f),(r=this.lookupNormalizedView(h,f))?T.logDebug("Found view: "+r):T.logDebug("No view found for UI: "+h+" and type: "+f))}if(!r)return T.throwErrorWithCallback("A view was not specified and could not be automatically determined.",u);if(T.isString(r)&&!this.normalizedViews[r])return T.throwErrorWithCallback("The desired view: "+r+" could not be loaded.  Please make sure it is loaded and not misspelled.",u);var m=T.createFieldInstance(e,t,n,i,r,s,u);if(m){F(e).addClass("alpaca-field-rendering"),F(e).addClass("alpaca-hidden"),(T.fieldInstances[m.getId()]=m).allFieldInstances=function(){return T.fieldInstances},T.isEmpty(o)&&(o=m.view.render),T.isEmpty(l)&&(l=m.view.postRender);var y=function(){m.parent||m.getFieldEl().addClass("alpaca-"+c.getNormalizedView(r).type),m.parent||m.getFieldEl().addClass("alpaca-top"),F(e).removeClass("alpaca-field-rendering"),F(e).removeClass("alpaca-hidden"),m._oldFieldEl&&F(m._oldFieldEl).remove(),l(m)};T.isEmpty(o)?m.render(function(){y()}):o(m,function(){y()}),m.callback=o,m.renderedCallback=l}},createFieldInstance:function(e,t,n,i,r,a,o){if(T.isValEmpty(n,!0)&&(n={}),T.isValEmpty(i,!0)&&(i={}),n&&T.isString(n)){var l=n;(n={}).type=l}n.type||(i.type||(i.type=T.getSchemaType(t)),i.type||(t&&T.isArray(t)?i.type="array":i.type="object"),n.type=T.guessOptionsType(i));var s=T.getFieldClass(n.type);return s?new s(e,t,n,i,r,a,o):(o({message:"Unable to find field class for type: "+n.type,reason:"FIELD_INSTANTIATION_ERROR"}),null)},parseJSON:function(e){return e?F.parseJSON(e):null},compile:function(n,r){function o(e){if(0===l.errors.length)for(var t in e)a.normalizedViews[t]=e[t];n(l)}function m(e,t,n,i,r){var a=n.id;l.count++,t?l.errors.push({view:a,cacheKey:i,err:t}):l.successCount++,l.count==r&&o(e)}function u(t,n,e,i,r,a,o){var l=T.makeCacheKey(n.id,e,i,r),s="text/x-handlebars-template";if(a&&T.isObject(a)&&(s=a.type,a.cacheKey&&(l=a.cacheKey),a=a.template),a&&"string"==typeof a){var u=a.toLowerCase();if(!T.isUri(u))if(!a||0!==a.indexOf("#")&&0!==a.indexOf(".")){if(a){var c=n.templates[a];c&&(a=c)}}else{var p=F(a);s=F(p).attr("type"),a=F(p).html()}}if(s){var d=T.TemplateEngineRegistry.find(s);if(d){if(!0===a){if(d.isCached(l))return void m(t,null,n,l,o);var h="View configuration for view: "+n.id+" claims to have precompiled template for cacheKey: "+l+" but it could not be found";return T.logError(h),void m(t,new Error(h),n,l,o)}d.isCached(l)?m(t,null,n,l,o):d.compile(l,a,function(e){m(t,e,n,l,o)})}else{T.logError("Cannot find template engine for type: "+type);f=new Error("Cannot find template engine for type: "+type);m(t,f,n,l,o)}}else{T.logError("Engine type was empty");var f=new Error("Engine type was empty");m(t,f,n,l,o)}}var a=this,l={errors:[],count:0,successCount:0};!function(){var e={},t=0;for(var n in T.normalizedViews||(T.normalizedViews={}),a.normalizedViews=T.normalizedViews,a.views)if(!T.normalizedViews[n]){var i=new T.NormalizedView(n);if(!i.normalize(a.views))return T.throwErrorWithCallback("View normalization failed, cannot initialize Alpaca.  Please check the error logs.",r);e[n]=i,t++}(0<t?function(e){var t=[];for(var n in e){var i=e[n];if(i.templates)for(var r in i.templates){var a=i.templates[r];t.push(function(t,n,i,r,a){return function(e){u(t,n,"view",i,r,a,e)}}(e,i,i.id,r,a))}if(i.fields)for(var o in i.fields)if(i.fields[o].templates)for(var r in i.fields[o].templates){a=i.fields[o].templates[r];t.push(function(t,n,i,r,a){return function(e){u(t,n,"field",i,r,a,e)}}(e,i,o,r,a))}if(i.globalTemplate){a=i.globalTemplate;t.push(function(t,n,i){return function(e){u(t,n,"global","global","globalTemplate",i,e)}}(e,i,a))}}for(var l=t.length,s=0;s<t.length;s++)t[s](l)}:o)(e)}()},getTemplateDescriptor:function(u,c,e){var t=null,n=null,i=null;if(u.templates&&u.templates[c]){i=T.makeCacheKey(u.id,"view",u.id,c);var r=u.templates[c];T.isObject(r)&&r.cacheKey&&(i=r.cacheKey)}if(e&&e.path){var a=e.path;if(u&&u.fields&&a&&1<a.length){var p=function(e,t,n){if(t!=e.length){var i=e.slice(),r=!1,a=e[t],o=a.indexOf("[");-1<o&&(a=a.substring(0,o),r=!0),i[t]=a;var l=i.join("/");if(u.fields[l]&&u.fields[l].templates&&u.fields[l].templates[c]){var s=T.makeCacheKey(u.id,"field",l,c);s&&n.push({path:l,cacheKey:s})}p(e,t+1,n),r&&p(i,t+1,n)}},o=a.split("/"),l=[];p(o,0,l),0<l.length&&(i=l[0].cacheKey)}}if("globalTemplate"!==c&&"global"!==c||(i=T.makeCacheKey(u.id,"global","global","globalTemplate")),i){for(var s=T.TemplateEngineRegistry.ids(),d=0;d<s.length;d++){var h=s[d];if(T.TemplateEngineRegistry.find(h).isCached(i)){n=h;break}}n&&(t={engine:n,cacheKey:i})}return t},tmpl:function(e,t){var n=T.tmplHtml(e,t);return T.safeDomParse(n)},tmplHtml:function(e,t){t=t||{};var n=e.engine,i=T.TemplateEngineRegistry.find(n);if(!i)return T.throwDefaultError("Cannot find template engine for type: "+n);var r=e.cacheKey;return i.execute(r,t,function(e){var t=JSON.stringify(e);return e.message&&(t=e.message),T.throwDefaultError("The compiled template: "+r+" failed to execute: "+t)})}}),T.DEBUG=0,T.INFO=1,T.WARN=2,T.ERROR=3,T.logLevel=T.ERROR,T.logDebug=function(e){T.log(T.DEBUG,e)},T.logInfo=function(e){T.log(T.INFO,e)},T.logWarn=function(e){T.log(T.WARN,e)},T.logError=function(e){T.log(T.ERROR,e)},T.LOG_METHOD_MAP={0:"debug",1:"info",2:"warn",3:"error"},T.log=function(e,t){if(T.logLevel<=e){var n=T.LOG_METHOD_MAP[e];"undefined"!=typeof console&&console[n]&&("debug"===n?console.debug(t):"info"===n?console.info(t):"warn"===n?console.warn(t):"error"===n?console.error(t):console.log(t))}},T.checked=function(e,t){return T.attrProp(e,"checked",t)},T.disabled=function(e,t){return T.attrProp(e,"disabled",t)},T.attrProp=function(e,t,n){return void 0!==n&&(F(e).prop?F(e).prop(t,n):n?F(e).attr(t,n):F(e).removeAttr(t)),F(e).prop?F(e).prop(t):F(e).attr(t)},T.loadRefSchemaOptions=function(e,t,i){if(t)if("#"===t)i(e.schema,e.options);else if(0===t.indexOf("#/")){for(var n=t.substring(2).split("/"),r=e.schema,a=0;a<n.length;a++){if(r[l=n[a]])r=r[l];else if(r.properties&&r.properties[l])r=r.properties[l];else{if(!r.definitions||!r.definitions[l]){r=null;break}r=r.definitions[l]}}var o=e.options;for(a=0;a<n.length;a++){var l;if(o[l=n[a]])o=o[l];else if(o.fields&&o.fields[l])o=o.fields[l];else{if(!o.definitions||!o.definitions[l]){o=null;break}o=o.definitions[l]}}i(r,o)}else if(0===t.indexOf("#")){var s=T.resolveReference(e.schema,e.options,t);s?i(s.schema,s.options):i()}else{var u=T.pathParts(t);e.connector.loadReferenceSchema(u.path,function(n){e.connector.loadReferenceOptions(u.path,function(e){if(u.id){var t=T.resolveReference(n,e,u.id);t&&(n=t.schema,e=t.options)}i(n,e)},function(){i(n)})},function(){i()})}else i()},T.DEFAULT_ERROR_CALLBACK=function(e){if(e&&e.message)throw T.logError(JSON.stringify(e)),new Error("Alpaca caught an error with the default error handler: "+JSON.stringify(e))},T.defaultErrorCallback=T.DEFAULT_ERROR_CALLBACK,T.throwDefaultError=function(e){e&&T.isObject(e)&&(e=JSON.stringify(e));var t={message:e};T.defaultErrorCallback(t)},T.throwErrorWithCallback=function(e,t){e&&T.isObject(e)&&(e=JSON.stringify(e));var n={message:e};t?t(n):T.defaultErrorCallback(n)},T.resolveReference=function(e,t,n){if(e.id===n||"#"+e.id===n){var i={};return e&&(i.schema=e),t&&(i.options=t),i}if(e&&e.properties)for(var r in e.properties){var a=e.properties[r],o=null;t&&t.fields&&t.fields[r]&&(o=t.fields[r]);var l=T.resolveReference(a,o,n);if(l)return l}return null},F.alpaca=window.Alpaca=T,F.fn.alpaca=function(){var e=T.makeArray(arguments),t=[].concat(this,e),n=T.apply(this,t);return void 0===n&&(n=F(this)),n},F.fn.outerHTML=function(e){return e?F("<div></div>").append(this).html():F("<div></div>").append(this.clone()).html()},F.fn.swapWith=function(n){return this.each(function(){var e=F(n).clone(),t=F(this).clone();F(n).replaceWith(t),F(this).replaceWith(e)})},F.fn.attrProp=function(e,t){return T.attrProp(F(this),e,t)},F.event.special.destroyed={remove:function(e){e.handler&&e.handler()}},T.pathParts=function(e){if("string"!=typeof e)return e;var t=e,n=null,i=t.indexOf("#");-1<i&&(n=t.substring(i+1),t=t.substring(0,i)),T.endsWith(t,"/")&&(t=t.substring(0,t.length-1));var r={};return r.path=t,n&&(r.id=n),r},T.resolveField=function(e,t){var n=null;if("string"==typeof t&&!(0===t.indexOf("#/")&&2<propertyId.length))if("#"===t||"#/"===t)n=e;else if(0===t.indexOf("#")){for(var i=e;i.parent;)i=i.parent;var r=t.substring(1);n=T.resolveFieldByReference(i,r)}else n=e.childrenByPropertyId[t];return n},T.resolveFieldByReference=function(e,t){if(e.schema&&e.schema.id==t)return e;if(e.children&&0<e.children.length)for(var n=0;n<e.children.length;n++){var i=e.children[n],r=T.resolveFieldByReference(i,t);if(r)return r}return null},T.anyEquality=function(e,t){var n={};if("object"==typeof e||T.isArray(e))for(var i in e)n[e[i]]=!0;else n[e]=!0;var r=!1;if("object"==typeof t||T.isArray(t))for(var i in t){if(n[t[i]]){r=!0;break}}else r=n[t];return r},T.series=function(e,t){"undefined"!=typeof async&&async.series(e,function(){t()})},T.nextTick=function(e){"undefined"!=typeof async&&async.nextTick(function(){e()})},T.compileValidationContext=function(e,t){for(var n=[],i=e;i.isValidationParticipant()||(i=null),i&&n.push(i),i=i&&i.parent;);n.reverse();var r=[],s=function(e,a,t){if(e&&0!==e.length){var o,n=e[0],i={};i.id=n.getId(),i.field=n,i.path=n.path,o=n.isContainer()?n.isValid(!0):n.isValid(),i.before=o;var r=function(t,n,i){var r=t._previouslyValidated;t.validate(),t._validateCustomValidator(function(){var e=t.isValid();t.isContainer()&&(e=t.isValid(!0)),n.after=e,n.validated=!1,n.invalidated=!1,!o&&e?n.validated=!0:(!o||e)&&(r||e)||(n.invalidated=!0),n.container=t.isContainer(),n.valid=n.after,a.push(n),i()})};if(1<e.length){var l=e.slice(0);l.shift(),s(l,a,function(){r(n,i,function(){t()})})}else r(n,i,function(){t()})}else t()};s(n,r,function(){t(r)})},T.updateValidationStateForContext=function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.field;if(r.getFieldEl().removeClass("alpaca-invalid alpaca-invalid-hidden alpaca-valid"),r.fireCallback("clearValidity"),i.valid)r.fireCallback("valid"),r.validation.notOptional.status?r.getFieldEl().addClass("alpaca-field-valid"):r.getFieldEl().addClass("alpaca-invalid");else if(r.options.readonly)T.logWarn("The field (id="+r.getId()+", title="+r.getTitle()+", path="+r.path+") is invalid and also read-only");else{var a=!1;r.hideInitValidationError&&(a=!0),r.fireCallback("invalid",a),r.getFieldEl().addClass("alpaca-invalid"),a&&r.getFieldEl().addClass("alpaca-invalid-hidden")}if(i.validated?T.later(25,this,function(){r.trigger("validated")}):i.invalidated&&T.later(25,this,function(){r.trigger("invalidated")}),r.options.showMessages&&!r.initializing&&!r.options.readonly){var o=[];for(var l in r.validation)r.validation[l].status||o.push({id:l,message:r.validation[l].message});r.displayMessage(o,r.valid)}}},T.fieldApplyFieldAndChildren=function(e,t){if(t(e),e.children&&0<e.children.length)for(var n=0;n<e.children.length;n++)T.fieldApplyFieldAndChildren(e.children[n],t)},T.replaceAll=function(e,t,n){return e.replace(new RegExp(t,"g"),n)},T.asArray=function(e){if(T.isArray(e))return e;var t=[];return t.push(e),t},function(){var n,e,d={};function l(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(n,arguments)}}null!=(n=this)&&(e=n.async),d.noConflict=function(){return n.async=e,d};function h(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)}function s(e,i){if(e.map)return e.map(i);var r=[];return h(e,function(e,t,n){r.push(i(e,t,n))}),r}function f(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}"undefined"!=typeof process&&process.nextTick?(d.nextTick=process.nextTick,"undefined"!=typeof setImmediate?d.setImmediate=function(e){setImmediate(e)}:d.setImmediate=d.nextTick):("function"==typeof setImmediate?d.nextTick=function(e){setImmediate(e)}:d.nextTick=function(e){setTimeout(e,0)},d.setImmediate=d.nextTick),d.each=function(t,n,i){if(i=i||function(){},!t.length)return i();var r=0;h(t,function(e){n(e,l(function(e){e?(i(e),i=function(){}):(r+=1)>=t.length&&i(null)}))})},d.forEach=d.each,d.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var i=0,r=function(){e(t[i],function(e){e?(n(e),n=function(){}):(i+=1)>=t.length?n(null):r()})};r()},d.forEachSeries=d.eachSeries,d.eachLimit=function(e,t,n,i){a(t).apply(null,[e,n,i])},d.forEachLimit=d.eachLimit;function t(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[d.each].concat(e))}}function i(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[d.eachSeries].concat(e))}}function r(e,t,r,n){var a=[];e(t=s(t,function(e,t){return{index:t,value:e}}),function(n,i){r(n.value,function(e,t){a[n.index]=t,i(e)})},function(e){n(e,a)})}var a=function(l){return function(n,e,i){if(i=i||function(){},!n.length||l<=0)return i();var r=0,a=0,o=0;!function t(){if(r>=n.length)return i();for(;o<l&&a<n.length;)o+=1,e(n[(a+=1)-1],function(e){e?(i(e),i=function(){}):(--o,((r+=1)>=n.length?i:t)())})}()}};d.map=t(r),d.mapSeries=i(r),d.mapLimit=function(e,t,n,i){return o(t)(e,n,i)};var o=function(e){return t=e,n=r,function(){var e=Array.prototype.slice.call(arguments);return n.apply(null,[a(t)].concat(e))};var t,n};d.reduce=function(e,i,t,n){d.eachSeries(e,function(e,n){t(i,e,function(e,t){i=t,n(e)})},function(e){n(e,i)})},d.inject=d.reduce,d.foldl=d.reduce,d.reduceRight=function(e,t,n,i){var r=s(e,function(e){return e}).reverse();d.reduce(r,t,n,i)},d.foldr=d.reduceRight;function u(e,t,i,n){var r=[];e(t=s(t,function(e,t){return{index:t,value:e}}),function(t,n){i(t.value,function(e){e&&r.push(t),n()})},function(e){n(s(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}d.filter=t(u),d.filterSeries=i(u),d.select=d.filter,d.selectSeries=d.filterSeries;function c(e,t,i,n){var r=[];e(t=s(t,function(e,t){return{index:t,value:e}}),function(t,n){i(t.value,function(e){e||r.push(t),n()})},function(e){n(s(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}d.reject=t(c),d.rejectSeries=i(c);function p(e,t,i,r){e(t,function(t,n){i(t,function(e){e?(r(t),r=function(){}):n()})},function(e){r()})}d.detect=t(p),d.detectSeries=i(p),d.some=function(e,n,i){d.each(e,function(e,t){n(e,function(e){e&&(i(!0),i=function(){}),t()})},function(e){i(!1)})},d.any=d.some,d.every=function(e,n,i){d.each(e,function(e,t){n(e,function(e){e||(i(!1),i=function(){}),t()})},function(e){i(!0)})},d.all=d.every,d.sortBy=function(e,t,n){d.map(e,function(n,i){t(n,function(e,t){e?i(e):i(null,{value:n,criteria:t})})},function(e,t){if(e)return n(e);n(null,s(t.sort(function(e,t){var n=e.criteria,i=t.criteria;return n<i?-1:i<n?1:0}),function(e){return e.value}))})},d.auto=function(r,l){l=l||function(){};var e=f(r);if(!e.length)return l(null);function s(e){p.unshift(e)}function u(){h(p.slice(0),function(e){e()})}var c={},p=[];s(function(){f(c).length===e.length&&(l(null,c),l=function(){})}),h(e,function(a){function e(e){var t=Array.prototype.slice.call(arguments,1);if(t.length<=1&&(t=t[0]),e){var n={};h(f(c),function(e){n[e]=c[e]}),n[a]=t,l(e,n),l=function(){}}else c[a]=t,d.setImmediate(u)}function t(){return i=function(e,t){return e&&c.hasOwnProperty(t)},r=!0,((e=o).reduce?e.reduce(i,r):(h(e,function(e,t,n){r=i(r,e,t,n)}),r))&&!c.hasOwnProperty(a);var e,i,r}var n=r[a]instanceof Function?[r[a]]:r[a],o=n.slice(0,Math.abs(n.length-1))||[];if(t())n[n.length-1](e,c);else{var i=function(){t()&&(function(e){for(var t=0;t<p.length;t+=1)if(p[t]===e)return p.splice(t,1)}(i),n[n.length-1](e,c))};s(i)}})},d.waterfall=function(e,r){if(r=r||function(){},e.constructor!==Array){var t=new Error("First argument to waterfall must be an array of functions");return r(t)}if(!e.length)return r();var a=function(i){return function(e){if(e)r.apply(null,arguments),r=function(){};else{var t=Array.prototype.slice.call(arguments,1),n=i.next();n?t.push(a(n)):t.push(r),d.setImmediate(function(){i.apply(null,t)})}}};a(d.iterator(e))()};function m(e,t,n){if(n=n||function(){},t.constructor===Array)e.map(t,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},n);else{var r={};e.each(f(t),function(n,i){t[n](function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),r[n]=t,i(e)})},function(e){n(e,r)})}}d.parallel=function(e,t){m({map:d.map,each:d.each},e,t)},d.parallelLimit=function(e,t,n){m({map:o(t),each:a(t)},e,n)},d.series=function(e,t){if(t=t||function(){},e.constructor===Array)d.mapSeries(e,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},t);else{var r={};d.eachSeries(f(e),function(n,i){e[n](function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),r[n]=t,i(e)})},function(e){t(e,r)})}},d.iterator=function(n){var i=function(e){var t=function(){return n.length&&n[e].apply(null,arguments),t.next()};return t.next=function(){return e<n.length-1?i(e+1):null},t};return i(0)},d.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};function y(e,t,i,n){var r=[];e(t,function(e,n){i(e,function(e,t){r=r.concat(t||[]),n(e)})},function(e){n(e,r)})}d.concat=t(y),d.concatSeries=i(y),d.whilst=function(t,n,i){t()?n(function(e){if(e)return i(e);d.whilst(t,n,i)}):i()},d.doWhilst=function(t,n,i){t(function(e){if(e)return i(e);n()?d.doWhilst(t,n,i):i()})},d.until=function(t,n,i){t()?i():n(function(e){if(e)return i(e);d.until(t,n,i)})},d.doUntil=function(t,n,i){t(function(e){if(e)return i(e);n()?i():d.doUntil(t,n,i)})},d.queue=function(n,a){function i(n,e,i,r){e.constructor!==Array&&(e=[e]),h(e,function(e){var t={data:e,callback:"function"==typeof r?r:null};i?n.tasks.unshift(t):n.tasks.push(t),n.saturated&&n.tasks.length===a&&n.saturated(),d.setImmediate(n.process)})}void 0===a&&(a=1);var r=0,o={tasks:[],concurrency:a,saturated:null,empty:null,drain:null,push:function(e,t){i(o,e,!1,t)},unshift:function(e,t){i(o,e,!0,t)},process:function(){if(r<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),r+=1;var t=l(function(){--r,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+r===0&&o.drain(),o.process()});n(e.data,t)}},length:function(){return o.tasks.length},running:function(){return r}};return o},d.cargo=function(i,r){var a=!1,o=[],l={tasks:o,payload:r,saturated:null,empty:null,drain:null,push:function(e,t){e.constructor!==Array&&(e=[e]),h(e,function(e){o.push({data:e,callback:"function"==typeof t?t:null}),l.saturated&&o.length===r&&l.saturated()}),d.setImmediate(l.process)},process:function e(){if(!a)if(0!==o.length){var n="number"==typeof r?o.splice(0,r):o.splice(0),t=s(n,function(e){return e.data});l.empty&&l.empty(),a=!0,i(t,function(){a=!1;var t=arguments;h(n,function(e){e.callback&&e.callback.apply(null,t)}),e()})}else l.drain&&l.drain()},length:function(){return o.length},running:function(){return a}};return l};function g(n){return function(e){var t=Array.prototype.slice.call(arguments,1);e.apply(null,t.concat([function(e){var t=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[n]&&h(t,function(e){console[n](e)}))}]))}}d.log=g("log"),d.dir=g("dir"),d.memoize=function(n,r){var a={},o={};r=r||function(e){return e};function e(){var e=Array.prototype.slice.call(arguments),t=e.pop(),i=r.apply(null,e);i in a?t.apply(null,a[i]):i in o?o[i].push(t):(o[i]=[t],n.apply(null,e.concat([function(){a[i]=arguments;var e=o[i];delete o[i];for(var t=0,n=e.length;t<n;t++)e[t].apply(null,arguments)}])))}return e.memo=a,e.unmemoized=n,e},d.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},d.times=function(e,t,n){for(var i=[],r=0;r<e;r++)i.push(r);return d.map(i,t,n)},d.timesSeries=function(e,t,n){for(var i=[],r=0;r<e;r++)i.push(r);return d.mapSeries(i,t,n)},d.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var i=this,e=Array.prototype.slice.call(arguments),n=e.pop();d.reduce(t,e,function(e,t,n){t.apply(i,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,t){n.apply(i,[e].concat(t))})}};function v(t,r){function e(){var n=this,i=Array.prototype.slice.call(arguments),e=i.pop();return t(r,function(e,t){e.apply(n,i.concat([t]))},e)}if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return e.apply(this,n)}return e}function b(e){return e.constructor===String?"string":e.constructor===Boolean?"boolean":e.constructor===Number?isNaN(e)?"nan":"number":void 0===e?"undefined":null===e?"null":e instanceof Array?"array":e instanceof Date?"date":e instanceof RegExp?"regexp":"object"==typeof e?"object":e instanceof Function?"function":void 0}d.applyEach=t(v),d.applyEachSeries=i(v),d.forever=function(n,i){!function e(t){if(t){if(i)return i(t);throw t}n(e)}()},window.async=d;var O,w,E;window.equiv=(w=[],E={string:x,boolean:x,number:x,null:x,undefined:x,nan:function(e){return isNaN(e)},date:function(e,t){return"date"===b(e)&&t.valueOf()===e.valueOf()},regexp:function(e,t){return"regexp"===b(e)&&t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline},function:function(){var e=w[w.length-1];return e!==Object&&void 0!==e},array:function(e,t){var n,i;if("array"!==b(e))return!1;if((i=t.length)!==e.length)return!1;for(n=0;n<i;n++)if(!O(t[n],e[n]))return!1;return!0},object:function(e,t){var n,i=!0,r=[],a=[];if(t.constructor!==e.constructor)return!1;for(n in w.push(t.constructor),t)r.push(n),O(t[n],e[n])||(i=!1);for(n in w.pop(),e)a.push(n);return i&&O(r.sort(),a.sort())}},O=function(){var e,t,n=Array.prototype.slice.apply(arguments);return n.length<2||(e=n[0],t=n[1],(e===t||null!==e&&null!==t&&void 0!==e&&void 0!==t&&b(e)===b(t)&&function(e,t,n){var i=b(e);if(i)return"function"===b(t[i])?t[i].apply(t,n):t[i]}(e,E,[t,e]))&&arguments.callee.apply(this,n.splice(1,n.length-1)))});function x(e,t){return e instanceof t.constructor||t instanceof e.constructor?t==e:t===e}}(),T.CLASS_CONTAINER="alpaca-container",T.CLASS_CONTROL="alpaca-control",T.MARKER_DATA_CONTAINER_FIELD_ITEM_KEY="data-alpaca-container-field-item-key",T.MARKER_CLASS_CONTROL_FIELD="alpaca-marker-control-field",T.MARKER_CLASS_CONTAINER_FIELD="alpaca-marker-container-field",T.MARKER_CLASS_CONTAINER_FIELD_ITEM="alpaca-marker-control-field-item",T.MARKER_CLASS_FORM_ITEMS_FIELD="alpaca-marker-form-items-field",T.MARKER_CLASS_INSERT="alpaca-marker-insert",T.MARKER_DATA_INSERT_KEY="data-alpaca-marker-insert-key",T.MARKER_CLASS_ARRAY_TOOLBAR="alpaca-marker-array-field-toolbar",T.MARKER_DATA_ARRAY_TOOLBAR_FIELD_ID="data-alpaca-array-field-toolbar-field-id",T.MARKER_CLASS_ARRAY_ITEM_ACTIONBAR="alpaca-marker-array-field-item-actionbar",T.MARKER_DATA_ARRAY_ITEM_KEY="data-alpaca-marker-array-field-item-key",T.MARKER_DATA_ARRAY_ITEM_PARENT_FIELD_ID="data-alpaca-marker-array-field-item-parent-field-id",T.MARKER_CLASS_CONTAINER_FIELD_ITEM_FIELD="alpaca-marker-container-field-item-field",T.makeCacheKey=function(e,t,n,i){return e+":"+t+":"+n+":"+i},T.splitCacheKey=function(e){var t={},n=e.indexOf(":"),i=e.lastIndexOf(":");t.viewId=e.substring(0,n),t.templateId=e.substring(i+1);var r=e.substring(n+1,i),a=r.indexOf(":");return t.scopeType=r.substring(0,a),t.scopeId=r.substring(a+1),t},T.createEmptyDataInstance=function(e){return e?"object"===e.type?{}:"array"===e.type?[]:"number"===e.type?-1:"boolean"!==e.type&&"":""},T.animatedSwap=function(e,t,n,i){"function"==typeof n&&(i=n,n=500);var r,a,o,l,s,u,c,p,d,h,f,m,y,g,v;r=t,a=n,o=i,u=F(e),c=F(r),p=u.offset(),d=c.offset(),h=u.clone(),f=c.clone(),m=d.top+c.height()-p.top,y=0,g=d.left+c.width()-p.left,v=0,u.css("opacity",0),c.css("opacity",0),h.insertAfter(u).css({position:"absolute",width:u.outerWidth(),height:u.outerHeight()}).offset(p).css("z-index","999"),f.insertAfter(c).css({position:"absolute",width:c.outerWidth(),height:c.outerHeight()}).offset(d).css("z-index","999"),p.top!==d.top&&(y=m-u.height()),l=m-c.height(),p.left!==d.left&&(v=g-u.width()),s=g-c.width(),h.animate({top:"+="+y+"px",left:"+="+v+"px"},a,function(){c.css("opacity",1),F(this).remove()}),f.animate({top:"-="+l+"px",left:"-="+s+"px"},a,function(){u.css("opacity",1),F(this).remove()}),window.setTimeout(function(){h.remove(),f.remove(),o()},a+1)},T.readCookie=function(e){var t=null;return"undefined"!=typeof document&&(t=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}(e)),t},T.CSRF_TOKEN=null,T.CSRF_COOKIE_NAMES=["CSRF-TOKEN","XSRF-TOKEN"],T.CSRF_HEADER_NAME="X-CSRF-TOKEN"}(jQuery),uL=jQuery.alpaca,uL.listenerId=(vL=0,function(){return"listener-"+vL++}),uL.subscribe=function(){var e=uL.makeArray(arguments),t=null,n=null,i=null;if(i=(n=(t=2==e.length?"global":e.shift(),e.shift()),e.shift()),n&&uL.isObject(n)&&(n=n.path),!n)return uL.logError("Missing observable subscribe id: "+n),null;var r=i._lfid;r||(r=uL.listenerId(),i._lfid=r);var a,o=(a=this,function(){return i.apply(a,arguments)});return o._lfid=i._lfid,uL.ScopedObservables.get(t).observable(n).subscribe(r,o),{scope:t,id:n,listenerId:r}},uL.unsubscribe=function(){var e=uL.makeArray(arguments),t=null,n=null,i=null;2==e.length?(t="global",n=e.shift(),i=e.shift()):3==e.length&&(t=e.shift(),n=e.shift(),i=e.shift());var r=i;return uL.isFunction(r)&&(r=r._lfid),n&&uL.isObject(n)&&(n=n.path),n?(uL.ScopedObservables.get(t).observable(n).unsubscribe(r),{scope:t,id:n,listenerId:r}):(uL.logError("Missing observable id: "+n),null)},uL.observable=function(){var e,t,n=uL.makeArray(arguments);if(1==n.length?(e="global",t=n.shift()):2==n.length&&(e=n.shift(),t=n.shift()),t&&uL.isObject(t)&&(t=t.path),t){var i=uL.ScopedObservables.get(e);observable=i.observable(t)}else uL.logError("Missing observable id: "+JSON.stringify(n));return observable},uL.clearObservable=function(){var e,t,n=uL.makeArray(arguments);1==n.length?(e="global",t=n.shift()):2==n.length&&(e=n.shift(),t=n.shift()),t&&uL.isObject(t)&&(t=t.path),t||uL.logError("Missing observable id: "+JSON.stringify(n)),uL.ScopedObservables.get(e).observable(t).clear()},uL.dependentObservable=function(){var e=null,t=null,n=null,i=uL.makeArray(arguments);if(2==i.length)e="global",t=i.shift(),n=i.shift();else{if(3!=i.length)return void uL.error("Wrong number of arguments");e=i.shift(),t=i.shift(),n=i.shift()}return t&&uL.isObject(t)&&(t=t.path),t||uL.logError("Missing observable id: "+JSON.stringify(i)),uL.ScopedObservables.get(e).dependentObservable(t,n)},_L=jQuery.alpaca,_L.Observables=Base.extend({constructor:function(e){this.base(),this.scope=e,this.observables={}},observable:function(e,t){if(!this.observables[e]){var n=new _L.Observable(this.scope,e);t&&n.set(t),this.observables[e]=n}return this.observables[e]},dependentObservable:function(e,t){var i=this;if(!this.observables[e]){var r=this.observable(e),n=new _L.Observables(this.scope);n.observable=function(e,t){var n=i.observable(e,t);return n.markDependentOnUs(r),n};r.setValueFunction(function(){return t.call(n)})}return this.observables[e]},observables:function(){return this.observables}}),nM=jQuery,nM.alpaca.Observable=Base.extend({constructor:function(e,t){this.base(),this.id=e+"-"+t,this.value=null,this.subscribers={},this.dependentOnUs={},this.notifySubscribers=function(n){var i=this;nM.each(this.subscribers,function(e,t){t(i.value,n)})},this.notifyDependents=function(e){nM.each(this.dependentOnUs,function(e,t){t.onDependencyChange()})},this.valueFunction=null},setValueFunction:function(e){this.valueFunction=e,this.onDependencyChange()},subscribe:function(e,t){this.isSubscribed(e)||(this.subscribers[e]=t)},unsubscribe:function(e){delete this.subscribers[e]},isSubscribed:function(e){return!!this.subscribers[e]},markDependentOnUs:function(e){this.dependentOnUs[e.id]=e},onDependencyChange:function(){var e=this.get();if(this.valueFunction){var t=this.valueFunction();e!=t&&this.set(t)}},set:function(e){var t=this.value;this.value=e,this.notifyDependents(t),this.notifySubscribers(t)},get:function(e){var t=this.value;return t=t||e},clear:function(){var e=this.value;delete this.value,this.notifyDependents(e),this.notifySubscribers(e)}}),NM=jQuery.alpaca,NM.ScopedObservables={},NM.ScopedObservables.map={},NM.ScopedObservables.get=function(e){return NM.ScopedObservables.map[e]||(NM.ScopedObservables.map[e]=new NM.Observables(e)),NM.ScopedObservables.map[e]},Alpaca.TemplateEngineRegistry=(PM={},{register:function(e,t){(PM[e]=t).init()},find:function(e){var t=null;if(PM[e])t=PM[e];else for(var n in PM)for(var i=PM[n].supportedMimetypes(),r=0;r<i.length;r++)if(e.toLowerCase()===i[r].toLowerCase()){t=PM[n];break}return t},ids:function(){var e=[];for(var t in PM)e.push(t);return e}}),ZM=jQuery,Alpaca.AbstractTemplateEngine=Base.extend({constructor:function(e){this.base(),this.id=e,this.cleanup=function(e){return e&&1===ZM(e).length&&"script"===ZM(e)[0].nodeName.toLowerCase()?ZM(e).html():e}},compile:function(e,t,n){var i="html";if(Alpaca.isString(t)){var r=t.toLowerCase();Alpaca.isUri(r)?i="uri":0!==t.indexOf("#")&&0!==t.indexOf(".")&&0!==t.indexOf("[")||(i="selector")}if("selector"===i)this._compile(e,t,function(e){n(e)});else if("uri"===i){var a=this.fileExtension(),o=t;-1===o.indexOf("."+a)&&(o+="."+a)}else if("html"===i){var l=t;l instanceof jQuery&&(l=ZM(l).outerHTML()),this._compile(e,l,function(e){n(e)})}else n(new Error("Template engine cannot determine how to handle type: "+i))},_compile:function(e,t,n){Alpaca.isEmpty(t)&&(t=""),0===(t=Alpaca.trim(t)).toLowerCase().indexOf("<script")||(t="<script type='"+this.supportedMimetypes()[0]+"'>"+t+"<\/script>"),Alpaca.logDebug("Compiling template: "+this.id+", cacheKey: "+e+", template: "+t),this.doCompile(e,t,n)},doCompile:function(e,t,n){},execute:function(e,t,n){Alpaca.logDebug("Executing template for cache key: "+e);var i=this.doExecute(e,t,n);return i=this.cleanup(i)},doExecute:function(e,t,n){return null},fileExtension:function(){return"html"},supportedMimetypes:function(){return[]},isCached:function(e){return!1},findCacheKeys:function(e){return[]}}),function($,Handlebars,HandlebarsPrecompiled){var COMPILED_TEMPLATES={},helpers={compare:function(e,t,n){if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");var i=n.hash.operator||"==",r={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return t<e},"<=":function(e,t){return e<=t},">=":function(e,t){return t<=e},typeof:function(e,t){return typeof e==t}};if(!r[i])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+i);return r[i](e,t)?n.fn(this):n.inverse(this)},times:function(e,t){for(var n="",i=0;i<e;++i)n+=t.fn(i);return n},control:function(e){return"<div class='"+Alpaca.MARKER_CLASS_CONTROL_FIELD+"'></div>"},container:function(e){return"<div class='"+Alpaca.MARKER_CLASS_CONTAINER_FIELD+"'></div>"},item:function(e,t){return Alpaca.isObject(e)&&(e="div"),"<"+e+" class='"+Alpaca.MARKER_CLASS_CONTAINER_FIELD_ITEM+"' "+Alpaca.MARKER_DATA_CONTAINER_FIELD_ITEM_KEY+"='"+this.name+"'></"+e+">"},itemField:function(e,t){return Alpaca.isObject(e)&&(e="div"),"<"+e+" class='"+Alpaca.MARKER_CLASS_CONTAINER_FIELD_ITEM_FIELD+"'></"+e+">"},formItems:function(e){return"<div class='"+Alpaca.MARKER_CLASS_FORM_ITEMS_FIELD+"'></div>"},insert:function(e){return"<div class='"+Alpaca.MARKER_CLASS_INSERT+"' "+Alpaca.MARKER_DATA_INSERT_KEY+"='"+e+"'></div>"},str:function(e){return!1===e?"false":!0===e?"true":0===e?"0":null==e?"":!Alpaca.isString(e)&&!Alpaca.isNumber(e)&&(Alpaca.isObject(e)||Alpaca.isArray(e))?JSON.stringify(e,null,"  "):e},arrayToolbar:function(e){return" "},arrayActionbar:function(e){return" "}};Handlebars.registerHelper("arrayToolbar",helpers.arrayToolbar),Handlebars.registerHelper("arrayActionbar",helpers.arrayActionbar),Handlebars.registerHelper("setIndex",function(e){this.index=Number(e)}),Handlebars.registerHelper("eachProperty",function(e,t){var n="";for(var i in e)n+=t.fn({key:i,value:e[i]});return n}),Handlebars.registerHelper("uploadErrorMessage",function(e){var t=e;return 1===e?t="File exceeds upload_max_filesize":2===e?t="File exceeds MAX_FILE_SIZE":3===e?t="File was only partially uploaded":4===e?t="No File was uploaded":5===e?t="Missing a temporary folder":6===e?t="Failed to write file to disk":7===e?t="File upload stopped by extension":"maxFileSize"===e?t="File is too big":"minFileSize"===e?t="File is too small":"acceptFileTypes"===e?t="Filetype not allowed":"maxNumberOfFiles"===e?t="Max number of files exceeded":"uploadedBytes"===e?t="Uploaded bytes exceed file size":"emptyResult"===e&&(t="Empty file upload result"),t}),Handlebars.registerHelper("disguise",function(e,t){for(var n="",i=0;i<e.length;i++)n+=t;return n}),Handlebars.registerHelper("compare",helpers.compare),Handlebars.registerHelper("control",helpers.control),Handlebars.registerHelper("container",helpers.container),Handlebars.registerHelper("item",helpers.item),Handlebars.registerHelper("itemField",helpers.itemField),Handlebars.registerHelper("formItems",helpers.formItems),Handlebars.registerHelper("times",helpers.times),Handlebars.registerHelper("str",helpers.str);var partials={};Alpaca.HandlebarsTemplateEngine=Alpaca.AbstractTemplateEngine.extend({fileExtension:function(){return"html"},supportedMimetypes:function(){return["text/x-handlebars-template","text/x-handlebars-tmpl"]},init:function(){if(HandlebarsPrecompiled)for(var e in HandlebarsPrecompiled){var t=HandlebarsPrecompiled[e];for(var n in t){var i=t[n];if("function"==typeof i){var r=Alpaca.makeCacheKey(e,"view",e,n);COMPILED_TEMPLATES[r]=i}}}},doCompile:function(cacheKey,html,callback){var self=this,template=null;try{var functionString=Handlebars.precompile(html);template=eval("("+functionString+")"),template=Handlebars.template(template),COMPILED_TEMPLATES[cacheKey]=template}catch(e){return void callback(e)}callback()},doExecute:function(e,t,n){var i=COMPILED_TEMPLATES[e];if(i){var r=null;try{r=i(t)}catch(e){return n(e),null}return r}n(new Error("Could not find handlebars cached template for key: "+e))},isCached:function(e){return!!COMPILED_TEMPLATES[e]},findCacheKeys:function(e){var t=[];for(var n in COMPILED_TEMPLATES)0===n.indexOf(e+":")&&t.push(n);return t}}),Alpaca.TemplateEngineRegistry.register("handlebars",new Alpaca.HandlebarsTemplateEngine("handlebars"))}(jQuery,void 0!==Handlebars?Handlebars:window.Handlebars,"undefined"!=typeof HandlebarsPrecompiled?HandlebarsPrecompiled:window.HandlebarsPrecompiled),OO=jQuery.alpaca,OO.NormalizedView=Base.extend({constructor:function(e){this.id=e},normalize:function(e){var t=e[this.id];if(!t)return OO.logError("View compilation failed - view not found: "+this.id),!1;for(var n=[],i=t;i;){n.push(i);var r=i.parent;if(r){var a=e[i.parent];if(!a)return OO.logError("View compilation failed - cannot find parent view: "+r+" for view: "+i.id),!1;i=a}else i=null}n=n.reverse();function o(e,t,n){var i=t[n],r=e[n];OO.isUndefined(r)||OO.isUndefined(i)||OO.logDebug("View property: "+n+" already has value: "+r+" and overwriting to: "+i),OO.isUndefined(i)||(e[n]=i)}function l(e,t,n){var i=t[n],r=e[n];OO.isUndefined(r)||OO.isUndefined(i)||OO.logDebug("View property: "+n+" already has function, overwriting"),OO.isUndefined(i)||(e[n]=i)}function s(e,t,n){var i=t[n];i&&(e[n]||(e[n]={}),OO.mergeObject2(i,e[n]))}for(var u=0;u<n.length;u++){var c=n[u];o(this,c,"type"),o(this,c,"ui"),o(this,c,"displayReadonly"),o(this,c,"locale"),l(this,c,"render"),l(this,c,"postRender"),s(this,c,"templates"),s(this,c,"fields"),s(this,c,"styles"),s(this,c,"callbacks"),s(this,c,"messages"),o(this,c,"horizontal"),o(this,c,"collapsible"),o(this,c,"legendStyle"),o(this,c,"toolbarStyle"),o(this,c,"buttonStyle"),o(this,c,"toolbarSticky"),o(this,c,"globalTemplate")}return OO.logDebug("View compilation complete for view: "+this.id),OO.logDebug("Final view: "),OO.logDebug(JSON.stringify(this,null,"   ")),!0}}),nP=jQuery,oP=nP.alpaca,oP.RuntimeView=Base.extend({constructor:function(e,t){this.field=t,this.setView(e)},setView:function(e){e=e||"web-edit";var t=oP.getNormalizedView(e);if(!t)throw new Error("Runtime view for view id: "+e+" could not find a normalized view");for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])},getGlobalTemplateDescriptor:function(){return this.getTemplateDescriptor("globalTemplate")},getTemplateDescriptor:function(e,t){return oP.getTemplateDescriptor(this,e,t)},getMessage:function(e,t){t=t||oP.defaultLocale;var n=this.getViewParam(["messages",t,e]);return oP.isEmpty(n)&&(n=this.getViewParam(["messages",e])),n},getViewParam:function(e,t){var n=this.field.path;if(this.fields&&this.fields[n]){var i=this._getConfigVal(this.fields[n],e);if(!oP.isEmpty(i))return i}if(n&&-1!==n.indexOf("[")&&-1!==n.indexOf("]")){var r=n.replace(/\[\d+\]/g,"[*]");if(this.fields&&this.fields[r]){i=this._getConfigVal(this.fields[r],e);if(!oP.isEmpty(i))return i}}if(n&&-1!==n.indexOf("[")&&-1!==n.indexOf("]")){r=n.replace(/\[\d+\]/g,"");if(this.fields&&this.fields[r]){i=this._getConfigVal(this.fields[r],e);if(!oP.isEmpty(i))return i}}return!oP.isEmpty(t)&&t&&"/"!==this.field.path?null:this._getConfigVal(this,e)},_getConfigVal:function(e,t){if(oP.isArray(t))for(var n=0;n<t.length&&!oP.isEmpty(e);n++)e=e[t[n]];else oP.isEmpty(e)||(e=e[t]);return e},fireCallback:function(e,t,n,i,r,a,o){this.callbacks&&this.callbacks[t]&&this.callbacks[t].call(e,n,i,r,a,o)},applyStyle:function(e,t){var n=t;n&&n.getFieldEl&&(n=n.getFieldEl()),n&&this.styles&&this.styles[e]&&nP(n).addClass(this.styles[e])},getStyle:function(e){return this.styles[e]?this.styles[e]:""}}),UP=jQuery,VP=UP.alpaca,VP.Field=Base.extend({constructor:function(e,t,n,i,r,a,o){var l=this;this.initializing=!0,this.domEl=e,this.parent=null,this.data=t,this.options=n,this.schema=i,this.connector=a,this.errorCallback=function(e){o?o(e):VP.defaultErrorCallback.call(l,e)},this.singleLevelRendering=!1,this.view=new VP.RuntimeView(r,this);this.options||(this.options={}),this.id=this.options.id,this.type=this.options.type,this.id||(this.id=VP.generateId());if(this.schema||(this.schema={},0),this.options.label||null===this.schema.title||(this.options.label=this.schema.title),this.options.helpers||(this.options.helpers=[]),this.options.helper){if(VP.isArray(this.options.helper))for(var s=0;s<this.options.helper.length;s++)this.options.helpers.push(this.options.helper[s]);else this.options.helpers.push(this.options.helper);delete this.options.helper}VP.isEmpty(this.options.readonly)&&!VP.isEmpty(this.schema.readonly)&&(this.options.readonly=this.schema.readonly),VP.isValEmpty(this.data)&&!VP.isEmpty(this.schema.default)&&(this.data=this.schema.default,this.showingDefaultData=!0),this.path="/",this.validation={},this._events={},this.isDisplayOnly=function(){return"view"===l.view.type||"display"==l.view.type},this.schema&&this.schema.id&&0===this.schema.id.indexOf("#")&&(this.schema.id=this.schema.id.substring(1)),this._previouslyValidated=!1,this.updateObservable=function(){this.data?this.observable(this.path).set(this.data):this.observable(this.path).clear()},this.getObservableScope=function(){for(var e=this;!e.isTop();)e=e.parent;var t=e.observableScope;return t=t||"global"},this.ensureProperType=function(e){return void 0!==e&&(VP.isString(e)?"number"===this.schema.type?e=parseFloat(e):"boolean"===this.schema.type&&(e=""!==e&&"false"!==e.toLowerCase()):VP.isNumber(e)&&("string"===this.schema.type?e=""+e:"boolean"===this.schema.type&&(e=-1!==e&&0!==e))),e},this.onConstruct()},onConstruct:function(){},isTop:function(){return!this.parent},getTemplateDescriptorId:function(){throw new Error("Template descriptor ID was not specified")},initTemplateDescriptor:function(){var e=this.view.getTemplateDescriptor(this.getTemplateDescriptorId(),this),t=this.view.getGlobalTemplateDescriptor(),n=!1;if(this.isTop()&&t&&(this.setTemplateDescriptor(t),n=this.singleLevelRendering=!0),!n&&e&&this.setTemplateDescriptor(e),!this.getTemplateDescriptor())return VP.throwErrorWithCallback("Unable to find template descriptor for field: "+this.getFieldType())},setup:function(){this.initializing||(this.data=this.getValue()),this.initTemplateDescriptor(),VP.isUndefined(this.schema.required)&&(this.schema.required=!1),VP.isUndefined(this.options.validate)&&(this.options.validate=!0),VP.isUndefined(this.options.disabled)&&(this.options.disabled=!1),VP.isUndefined(this.options.showMessages)&&(this.options.showMessages=!0)},on:function(e,t){return VP.logDebug("Adding listener for event: "+e),this._events[e]||(this._events[e]=[]),this._events[e].push(t),this},triggerWithPropagation:function(e,t){this.trigger.call(this,e,t),this.parent&&this.parent.triggerWithPropagation.call(this.parent,e,t)},trigger:function(t,e,n,i,r){var a=this._events[t];if(a)for(var o=0;o<a.length;o++){var l=a[o];if("function"==typeof l){VP.logDebug("Firing event: "+t);try{l.call(this,e,n,i,r)}catch(e){VP.logDebug("The event handler caught an exception: "+t),VP.logDebug(e)}}}},bindData:function(){VP.isEmpty(this.data)||VP.isObject(this.data)||this.setValue(this.data)},render:function(e,t){e&&(VP.isString(e)||VP.isObject(e))?this.view.setView(e):VP.isEmpty(t)&&VP.isFunction(e)&&(t=e),null===this.options.label&&this.propertyId&&(this.options.label=this.propertyId),this.options.name&&(this.name=this.options.name),this.calculateName(),this.setup(),this._render(t)},calculateName:function(){if(!this.name||this.name&&this.nameCalculated)if(this.parent&&this.parent.name&&this.path){var e=this.path.substring(this.path.lastIndexOf("/")+1);-1!==e.indexOf("[")&&-1!==e.indexOf("]")&&(e=e.substring(e.indexOf("[")+1,e.indexOf("]"))),e&&(this.name=this.parent.name+"_"+e,this.nameCalculated=!0)}else this.path&&(this.name=this.path.replace(/\//g,"").replace(/\[/g,"_").replace(/\]/g,""),this.nameCalculated=!0)},_render:function(n){var i=this;if(i.options.form&&VP.isObject(i.options.form)){i.options.form.viewType=this.view.type;var e=i.form;(e=e||new VP.Form(i.domEl,this.options.form,i.view.id,i.connector,i.errorCallback)).render(function(e){var t=UP("<div></div>");i._processRender(t,function(){e.formFieldsContainer.before(i.field),e.formFieldsContainer.remove(),(e.topControl=i).view.type&&"view"!==i.view.type&&e.initEvents(),i.form=e,i.postRender(function(){i.initializing=!1,i.form&&i.form.afterInitialize(),n&&VP.isFunction(n)&&n(i)})})})}else this._processRender(i.domEl,function(){i.postRender(function(){i.initializing=!1,n&&VP.isFunction(n)&&n(i)})})},_processRender:function(e,t){var n=this;n.renderField(e,function(){n.fireCallback("field"),n.renderFieldElements(function(){t()})})},renderFieldDomElement:function(e){var t=this.getTemplateDescriptor();return VP.tmpl(t,{id:this.getId(),options:this.options,schema:this.schema,data:e,view:this.view,path:this.path,name:this.name})},renderField:function(e,t){var n=this.data;this.isDisplayOnly()&&"object"==typeof n&&(n=JSON.stringify(n));var i=this.renderFieldDomElement(n);if(0<UP(i).length){for(var r=null,a=0;a<UP(i).length;a++){var o=UP(i)[a].nodeName;if(o&&("div"===(o=o.toLowerCase())||"span"===o)){r=UP(UP(i)[a]);break}}(r=r||UP(UP(i).last()))&&(i=r)}this._oldFieldEl=this.field,this.field=i,this.field.appendTo(e),t()},renderFieldElements:function(e){e()},updateDOMElement:function(){this.field.attr("data-alpaca-field-path",this.getPath()),this.field.attr("data-alpaca-field-name",this.getName()),this.field.removeAttr("name")},postRender:function(e){var t=this;if(this.field.addClass("alpaca-field"),this.field.addClass("alpaca-field-"+this.getFieldType()),this.field.attr("data-alpaca-field-id",this.getId()),this.updateDOMElement(),"view"!==this.view.type){this.isRequired()?(UP(this.field).addClass("alpaca-required"),t.fireCallback("required")):(UP(this.field).addClass("alpaca-optional"),t.fireCallback("optional"));function n(){VP.disabled(UP(":input",t.field),!0),VP.disabled(UP("select",t.field),!0),VP.disabled(UP(":radio",t.field),!0),VP.disabled(UP(":checkbox",t.field),!0),UP(":radio",t.field).off().click(function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1}),UP(".radio label",t.field).off().click(function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1}),UP(":input",t.field).off().click(function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1})}this.options.readonly&&(UP(this.field).addClass("alpaca-readonly"),UP(":input",this.field).attr("readonly","readonly"),n(),t.fireCallback("readonly")),this.options.disabled&&(UP(this.field).addClass("alpaca-disabled"),n(),t.fireCallback("disabled"));!function(e,t){if(t){var n=0,i=null;if(VP.isArray(t))for(n=0;n<t.length;n++)e.addClass(t[n]);else if(-1<t.indexOf(","))for(i=t.split(","),n=0;n<i.length;n++)e.addClass(i[n]);else if(-1<t.indexOf(" "))for(i=t.split(" "),n=0;n<i.length;n++)e.addClass(i[n]);else e.addClass(t)}}(this.field,this.options.fieldClass),this.options.disabled&&(this.disable(),t.fireCallback("disable")),(this.view.type&&"edit"===this.view.type||this.showingDefaultData)&&this.bindData(),this.view.type&&"view"!==this.view.type&&this.initEvents()}this.options.hidden&&this.field.hide(),this.hideInitValidationError=!VP.isValEmpty(this.options.hideInitValidationError)&&this.options.hideInitValidationError,this.view.displayReadonly||UP(this.field).find(".alpaca-readonly").hide(),this.options.postRender?this.options.postRender.call(this,function(){e()}):e()},refresh:function(e){var t=this;t.refreshed=!0;var n=UP("<div></div>");UP(t.field).before(n),t.domEl=UP("<div></div>"),t.setup(),t._render(function(){UP(n).before(t.domEl.children()),UP(n).remove(),t._oldFieldEl&&UP(t._oldFieldEl).remove(),e&&e()})},applyStyle:function(e,t){this.view.applyStyle(e,t)},fireCallback:function(e,t,n,i,r,a){this.view.fireCallback(this,e,t,n,i,r,a)},getFieldEl:function(){return this.field},getId:function(){return this.id},getParent:function(){return this.parent},getPath:function(){return this.path},getName:function(){return this.name},isTopLevel:function(){return VP.isEmpty(this.parent)},top:function(){for(var e=this;e.parent;)e=e.parent;return e},getValue:function(){var e=this.data;return e=this.ensureProperType(e)},setValue:function(e){this.data=e,this.updateObservable(),this.triggerUpdate(),this.isDisplayOnly()&&!this.initializing&&this.refresh()},setDefault:function(){},getTemplateDescriptor:function(){return this.templateDescriptor},setTemplateDescriptor:function(e){this.templateDescriptor=e},displayMessage:function(e,t){var r=this;e&&VP.isObject(e)&&(e=[e]),e&&VP.isString(e)&&(e=[{id:"custom",message:e}]),UP(this.getFieldEl()).children(".alpaca-message").remove(),e&&0<e.length&&this.options.maxMessages&&VP.isNumber(this.options.maxMessages)&&-1<this.options.maxMessages&&(e=e.slice(0,this.options.maxMessages)),r.fireCallback("removeMessages"),e&&0<e.length&&UP.each(e,function(e,t){var n=r.view.getTemplateDescriptor("message");if(n){var i=VP.tmpl(n,{id:t.id,message:t.message,view:r.view});i.addClass("alpaca-message"),UP(r.getFieldEl()).append(i)}r.fireCallback("addMessage",e,t.id,t.message,!1)})},refreshValidationState:function(e,c){function i(e,n){return function(t){VP.compileValidationContext(e,function(e){n.push(e),t()})}}var p=this,d=[],r=[];if(e){var a=function(e,t){if(e.isValidationParticipant()){if(e.children&&0<e.children.length)for(var n=0;n<e.children.length;n++)a(e.children[n],t);r.push(i(e,t))}};a(this,d)}r.push(i(this,d)),VP.series(r,function(e){for(var t={},n=[],i=0;i<d.length;i++)for(var r=d[i],a=n.length,o=0;o<r.length;o++){var l=r[o],s=t[l.id];if(s)l.validated&&!s.invalidated&&(s.validated=!0,s.invalidated=!1,s.valid=l.valid),l.invalidated&&(s.invalidated=!0,s.validated=!1,s.valid=l.valid);else{var u={};u.id=l.id,u.path=l.path,u.domEl=l.domEl,u.field=l.field,u.validated=l.validated,u.invalidated=l.invalidated,u.valid=l.valid,n.splice(a,0,u),t[u.id]=u}}n.reverse(),p.hideInitValidationError||VP.updateValidationStateForContext(p.view,n),c&&c()})},getMessage:function(e){return this.view.getMessage(e,this.view.locale)},validate:function(e){var t=!0;if(!this.initializing&&this.options.validate){if(this.children&&e)for(var n=0;n<this.children.length;n++){var i=this.children[n];i.isValidationParticipant()&&i.validate(e)}if(!(t=this.handleValidate())&&VP.logLevel==VP.DEBUG){var r=[];for(var a in this.validation)this.validation[a].status||r.push(this.validation[a].message);VP.logDebug("Validation failure for field (id="+this.getId()+", path="+this.path+"), messages: "+JSON.stringify(r))}}return this._previouslyValidated=!0,t},handleValidate:function(){var e=this.validation,t=this._validateOptional();return e.notOptional={message:t?"":this.getMessage("notOptional"),status:t},t=this._validateDisallow(),e.disallowValue={message:t?"":VP.substituteTokens(this.getMessage("disallowValue"),[this.schema.disallow.join(", ")]),status:t},e.notOptional.status&&e.disallowValue.status},_validateCustomValidator:function(t){var n=this;this.options.validator&&VP.isFunction(this.options.validator)?this.options.validator.call(this,function(e){n.validation.custom=e,t()}):t()},_validateOptional:function(){if(this.isRequired()&&this.isEmpty())return!1;if(this.options.disallowOnlyEmptySpaces&&(""+this.getValue()).match(VP.regexps.whitespace))return!1;return!0},_validateDisallow:function(){if(VP.isValEmpty(this.schema.disallow))return!0;var n=this.getValue(),e=this.schema.disallow;if(VP.isArray(e)){var i=!0;return UP.each(e,function(e,t){(VP.isObject(n)||VP.isArray(n)&&VP.isString(t))&&(t=VP.parseJSON(t)),VP.compareObject(n,t)&&(i=!1)}),i}return(VP.isObject(n)||VP.isArray(n)&&VP.isString(e))&&(e=VP.parseJSON(e)),!VP.compareObject(n,e)},triggerUpdate:function(){UP(this.field).trigger("fieldupdate")},disable:function(){},enable:function(){},focus:function(e){e&&e(this)},destroy:function(){VP.observable(this.path).clear(),VP&&VP.fieldInstances&&VP.fieldInstances[this.getId()]&&delete VP.fieldInstances[this.getId()],UP(this.field).remove()},show:function(){this.options&&this.options.hidden||(UP(this.field).css({display:""}),this.onShow(),this.fireCallback("show"))},onShow:function(){},hide:function(){UP(this.field).css({display:"none"}),this.onHide(),this.fireCallback("hide")},onHide:function(){},isValidationParticipant:function(){return this.isShown()},isShown:function(){return this.isVisible()},isVisible:function(){return!this.isHidden()},isHidden:function(){return"none"===UP(this.field).css("display")},print:function(){this.getFieldEl().printArea&&this.getFieldEl().printArea()},onDependentReveal:function(){},onDependentConceal:function(){},reload:function(){this.initializing=!0,VP.isEmpty(this.callback)?this.render(this.renderedCallback):this.callback(this,this.renderedCallback)},clear:function(){var e=null;this.data&&(e=this.data),this.setValue(e)},isEmpty:function(){return VP.isValEmpty(this.getValue())},isValid:function(e){if(e&&this.children)for(var t=0;t<this.children.length;t++){var n=this.children[t];if(n.isValidationParticipant()&&!n.isValid(e))return!1}if(UP.isEmptyObject(this.validation))return!0;for(var i in this.validation)if(!this.validation[i].status)return!1;return!0},initEvents:function(){var n=this;this.field&&(this.field.mouseover(function(e){n.onMouseOver.call(n,e),n.trigger("mouseover",e)}),this.field.mouseout(function(e){n.onMouseOut.call(n,e),n.trigger("mouseout",e)}),this.options&&this.options.events&&UP.each(this.options.events,function(e,t){VP.isFunction(t)&&n.field.on(e,function(e){t.call(n,e)})}))},onFocus:function(e){UP(this.field).removeClass("alpaca-field-empty"),UP(this.field).addClass("alpaca-field-focused")},onBlur:function(e){var t=UP(this.field).hasClass("alpaca-field-focused");UP(this.field).removeClass("alpaca-field-focused"),t&&this.refreshValidationState(),UP(this.field).trigger("fieldblur")},onChange:function(e){this.data=this.getValue(),this.updateObservable(),this.triggerUpdate()},onMouseOver:function(e){},onMouseOut:function(e){},getControlByPath:function(e){var t=null;if(e){0===e.indexOf("/")&&(e=e.substring(1)),VP.endsWith(e,"/")&&(e=e.substring(0,e.length-1));for(var n=this,i=e.split("/"),r=0;r<i.length;r++){var a=i[r];if(0===a.indexOf("[")){var o=parseInt(a.substring(1,a.length-1),10);n=n.children[o]}else n=n.childrenByPropertyId[a]}t=n}return t},subscribe:function(){var e=VP.makeArray(arguments);return e.unshift(this.getObservableScope()),VP.subscribe.apply(this,e)},unsubscribe:function(){var e=VP.makeArray(arguments);return e.unshift(this.getObservableScope()),VP.unsubscribe.apply(this,e)},observable:function(){var e=VP.makeArray(arguments);return e.unshift(this.getObservableScope()),VP.observable.apply(this,e)},clearObservable:function(){var e=VP.makeArray(arguments);return e.unshift(this.getObservableScope()),VP.clearObservable.apply(this,e)},dependentObservable:function(){var e=VP.makeArray(arguments);return e.unshift(this.getObservableScope()),VP.dependentObservable.apply(this,e)},getType:function(){},getFieldType:function(){return""},getBaseFieldType:function(){var e=null,t=this.constructor.ancestor.prototype;return t&&t.getFieldType&&(e=t.getFieldType()),e},isContainer:function(){return!1},isRequired:function(){var e=!1;if("boolean"==typeof this.schema.required&&(e=this.schema.required),this.parent&&this.parent.schema.required&&VP.isArray(this.parent.schema.required)){var t=this.parent.schema.required;if(t)for(var n=0;n<t.length;n++)if(t[n]===this.propertyId){e=!0;break}}return e},getTitle:function(){},getDescription:function(){},getSchemaOfSchema:function(){var e={title:this.getTitle(),description:this.getDescription(),type:"object",properties:{title:{title:"Title",description:"Short description of the property.",type:"string"},description:{title:"Description",description:"Detailed description of the property.",type:"string"},readonly:{title:"Readonly",description:"Indicates that the field is read-only.  A read-only field cannot have it's value changed.  Read-only fields render in a grayed-out or disabled control.  If the field is rendered using a view with the <code>displayReadonly</code> attribute set to false, the read-only field will not appear.",type:"boolean",default:!1},required:{title:"Required",description:"Indicates whether the field's value is required.  If set to true, the field must take on a valid value and cannnot be left empty or unassigned.",type:"boolean",default:!1},default:{title:"Default",description:"The default value to be assigned for this property.  If the data for the field is empty or not provided, this default value will be plugged in for you.  Specify a default value when you want to pre-populate the field's value ahead of time.",type:"any"},type:{title:"Type",description:"Data type of the property.",type:"string",readonly:!0},format:{title:"Format",description:"Data format of the property.",type:"string"},disallow:{title:"Disallowed Values",description:"List of disallowed values for the property.",type:"array"},dependencies:{title:"Dependencies",description:"List of property dependencies.",type:"array"}}};return this.getType&&!VP.isValEmpty(this.getType())&&(e.properties.type.default=this.getType(),e.properties.type.enum=[this.getType()]),e},getSchemaOfOptions:function(){var e={title:"Options for "+this.getTitle(),description:this.getDescription()+" (Options)",type:"object",properties:{form:{},id:{title:"Field Id",description:"Unique field id. Auto-generated if not provided.",type:"string"},type:{title:"Field Type",description:"Field type.",type:"string",default:this.getFieldType(),readonly:!0},validate:{title:"Validation",description:"Field validation is required if true.",type:"boolean",default:!0},showMessages:{title:"Show Messages",description:"Display validation messages if true.",type:"boolean",default:!0},disabled:{title:"Disabled",description:"Field will be disabled if true.",type:"boolean",default:!1},readonly:{title:"Readonly",description:"Field will be readonly if true.",type:"boolean",default:!1},hidden:{title:"Hidden",description:"Field will be hidden if true.",type:"boolean",default:!1},label:{title:"Label",description:"Field label.",type:"string"},helper:{title:"Helper",description:"Field help message.",type:"string"},helpers:{title:"Helpers",description:"An array of field help messages.  Each message will be displayed on it's own line.",type:"array",items:{type:"string"}},fieldClass:{title:"CSS class",description:"Specifies one or more CSS classes that should be applied to the dom element for this field once it is rendered.  Supports a single value, comma-delimited values, space-delimited values or values passed in as an array.",type:"string"},hideInitValidationError:{title:"Hide Initial Validation Errors",description:"Hide initial validation errors if true.",type:"boolean",default:!1},focus:{title:"Focus",description:"If true, the initial focus for the form will be set to the first child element (usually the first field in the form).  If a field name or path is provided, then the specified child field will receive focus.  For example, you might set focus to 'name' (selecting the 'name' field) or you might set it to 'client/name' which picks the 'name' field on the 'client' object.",type:"boolean",default:!0},optionLabels:{title:"Enumerated Value Labels",description:"An array of string labels for items in the enum array",type:"array"},view:{title:"Override of the view for this field",description:"Allows for this field to be rendered with a different view (such as 'display')",type:"string"}}};return this.isTopLevel()?e.properties.form={title:"Form",description:"Options for rendering the FORM tag.",type:"object",properties:{attributes:{title:"Form Attributes",description:"List of attributes for the FORM tag.",type:"object",properties:{id:{title:"Id",description:"Unique form id. Auto-generated if not provided.",type:"string"},action:{title:"Action",description:"Form submission endpoint",type:"string"},method:{title:"Method",description:"Form submission method",enum:["post","get"],type:"string"},rubyrails:{title:"Ruby On Rails",description:"Ruby on Rails Name Standard",enum:["true","false"],type:"string"},name:{title:"Name",description:"Form name",type:"string"},focus:{title:"Focus",description:"Focus Setting",type:"any"}}},buttons:{title:"Form Buttons",description:"Configuration for form-bound buttons",type:"object",properties:{submit:{type:"object",title:"Submit Button",required:!1},reset:{type:"object",title:"Reset button",required:!1}}},toggleSubmitValidState:{title:"Toggle Submit Valid State",description:"Toggle the validity state of the Submit button",type:"boolean",default:!0}}}:delete e.properties.form,e}}),dT=jQuery,eT=dT.alpaca,eT.ControlField=eT.Field.extend({onConstruct:function(){var n=this;this.isControlField=!0,this._getControlVal=function(e){var t=null;return this.control&&(t=dT(this.control).val(),e&&(t=n.ensureProperType(t))),t}},setup:function(){this.base();var e=this.resolveControlTemplateType();if(!e)return eT.throwErrorWithCallback("Unable to find template descriptor for control: "+this.getFieldType());if(this.controlDescriptor=this.view.getTemplateDescriptor("control-"+e,this),void 0===this.options.renderButtons&&(this.options.renderButtons=!0),this.options.buttons)for(var t in this.options.buttons)this.options.buttons[t].label&&(this.options.buttons[t].value=this.options.buttons[t].label),this.options.buttons[t].title&&(this.options.buttons[t].value=this.options.buttons[t].title),this.options.buttons[t].type||(this.options.buttons[t].type="button"),this.options.buttons[t].styles||(this.options.buttons[t].styles=this.view.styles.button)},getControlEl:function(){return this.control},resolveControlTemplateType:function(){var e=!1,t=null,n=this;do{if(n.getFieldType)this.view.getTemplateDescriptor("control-"+n.getFieldType(),this)?(t=n.getFieldType(),e=!0):n=n.constructor.ancestor.prototype;else e=!0}while(!e);return t},onSetup:function(){},isAutoFocusable:function(){return!0},getTemplateDescriptorId:function(){return"control"},renderFieldElements:function(n){var i=this;eT.logDebug("acioina MARKER1: "+dT(this.field)[0].innerHTML),this.control=dT(this.field).find("."+eT.MARKER_CLASS_CONTROL_FIELD),this.control.removeClass(eT.MARKER_CLASS_CONTROL_FIELD),i.prepareControlModel(function(t){i.beforeRenderControl(t,function(){i.renderControl(t,function(e){e&&(i.control.replaceWith(e),i.control=e,i.control.addClass(eT.CLASS_CONTROL)),i.fireCallback("control"),i.afterRenderControl(t,function(){n()})})})})},prepareControlModel:function(e){var t={};t.id=this.getId(),t.name=this.name,t.options=this.options,t.schema=this.schema,t.data=this.data,t.required=this.isRequired(),t.view=this.view,e(t)},beforeRenderControl:function(e,t){t()},afterRenderControl:function(e,t){var r=this;r.firstUpdateObservableFire||void 0===r.data||null==r.data||(r.firstUpdateObservableFire=!0,r.updateObservable()),dT(this.getFieldEl()).find(".alpaca-control-button").each(function(){dT(this).click(function(e){dT(this).attr("button-pushed",!0)});var t,n,e=dT(this).attr("data-key");if(e){var i=r.options.buttons[e];i&&i.click&&dT(this).click((t=r,n=i.click,function(e){e.preventDefault(),n.call(t,e)}))}}),t()},renderControl:function(e,t){var n=null;this.controlDescriptor&&(n=eT.tmpl(this.controlDescriptor,e)),t(n)},postRender:function(e){this.base(function(){e()})},updateDOMElement:function(){this.base(),this.control.attr("name",this.getName())},setDefault:function(){var e=eT.isEmpty(this.schema.default)?"":this.schema.default;this.setValue(e)},getValue:function(){var e=this.base();return this.isDisplayOnly()||(e=this.getControlValue()),e=this.ensureProperType(e)},getControlValue:function(){return this._getControlVal(!0)},_validateEnum:function(){if(this.schema.enum){var e=this.getValue();return!this.isRequired()&&eT.isValEmpty(e)?!0:-1<dT.inArray(e,this.schema.enum)}return!0},handleValidate:function(){var e=this.base(),t=this.validation,n=this._validateEnum();return t.invalidValueOfEnum={message:n?"":this.getMessage("invalidValueOfEnum"),status:n},e&&t.invalidValueOfEnum.status},initEvents:function(){this.base(),this.control&&0<this.control.length&&this.initControlEvents()},initControlEvents:function(){var n=this,e=this.control;e.click(function(e){n.onClick.call(n,e),n.trigger("click",e)}),e.change(function(e){setTimeout(function(){n.onChange.call(n,e),n.triggerWithPropagation("change",e)},250)}),e.focus(function(e){if(n.wasFocused=!0,!n.suspendBlurFocus){var t=n.onFocus.call(n,e);return!1!==t&&(t=n.trigger("focus",e)),t}}),e.blur(function(e){if(n.wasBlurred=!0,!n.suspendBlurFocus){var t=n.onBlur.call(n,e);return!1!==t&&(t=n.trigger("blur",e)),t}}),e.keypress(function(e){var t=n.onKeyPress.call(n,e);return!1!==t&&(t=n.trigger("keypress",e)),t}),e.keyup(function(e){var t=n.onKeyUp.call(n,e);return!1!==t&&(t=n.trigger("keyup",e)),t}),e.keydown(function(e){var t=n.onKeyDown.call(n,e);return!1!==t&&(t=n.trigger("keydown",e)),t})},onKeyPress:function(e){var t=this,n=!1;t.view.type&&"edit"===t.view.type&&(this.isValid()||(n=!0));n&&window.setTimeout(function(){t.refreshValidationState()},50)},onKeyDown:function(e){},onKeyUp:function(e){},onClick:function(e){},disable:function(){this.base(),this.control&&0<this.control.length&&dT(this.control).prop("disabled",!0)},enable:function(){this.base(),this.control&&0<this.control.length&&dT(this.control).prop("disabled",!1)},getSchemaOfSchema:function(){return eT.merge(this.base(),{properties:{enum:{title:"Enumerated Values",description:"List of specific values for this property",type:"array"}}})},getSchemaOfOptions:function(){return eT.merge(this.base(),{properties:{name:{title:"Field Name",description:"Field Name.",type:"string"}}})}}),nU=jQuery,oU=nU.alpaca,oU.ContainerField=oU.Field.extend({onConstruct:function(){this.isContainerField=!0},isContainer:function(){return!0},getContainerEl:function(){return this.container},getTemplateDescriptorId:function(){return"container"},resolveContainerTemplateType:function(){var e=!1,t=null,n=this;do{if(n.getFieldType)this.view.getTemplateDescriptor("container-"+n.getFieldType(),this)?(t=n.getFieldType(),e=!0):n=n.constructor.ancestor.prototype;else e=!0}while(!e);return t},resolveContainerItemTemplateType:function(){var e=!1,t=null,n=this;do{if(n.getFieldType)this.view.getTemplateDescriptor("container-"+n.getFieldType()+"-item",this)?(t=n.getFieldType(),e=!0):n=n.constructor.ancestor.prototype;else e=!0}while(!e);return t},setup:function(){this.base();var e=this.resolveContainerTemplateType();if(!e)return oU.throwErrorWithCallback("Unable to find template descriptor for container: "+this.getFieldType());this.containerDescriptor=this.view.getTemplateDescriptor("container-"+e,this);var t=!0;oU.isEmpty(this.view.collapsible)||(t=this.view.collapsible),oU.isEmpty(this.options.collapsible)||(t=this.options.collapsible),this.options.collapsible=t;var n="button";oU.isEmpty(this.view.legendStyle)||(n=this.view.legendStyle),oU.isEmpty(this.options.legendStyle)||(n=this.options.legendStyle),this.options.legendStyle=n,this.lazyLoading=!1,oU.isEmpty(this.options.lazyLoading)||(this.lazyLoading=this.options.lazyLoading,this.lazyLoading&&(this.options.collapsed=!0)),this.children=[],this.childrenById={},this.childrenByPropertyId={}},destroy:function(){this.form&&(this.form.destroy(!0),delete this.form),oU.each(this.children,function(){this.destroy()}),this.base()},renderFieldElements:function(n){var i=this;oU.logDebug("acioina MARKER2: "+nU(this.field)[0].innerHTML),this.container=nU(this.field).find("."+oU.MARKER_CLASS_CONTAINER_FIELD),this.container.removeClass(oU.MARKER_CLASS_CONTAINER_FIELD),i.prepareContainerModel(function(t){i.beforeRenderContainer(t,function(){i.renderContainer(t,function(e){e&&(i.container.replaceWith(e),i.container=e,i.container.addClass(oU.CLASS_CONTAINER)),i.view.horizontal?i.container.addClass("alpaca-horizontal"):i.container.addClass("alpaca-vertical"),i.fireCallback("container"),i.afterRenderContainer(t,function(){n()})})})})},prepareContainerModel:function(t){var n={id:this.getId(),name:this.name,schema:this.schema,options:this.options,view:this.view};this.createItems(function(e){e=e||[],n.items=e,t(n)})},beforeRenderContainer:function(e,t){t()},renderContainer:function(e,t){var n=null;this.containerDescriptor&&(n=oU.tmpl(this.containerDescriptor,e)),t(n)},afterRenderContainer:function(e,t){var n=this;n.beforeApplyCreatedItems(e,function(){n.applyCreatedItems(e,function(){n.afterApplyCreatedItems(e,function(){t()})})})},postRender:function(e){this.base(function(){e()})},initEvents:function(){this.base()},createItems:function(e){e()},beforeApplyCreatedItems:function(e,t){t()},applyCreatedItems:function(e,t){var n=this;if(oU.logDebug("acioina MARKER3: "+nU(n.container)[0].innerHTML),0<e.items.length){nU(n.container).addClass("alpaca-container-has-items"),nU(n.container).attr("data-alpaca-container-item-count",e.items.length);for(var i,r,a,o,l,s,u,c,p,d,h=[],f=[],m=[],y=[],g=[],v=0;v<e.items.length;v++)o=e.items[v],a=nU(o.containerItemEl)[0].innerHTML,f[o.name]=v,h[o.name]=v,c=a.indexOf('-alpaca-field-name="'+o.name+'"'),p=a.substring(0,c).lastIndexOf("<"),d=a.substring(p).indexOf(">"),r=(i=a.substring(p,d+p+1)).substring(i.indexOf('-id="alpaca')+11),y[v]=parseInt(r.substring(0,r.indexOf('"')),10),m[o.name]=y[v],g[v]=-1,oU.logDebug("acioina MARKER3: innerHTML = "+a),oU.logDebug("acioina MARKER3: ss = "+i);for(v=0;v<e.items.length;v++){l=y[v];for(var b=v+1;b<e.items.length;b++)l>y[b]&&(l=y[b],y[b]=y[v],y[v]=l)}for(v=0;v<e.items.length;v++)for(b=0;b<e.items.length;b++)if(y[v]==m[e.items[b].name]){g[v]=e.items[b].name;break}for(v=0,b=0;v<e.items.length;)if(o=e.items[v],s=nU(n.container).find("."+oU.MARKER_CLASS_CONTAINER_FIELD_ITEM+"["+oU.MARKER_DATA_CONTAINER_FIELD_ITEM_KEY+"='"+o.name+"']"),u=nU(s).parent(),f[g[v]]!=v)for(nU(u).children().eq(f[g[v]]).insertBefore(nU(u).children().eq(v)),1<f[g[v]]-v&&nU(u).children().eq(v+1).insertAfter(nU(u).children().eq(f[g[v]])),b=0;b<e.items.length;){if(f[g[b]]===v){f[g[b]]=f[g[v]],f[g[v]]=v,v++;break}b++}else v++;for(v=0;v<e.items.length;v++){o=e.items[h[g[v]]],oU.logDebug("acioina MARKER3: name "+v+"  "+o.name),s=nU(n.container).find("."+oU.MARKER_CLASS_CONTAINER_FIELD_ITEM+"["+oU.MARKER_DATA_CONTAINER_FIELD_ITEM_KEY+"='"+o.name+"']");var O=nU(s).parent();nU(s).replaceWith(o.containerItemEl),o.domEl=O,nU(o.containerItemEl).addClass("alpaca-container-item"),0===v&&nU(o.containerItemEl).addClass("alpaca-container-item-first"),v+1===e.items.length&&nU(o.containerItemEl).addClass("alpaca-container-item-last"),nU(o.containerItemEl).attr("data-alpaca-container-item-index",v),nU(o.containerItemEl).attr("data-alpaca-container-item-name",o.name),nU(o.containerItemEl).attr("data-alpaca-container-item-parent-field-id",n.getId()),n.registerChild(o,v)}}else nU(n.container).removeClass("alpaca-container-has-items"),nU(n.container).removeAttr("data-alpaca-container-item-count");n.options.collapsible&&n.fireCallback("collapsible"),n.triggerUpdate(),t()},afterApplyCreatedItems:function(e,t){t()},registerChild:function(e,t){oU.isEmpty(t)?this.children.push(e):this.children.splice(t,0,e),(this.childrenById[e.getId()]=e).propertyId&&(this.childrenByPropertyId[e.propertyId]=e),e.parent=this},unregisterChild:function(e){var t=this.children[e];t&&(oU.isEmpty(e)||this.children.splice(e,1),delete this.childrenById[t.getId()],t.propertyId&&delete this.childrenByPropertyId[t.propertyId],t.parent=null)},updateDOMElement:function(){var e=this;this.base(),0<e.children.length?(nU(e.getContainerEl()).addClass("alpaca-container-has-items"),nU(e.getContainerEl()).attr("data-alpaca-container-item-count",e.children.length)):(nU(e.getContainerEl()).removeClass("alpaca-container-has-items"),nU(e.getContainerEl()).removeAttr("data-alpaca-container-item-count"));for(var t=0;t<e.children.length;t++){var n=e.children[t];n.path||("array"===n.schema.type?n.path=e.path+"["+t+"]":n.path=e.path+"/"+n.propertyId),n.calculateName(),nU(n.containerItemEl).removeClass("alpaca-container-item-first"),nU(n.containerItemEl).removeClass("alpaca-container-item-last"),nU(n.containerItemEl).removeClass("alpaca-container-item-index"),nU(n.containerItemEl).removeClass("alpaca-container-item-key"),nU(n.containerItemEl).addClass("alpaca-container-item"),0===t&&nU(n.containerItemEl).addClass("alpaca-container-item-first"),t+1===e.children.length&&nU(n.containerItemEl).addClass("alpaca-container-item-last"),nU(n.containerItemEl).attr("data-alpaca-container-item-index",t),nU(n.containerItemEl).attr("data-alpaca-container-item-name",n.name),nU(n.containerItemEl).attr("data-alpaca-container-item-parent-field-id",e.getId()),n.updateDOMElement()}},handleRepositionDOMRefresh:function(){this.getParent()?this.getParent().updateDOMElement():this.updateDOMElement()},onDependentReveal:function(){for(var e=0;e<this.children.length;e++)this.children[e].onDependentReveal()},onDependentConceal:function(){for(var e=0;e<this.children.length;e++)this.children[e].onDependentConceal()},focus:function(e){var t=this;this.base();var n=-1,i=new Array(this.children.length),r=this.getContainerEl();this.form&&(r=this.form.getFormEl());var a=0;nU(r).find(".alpaca-container-item[data-alpaca-container-item-parent-field-id='"+this.getId()+"']").each(function(){var e=nU(this).attr("data-alpaca-container-item-index");i[a]=t.children[e],a++});for(var o=0;o<i.length;o++)if(i[o]&&!i[o].isValid(!0)&&i[o].isControlField&&i[o].isAutoFocusable()&&!i[o].options.readonly){n=o;break}-1===n&&0<i.length&&(n=0),-1<n&&(i[n].focus(),e&&e(i[n]))},disable:function(){this.base();for(var e=0;e<this.children.length;e++)this.children[e].disable()},enable:function(){this.base();for(var e=0;e<this.children.length;e++)this.children[e].enable()},getValue:function(){var e=this.getContainerValue();return this.isDisplayOnly()&&(e=e&&JSON.stringify(e,null,"  ")),e},getContainerValue:function(){return null},firstChild:function(){var e=null;return 0<this.children.length&&(e=this.children[0]),e},lastChild:function(){var e=null;return 0<this.children.length&&(e=this.children[this.children.length-1]),e},getSchemaOfOptions:function(){return oU.merge(this.base(),{properties:{lazyLoading:{title:"Lazy Loading",description:"Child fields will only be rendered when the fieldset is expanded if this option is set true.",type:"boolean",default:!1},collapsible:{title:"Collapsible",description:"Field set is collapsible if true.",type:"boolean",default:!0},collapsed:{title:"Collapsed",description:"Field set is initially collapsed if true.",type:"boolean",default:!1},legendStyle:{title:"Legend Style",description:"Field set legend style.",type:"string",enum:["button","link"],default:"button"},animate:{title:"Animate movements and transitions",description:"Up and down transitions will be animated",type:"boolean",default:!0}}})}}),TV=jQuery,UV=TV.alpaca,UV.Form=Base.extend({constructor:function(e,t,n,i,r){if(this.domEl=e,this.parent=null,this.connector=i,this.errorCallback=r,this.options=t,this.options.attributes?this.attributes=this.options.attributes:this.attributes={},this.options.buttons)for(var a in this.options.buttons.submit&&(this.options.buttons.submit.type||(this.options.buttons.submit.type="submit"),this.options.buttons.submit.name||(this.options.buttons.submit.name="submit"),this.options.buttons.submit.value||(this.options.buttons.submit.value="Submit")),this.options.buttons.reset&&(this.options.buttons.reset.type||(this.options.buttons.reset.type="reset"),this.options.buttons.reset.name||(this.options.buttons.reset.name="reset"),this.options.buttons.reset.value||(this.options.buttons.reset.value="Reset")),this.options.buttons)this.options.buttons[a].label&&(this.options.buttons[a].value=this.options.buttons[a].label),this.options.buttons[a].title&&(this.options.buttons[a].value=this.options.buttons[a].title),this.options.buttons[a].type||(this.options.buttons[a].type="button");for(var a in this.attributes.id?this.id=this.attributes.id:(this.id=UV.generateId(),this.attributes.id=this.id),UV.isUndefined(this.options.toggleSubmitValidState)&&(this.options.buttons&&this.options.buttons.submit?this.options.toggleSubmitValidState=!0:this.options.toggleSubmitValidState=!1),this.viewType=t.viewType,this.view=new UV.RuntimeView(n,this),this.options.buttons)this.options.buttons[a].styles||(this.options.buttons[a].styles=this.view.styles.button)},render:function(e){var t=this;this.form&&this.form.remove(),this.processRender(this.domEl,function(){t.form.appendTo(t.container),t.form.addClass("alpaca-form"),t.fireFormCallback("form"),e(t)})},afterInitialize:function(){this.options.toggleSubmitValidState&&this.adjustSubmitButtonState()},isFormValid:function(){return this.topControl.validate(!0),this.topControl.isValid(!0)},isValid:function(){return this.isFormValid()},validate:function(e){return this.topControl.validate(e)},enableSubmitButton:function(){if(TV(".alpaca-form-button-submit").attrProp("disabled",!1),TV.mobile)try{TV(".alpaca-form-button-submit").button("refresh")}catch(e){}},disableSubmitButton:function(){if(TV(".alpaca-form-button-submit").attrProp("disabled",!0),TV.mobile)try{TV(".alpaca-form-button-submit").button("refresh")}catch(e){}},adjustSubmitButtonState:function(){this.disableSubmitButton(),this.isFormValid()&&this.enableSubmitButton()},processRender:function(e,t){var r=this;if(this.formDescriptor=this.view.getTemplateDescriptor("form"),!this.formDescriptor)return UV.throwErrorWithCallback("Could not find template descriptor: form");var n=UV.tmpl(this.formDescriptor,{id:this.getId(),options:this.options,view:this.view});n.appendTo(e),this.form=n,UV.logDebug("acioina MARKER4: "+TV(this.form)[0].innerHTML),this.formFieldsContainer=TV(this.form).find("."+UV.MARKER_CLASS_FORM_ITEMS_FIELD),this.formFieldsContainer.removeClass(UV.MARKER_CLASS_FORM_ITEMS_FIELD),UV.isEmpty(this.form.attr("id"))&&this.form.attr("id",this.getId()+"-form-outer"),UV.isEmpty(this.form.attr("data-alpaca-form-id"))&&this.form.attr("data-alpaca-form-id",this.getId()),TV(e).find("form").attr(this.attributes),this.buttons={},TV(e).find(".alpaca-form-button").each(function(){TV(this).click(function(e){TV(this).attr("button-pushed",!0)});var t,n,e=TV(this).attr("data-key");if(e){var i=r.options.buttons[e];i&&i.click&&TV(this).click((t=r,n=i.click,function(e){e.preventDefault(),n.call(t,e)}))}}),t()},getId:function(){return this.id},getType:function(){return this.type},getParent:function(){return this.parent},getValue:function(){return this.topControl.getValue()},setValue:function(e){this.topControl.setValue(e)},initEvents:function(){var t=this,e=TV(this.domEl).find("form"),n=this.getValue();TV(e).submit(n,function(e){return t.onSubmit(e,t)}),this.options.toggleSubmitValidState&&(TV(t.topControl.getFieldEl()).bind("fieldupdate",function(){t.adjustSubmitButtonState()}),TV(t.topControl.getFieldEl()).bind("fieldkeyup",function(){t.adjustSubmitButtonState()}),TV(t.topControl.getFieldEl()).bind("fieldblur",function(){t.adjustSubmitButtonState()}))},getButtonEl:function(e){return TV(this.domEl).find(".alpaca-form-button-"+e)},onSubmit:function(e,t){if(!this.isFormValid())return e.stopPropagation(),this.refreshValidationState(!0),!1;if(this.submitHandler){e.stopPropagation();var n=this.submitHandler(e,t);return UV.isUndefined(n)&&(n=!1),n}},registerSubmitHandler:function(e){UV.isFunction(e)&&(this.submitHandler=e)},refreshValidationState:function(e,t){this.topControl.refreshValidationState(e,t)},disable:function(){this.topControl.disable()},enable:function(){this.topControl.enable()},focus:function(t){this.topControl.focus(function(e){t&&t(e)})},destroy:function(e){this.getFormEl().remove(),!e&&this.parent&&this.parent.destroy()},show:function(){this.getFormEl().css({display:""})},hide:function(){this.getFormEl().css({display:"none"})},clear:function(e){this.topControl.clear(e)},isEmpty:function(){return this.topControl.isEmpty()},fireFormCallback:function(e,t,n,i,r,a){this.view.fireCallback(this,e,t,n,i,r,a)},getFormEl:function(){return this.form},submit:function(){this.form.submit()},determineCsrfToken:function(){var e=UV.CSRF_TOKEN;if(!e)for(var t=0;t<UV.CSRF_COOKIE_NAMES.length;t++){var n=UV.CSRF_COOKIE_NAMES[t],i=UV.readCookie(n);if(i){e=i;break}}return e}}),function(){var f=jQuery.alpaca;f.Connector=Base.extend({constructor:function(e,t){this.id=e,this.config=t,this.isUri=function(e){return!f.isEmpty(e)&&f.isUri(e)},this.cache=new n("URL",!0,36e5)},connect:function(e,t){e()},loadTemplate:function(e,t,n){f.isEmpty(e)?n({message:"Empty data source.",reason:"TEMPLATE_LOADING_ERROR"}):f.isUri(e)||t(e)},loadData:function(e,t,n,i){return this._handleLoadJsonResource(e,n,i)},loadSchema:function(e,t,n,i){return this._handleLoadJsonResource(e,n,i)},loadOptions:function(e,t,n,i){return this._handleLoadJsonResource(e,n,i)},loadView:function(e,t,n,i){return this._handleLoadJsonResource(e,n,i)},loadAll:function(c,p,d){var h=this;h.connect(function(){var e=c.dataSource,t=c.schemaSource,n=c.optionsSource,i=c.viewSource;t||"string"!=typeof c.schema||(t=c.schema),n||"string"!=typeof c.options||(n=c.options),i||"string"!=typeof c.view||(i=c.view);function r(){l===s&&p&&f.isFunction(p)&&p(o.data,o.options,o.schema,o.view)}function a(e){d&&f.isFunction(d)&&d(e)}var o={},l=0,s=0;if(e&&s++,t&&s++,n&&s++,i&&s++,0!==s){function u(e,t,n){o[e]=t,n&&("object"==typeof o[e]&&"object"==typeof n?f.mergeObject(o[e],n):o[e]=n)}e&&h.loadData(e,c,function(e){u("data",c.data,e),l++,r()},a),t&&h.loadSchema(t,c,function(e){u("schema",c.schema,e),l++,r()},a),n&&h.loadOptions(n,c,function(e){u("options",c.options,e),l++,r()},a),i&&h.loadView(i,c,function(e){u("view",c.view,e),l++,r()},a)}else r()},function(e){d&&f.isFunction(d)&&d(e)})},buildAjaxConfig:function(e,t){var n={url:e,type:"get"};return n.dataType=t?"json":"text",n},loadReferenceSchema:function(e,t,n){return this._handleLoadJsonResource(e,t,n)},loadReferenceOptions:function(e,t,n){return this._handleLoadJsonResource(e,t,n)},_handleLoadJsonResource:function(e,t,n){this.isUri(e)||t(e)}}),f.registerConnectorClass("default",f.Connector);var n=function(e,t,n){switch(this.on=!!t,null!=n&&(this.defaultLifetime=n),this.type=e,this.type){case"URL":this.put=this.put_url;break;case"GET":this.put=this.put_GET}};n.prototype.on=!1,n.prototype.type=void 0,n.prototype.defaultLifetime=18e5,n.prototype.items={},n.prototype.put_url=function(e,t,n){null==n&&(n=this.defaultLifetime);var i=this.make_key(e);return this.items[i]={},this.items[i].key=i,this.items[i].url=e,this.items[i].response=t,this.items[i].expire=(new Date).getTime()+n,!0},n.prototype.put_GET=function(e,t,n,i){null==i&&(i=this.defaultLifetime);var r=this.make_key(e,[t]);return this.items[r]={},this.items[r].key=r,this.items[r].url=e,this.items[r].data=t,this.items[r].response=n,this.items[r].expire=(new Date).getTime()+i,!0},n.prototype.get=function(e,t){var n=this.make_key(e,t);return null!=this.items[n]&&(!(this.items[n].expire<(new Date).getTime())&&this.items[n].response)},n.prototype.make_key=function(e,t){var n=e;switch(this.type){case"URL":break;case"GET":n+=this.stringify(t[0])}return n},n.prototype.flush=function(){return cache.items={},!0},n.prototype.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return this.str("",{"":e})},n.prototype.quote=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},n.prototype.str=function(e,t){var n,i,r,a,o,l=gap,s=t[e];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),"function"==typeof rep&&(s=rep.call(t,e,s)),typeof s){case"string":return this.quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(s)){for(a=s.length,n=0;n<a;n+=1)o[n]=this.str(n,s)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+l+"]":"["+o.join(",")+"]",gap=l,r}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof(i=rep[n])&&(r=this.str(i,s))&&o.push(this.quote(i)+(gap?": ":":")+r);else for(i in s)Object.hasOwnProperty.call(s,i)&&(r=this.str(i,s))&&o.push(this.quote(i)+(gap?": ":":")+r);return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+l+"}":"{"+o.join(",")+"}",gap=l,r}}}(),JY=jQuery,KY=JY.alpaca,KY.Fields.TextField=KY.ControlField.extend({getFieldType:function(){return"text"},setup:function(){if(this.base(),this.inputType||(this.inputType="text"),this.options.inputType&&(this.inputType=this.options.inputType),this.options.data||(this.options.data={}),this.options.attributes||(this.options.attributes={}),void 0===this.options.allowOptionalEmpty&&(this.options.allowOptionalEmpty=!0),this.options.autocomplete&&"string"==typeof this.options.autocomplete&&("on"===this.options.autocomplete.toLowerCase()||"true"===this.options.autocomplete.toLowerCase()||"yes"===this.options.autocomplete.toLowerCase()?this.options.autocomplete=!0:this.options.autocomplete=!1),void 0===this.options.autocomplete&&(this.options.autocomplete=!1),void 0===this.options.disallowEmptySpaces&&(this.options.disallowEmptySpaces=!1),void 0===this.options.disallowOnlyEmptySpaces&&(this.options.disallowOnlyEmptySpaces=!1),this.schema.pattern&&KY.isString(this.schema.pattern)){var e=new RegExp(this.schema.pattern);this.schema.pattern=e}},destroy:function(){this.base(),this.control&&this.control.typeahead&&this.options.typeahead&&JY(this.control).typeahead("destroy")},postRender:function(e){var t=this;this.base(function(){t.control&&(t.applyAutocomplete(),t.applyMask(),t.applyTypeAhead(),t.updateMaxLengthIndicator()),e()})},applyAutocomplete:function(){var e=this;void 0!==e.options.autocomplete&&(JY(e.field).addClass("alpaca-autocomplete"),JY(e.control).attr("autocomplete",e.options.autocomplete?"on":"off"),e.fireCallback("autocomplete"))},applyMask:function(){this.control.mask&&this.options.maskString&&this.control.mask(this.options.maskString)},applyTypeAhead:function(){var n=this;if(n.control.typeahead&&n.options.typeahead&&!KY.isEmpty(n.options.typeahead)){var e=n.options.typeahead.config;e=e||{};var t=n.options.typeahead.datasets;(t=t||{}).name||(t.name=n.getId());var i=n.options.typeahead.events;if(i=i||{},"local"===t.type||"remote"===t.type||"prefetch"===t.type){var r={datumTokenizer:function(e){var t="";for(var n in e)(e.hasOwnProperty(n)||e[n])&&(t+=" "+e[n]);return Bloodhound.tokenizers.whitespace(t)},queryTokenizer:Bloodhound.tokenizers.whitespace};if("local"===t.type){var a=[];if("function"==typeof t.source)r.local=t.source;else{for(var o=0;o<t.source.length;o++){var l=t.source[o];"string"==typeof l&&(l={value:l}),a.push(l)}r.local=a}t.local&&(r.local=t.local)}"prefetch"===t.type&&(r.prefetch={url:t.source},t.filter&&(r.prefetch.filter=t.filter)),"remote"===t.type&&(r.remote={url:t.source},t.filter&&(r.remote.filter=t.filter),t.replace&&(r.remote.replace=t.replace));var s=new Bloodhound(r);s.initialize(),t.source=s.ttAdapter()}if(t.templates)for(var u in t.templates){var c=t.templates[u];"string"==typeof c&&(t.templates[u]=Handlebars.compile(c))}JY(n.control).typeahead(e,t),JY(n.control).on("typeahead:autocompleted",function(e,t){n.setValue(t.value),JY(n.control).change()}),JY(n.control).on("typeahead:selected",function(e,t){n.setValue(t.value),JY(n.control).change()}),i&&(i.autocompleted&&JY(n.control).on("typeahead:autocompleted",function(e,t){i.autocompleted(e,t)}),i.selected&&JY(n.control).on("typeahead:selected",function(e,t){i.selected(e,t)}));var p=JY(n.control);JY(n.control).change(function(){var e=JY(this).val(),t=JY(p).typeahead("val");t!==e&&JY(p).typeahead("val",t)}),JY(n.field).find("span.twitter-typeahead").first().css("display","block"),JY(n.field).find("span.twitter-typeahead input.tt-input").first().css("background-color","")}},prepareControlModel:function(t){var n=this;this.base(function(e){e.inputType=n.inputType,t(e)})},updateMaxLengthIndicator:function(){var e=this,t=!1,n="";if(!KY.isEmpty(e.schema.maxLength)&&e.options.showMaxLengthIndicator){var i=e.getValue()||"",r=e.schema.maxLength-i.length;0<=r?n=KY.substituteTokens(e.getMessage("updateMaxLengthIndicatorMessage1"),[r,e.schema.maxLength]):(n=KY.substituteTokens(e.getMessage("updateMaxLengthIndicatorMessage2"),[-1*r]),t=!0);var a=JY(e.field).find(".alpaca-field-text-max-length-indicator");0===a.length&&(a=JY("<p class='alpaca-field-text-max-length-indicator'></p>"),JY(e.control).after(a)),JY(a).html(n),JY(a).removeClass("err"),t&&JY(a).addClass("err")}},getControlValue:function(){var e=this._getControlVal(!0);if(this.control.mask&&this.options.maskString){var t=JY(this.control).data(JY.mask.dataName);t&&(e=t(),e=this.ensureProperType(e))}return e},setValue:function(e){this.control&&0<this.control.length&&(KY.isEmpty(e)?this.control.val(""):this.control.val(e)),this.base(e),this.updateMaxLengthIndicator()},handleValidate:function(){var e=this.base(),t=this.validation,n=this._validatePattern();return t.invalidPattern={message:n?"":KY.substituteTokens(this.getMessage("invalidPattern"),[this.schema.pattern,this.schema.title]),status:n},n=this._validateMaxLength(),t.stringTooLong={message:n?"":KY.substituteTokens(this.getMessage("stringTooLong"),[this.schema.maxLength]),status:n},n=this._validateMinLength(),t.stringTooShort={message:n?"":KY.substituteTokens(this.getMessage("stringTooShort"),[this.schema.minLength]),status:n},e&&t.invalidPattern.status&&t.stringTooLong.status&&t.stringTooShort.status},_validatePattern:function(){if(this.schema.pattern){var e=this.getValue();if(""===e&&this.options.allowOptionalEmpty&&!this.isRequired())return!0;if(KY.isEmpty(e)&&(e=""),!e.match(this.schema.pattern))return!1}return!0},_validateMinLength:function(){if(!KY.isEmpty(this.schema.minLength)){var e=this.getValue();if(""===e&&this.options.allowOptionalEmpty&&!this.isRequired())return!0;if(KY.isEmpty(e)&&(e=""),e.length<this.schema.minLength)return!1}return!0},_validateMaxLength:function(){if(!KY.isEmpty(this.schema.maxLength)){var e=this.getValue();if(""===e&&this.options.allowOptionalEmpty&&!this.isRequired())return!0;if(KY.isEmpty(e)&&(e=""),e.length>this.schema.maxLength)return!1}return!0},focus:function(e){if(this.control&&0<this.control.length){var t=JY(this.control).get(0);try{var n=t.value?t.value.length:0;t.selectionStart=n,t.selectionEnd=n}catch(e){}t.focus(),e&&e(this)}},getType:function(){return"string"},onKeyPress:function(e){var t=this;if(9!==e.keyCode&&37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode){if(8===e.keyCode){if(!KY.isEmpty(t.schema.minLength)&&(t.options.constrainLengths||t.options.constrainMinLength))(t.getValue()||"").length<=t.schema.minLength&&(e.preventDefault(),e.stopImmediatePropagation())}else if(!KY.isEmpty(t.schema.maxLength)&&(t.options.constrainLengths||t.options.constrainMaxLength))(t.getValue()||"").length>=t.schema.maxLength&&(e.preventDefault(),e.stopImmediatePropagation());32===e.keyCode&&t.options.disallowEmptySpaces&&(e.preventDefault(),e.stopImmediatePropagation())}},onKeyUp:function(e){this.updateMaxLengthIndicator(),JY(this.field).trigger("fieldkeyup")},getTitle:function(){return"Single-Line Text"},getDescription:function(){return"Text field for single-line text."},getSchemaOfSchema:function(){return KY.merge(this.base(),{properties:{minLength:{title:"Minimal Length",description:"Minimal length of the property value.",type:"number"},maxLength:{title:"Maximum Length",description:"Maximum length of the property value.",type:"number"},pattern:{title:"Pattern",description:"Regular expression for the property value.",type:"string"}}})},getSchemaOfOptions:function(){return KY.merge(this.base(),{properties:{size:{title:"Field Size",description:"Field size.",type:"number",default:40},maskString:{title:"Mask Expression",description:"Expression for the field mask. Field masking will be enabled if not empty.",type:"string"},placeholder:{title:"Field Placeholder",description:"Field placeholder.",type:"string"},typeahead:{title:"Type Ahead",description:"Provides configuration for the $.typeahead plugin if it is available.  For full configuration options, see: https://github.com/twitter/typeahead.js"},allowOptionalEmpty:{title:"Allow Optional Empty",description:"Allows this non-required field to validate when the value is empty"},inputType:{title:"HTML5 Input Type",description:"Allows for the override of the underlying HTML5 input type.  If not specified, an assumed value is provided based on the kind of input control (i.e. 'text', 'date', 'email' and so forth)",type:"string"},data:{title:"Data attributes for the underlying DOM input control",description:"Allows you to specify a key/value map of data attributes that will be added as DOM attribuets for the underlying input control.  The data attributes will be added as data-{name}='{value}'.",type:"object"},autocomplete:{title:"HTML autocomplete attribute for the underlying DOM input control",description:"Allows you to specify the autocomplete attribute for the underlying input control whether or not field should have autocomplete enabled.",type:"string"},disallowEmptySpaces:{title:"Disallow Empty Spaces",description:"Whether to disallow the entry of empty spaces in the text",type:"boolean",default:!1},disallowOnlyEmptySpaces:{title:"Disallow Only Empty Spaces",description:"Whether to disallow the entry of only empty spaces in the text",type:"boolean",default:!1}}})}}),KY.registerFieldClass("text",KY.Fields.TextField),KY.registerDefaultSchemaFieldMapping("string","text"),QZ=jQuery.alpaca,QZ.Fields.TextAreaField=QZ.Fields.TextField.extend({getFieldType:function(){return"textarea"},setup:function(){this.base(),this.options.rows||(this.options.rows=5),this.options.cols||(this.options.cols=40)},handleValidate:function(){var e=this.base(),t=this.validation,n=this._validateWordCount();return t.wordLimitExceeded={message:n?"":QZ.substituteTokens(this.getMessage("wordLimitExceeded"),[this.options.wordlimit]),status:n},e&&t.wordLimitExceeded.status},_validateWordCount:function(){if(this.options.wordlimit&&-1<this.options.wordlimit){var e=this.data;if(e)if(e.split(" ").length>this.options.wordlimit)return!1}return!0},getTitle:function(){return"Multi-Line Text"},getDescription:function(){return"Textarea field for multiple line text."},getSchemaOfOptions:function(){return QZ.merge(this.base(),{properties:{rows:{title:"Rows",description:"Number of rows",type:"number",default:5},cols:{title:"Columns",description:"Number of columns",type:"number",default:40},wordlimit:{title:"Word Limit",description:"Limits the number of words allowed in the text area.",type:"number",default:-1}}})}}),QZ.registerFieldClass("textarea",QZ.Fields.TextAreaField),XZ=jQuery.alpaca,XZ.Fields.UpperCaseField=XZ.Fields.TextField.extend({getFieldType:function(){return"uppercase"},setup:function(){this.base(),this.data&&(this.data=this.data.toUpperCase())},setValue:function(e){var t=null;e&&XZ.isString(e)&&(t=e.toUpperCase()),t!=this.getValue()&&this.base(t)},onKeyPress:function(e){this.base(e);var t=this;XZ.later(25,this,function(){var e=t.getValue();t.setValue(e)})},getTitle:function(){return"Uppercase Text"},getDescription:function(){return"Text field for uppercase text."}}),XZ.registerFieldClass("uppercase",XZ.Fields.UpperCaseField),XZ.registerDefaultFormatFieldMapping("uppercase","uppercase"),d$=jQuery.alpaca,d$.Fields.LowerCaseField=d$.Fields.TextField.extend({getFieldType:function(){return"lowercase"},setup:function(){this.base(),this.data&&(this.data=this.data.toLowerCase())},setValue:function(e){var t=e.toLowerCase();t!=this.getValue()&&this.base(t)},onKeyPress:function(e){this.base(e);var t=this;d$.later(25,this,function(){var e=t.getValue();t.setValue(e)})},getTitle:function(){return"Lowercase Text"},getDescription:function(){return"Text field for lowercase text."}}),d$.registerFieldClass("lowercase",d$.Fields.LowerCaseField),d$.registerDefaultFormatFieldMapping("lowercase","lowercase"),k$=jQuery,l$=k$.alpaca,l$.Fields.TagField=l$.Fields.LowerCaseField.extend({getFieldType:function(){return"tag"},setup:function(){this.base(),this.options.separator||(this.options.separator=",")},getControlValue:function(){var e=this.base();return""===e?[]:e.split(this.options.separator)},setValue:function(e){""!==e&&(e?this.base(e.join(this.options.separator)):this.base(""))},onBlur:function(e){this.base(e);var t=this.getValue(),n=[];k$.each(t,function(e,t){""!==t.trim()&&n.push(t.trim())}),this.setValue(n)},getTitle:function(){return"Tag Field"},getDescription:function(){return"Text field for entering list of tags separated by delimiter."},getSchemaOfOptions:function(){return l$.merge(this.base(),{properties:{separator:{title:"Separator",description:"Separator used to split tags.",type:"string",default:","}}})}}),l$.registerFieldClass("tag",l$.Fields.TagField),u$=jQuery.alpaca,u$.Fields.EmailField=u$.Fields.TextField.extend({getFieldType:function(){return"email"},setup:function(){this.inputType="email",this.base(),this.schema.pattern||(this.schema.pattern=u$.regexps.email)},handleValidate:function(){var e=this.base(),t=this.validation;return t.invalidPattern.status||(t.invalidPattern.message=this.getMessage("invalidEmail")),e},getTitle:function(){return"Email Field"},getDescription:function(){return"Email Field."},getSchemaOfSchema:function(){var e=this.schema&&this.schema.pattern?this.schema.pattern:u$.regexps.email;return u$.merge(this.base(),{properties:{pattern:{title:"Pattern",description:"Field Pattern in Regular Expression",type:"string",default:e,enum:[e],readonly:!0},format:{title:"Format",description:"Property data format",type:"string",default:"email",enum:["email"],readonly:!0}}})}}),u$.registerFieldClass("email",u$.Fields.EmailField),u$.registerDefaultFormatFieldMapping("email","email"),z$=jQuery.alpaca,z$.Fields.DateField=z$.Fields.TextField.extend({setup:function(){var e=this;if(this.inputType="tel",this.base(),e.schema.pattern){if(z$.isString(e.schema.pattern)){var t=new RegExp(e.schema.pattern);e.schema.pattern=t}}else e.schema.pattern=z$.regexps.date;z$.isEmpty(e.options.maskString)&&(e.options.maskString="99/99/9999"),z$.isEmpty(this.options.dateFormat)&&(e.options.dateFormat=e.getDefaultFormat())},handleValidate:function(){var e=this.base(),t=this.validation,n=!0,i=this.options.placeholder?this.options.placeholder:this.options.dateFormat;return t.invalidPattern.status?(n=this._validateDateFormat(),t.stringNotADate={message:n?"":z$.substituteTokens(this.getMessage("stringNotADate"),[i]),status:n}):(t.invalidPattern.message=z$.substituteTokens(this.getMessage("invalidDate"),[i]),t.stringNotADate={message:"",status:!0}),e&&n},_validateDateFormat:function(){var e=!0;if(this.options.dateFormat){var t=this.getValue();(t||this.isRequired())&&(e=moment(t,this.options.dateFormat,!0).isValid())}return e},setValue:function(e){moment(e,this.options.dateFormat,!0).isValid()?this.base(e):this.base("")},getFieldType:function(){return"date"},getTitle:function(){return"Date Field"},getDescription:function(){return"Date Field."},getDefaultFormat:function(){return"MMDDYYYY"},getSchemaOfSchema:function(){var e=this.schema&&this.schema.pattern?this.schema.pattern:z$.regexps.date;return z$.merge(this.base(),{properties:{pattern:{title:"Pattern",description:"Field Pattern in Regular Expression",type:"string",default:e,enum:[e]},format:{title:"Format",description:"Property data format",type:"string",default:"date",enum:["date"]}}})},getSchemaOfOptions:function(){return z$.merge(this.base(),{properties:{dateFormat:{title:"Date Format",description:"Date format (using moment.js format)",type:"string"},maskString:{title:"Field Mask String",description:"Expression for field mask",type:"string",default:"99/99/9999"},isBetween:{title:"Verify if the date is between two dates",description:"Uses mement isBetween function with four parameters.",type:"array",items:{type:"string"}}}})}}),z$.registerFieldClass("date",z$.Fields.DateField),z$.registerDefaultFormatFieldMapping("date","date"),N$=jQuery.alpaca,N$.Fields.PhoneField=N$.Fields.TextField.extend({setup:function(){var e=this;if(this.inputType="tel",this.base(),e.schema.pattern){if(N$.isString(e.schema.pattern)){var t=new RegExp(e.schema.pattern);e.schema.pattern=t}}else e.schema.pattern=N$.regexps.phone;N$.isEmpty(e.options.maskString)&&(e.options.maskString="(999) 999-9999")},handleValidate:function(){var e=this.base(),t=this.validation,n=this.options.placeholder?this.options.placeholder:this.options.maskString;return t.invalidPattern.status||(t.invalidPattern.message=N$.substituteTokens(this.getMessage("invalidPhone"),[n])),e},getFieldType:function(){return"phone"},getTitle:function(){return"Phone Field"},getDescription:function(){return"Phone Field."},getSchemaOfSchema:function(){var e=this.schema&&this.schema.pattern?this.schema.pattern:N$.regexps.phone;return N$.merge(this.base(),{properties:{pattern:{title:"Pattern",description:"Field Pattern in Regular Expression",type:"string",default:e,enum:[e]},format:{title:"Format",description:"Property data format",type:"string",default:"phone",enum:["phone"]}}})},getSchemaOfOptions:function(){return N$.merge(this.base(),{properties:{maskString:{title:"Field Mask String",description:"Expression for field mask",type:"string",default:"(999) 999-9999"}}})}}),N$.registerFieldClass("phone",N$.Fields.PhoneField),N$.registerDefaultFormatFieldMapping("phone","phone"),V$=jQuery.alpaca,V$.Fields.PasswordField=V$.Fields.TextField.extend({getFieldType:function(){return"password"},setup:function(){this.base(),this.schema.pattern||(this.schema.pattern=V$.regexps.password)},handleValidate:function(){var e=this.base(),t=this.validation;return t.invalidPattern.status||(t.invalidPattern.message=this.getMessage("invalidPassword")),e},getTitle:function(){return"Password Field"},getDescription:function(){return"Password Field."},getSchemaOfSchema:function(){var e=this.schema&&this.schema.pattern?this.schema.pattern:V$.regexps.password;return V$.merge(this.base(),{properties:{pattern:{title:"Pattern",description:"Field Pattern in Regular Expression",type:"string",default:e,enum:[e],readonly:!0},format:{title:"Format",description:"Property data format",type:"string",default:"password",enum:["password"],readonly:!0}}})}}),V$.registerFieldClass("password",V$.Fields.PasswordField),V$.registerDefaultFormatFieldMapping("password","password"),Z$=jQuery,$$=Z$.alpaca,$$.Fields.NumberField=$$.Fields.TextField.extend({setup:function(){this.base(),void 0===this.options.numericEntry&&(this.options.numericEntry=!1)},getFieldType:function(){return"number"},postRender:function(e){var i=this;this.base(function(){i.control&&i.on("keypress",function(e){var t=e.charCode||e.keyCode||0,n=!0;return i.options.numericEntry&&(n=n&&48<=t&&t<=57),n}),e()})},getControlValue:function(){var e=this._getControlVal(!0);return void 0===e||""===e?e:parseFloat(e)},handleValidate:function(){var e=this.base(),t=this.validation,n=this._validateNumber();t.stringNotANumber={message:n?"":this.getMessage("stringNotANumber"),status:!!n},2===n&&(t.notOptional.status=!0,t.notOptional.message="");var i=2===n||this._validateDivisibleBy();return t.stringDivisibleBy={message:i?"":$$.substituteTokens(this.getMessage("stringDivisibleBy"),[this.schema.divisibleBy]),status:i},i=2===n||this._validateMaximum(),t.stringValueTooLarge={message:"",status:i},i||(this.schema.exclusiveMaximum?t.stringValueTooLarge.message=$$.substituteTokens(this.getMessage("stringValueTooLargeExclusive"),[this.schema.maximum]):t.stringValueTooLarge.message=$$.substituteTokens(this.getMessage("stringValueTooLarge"),[this.schema.maximum])),i=2===n||this._validateMinimum(),t.stringValueTooSmall={message:"",status:i},i||(this.schema.exclusiveMinimum?t.stringValueTooSmall.message=$$.substituteTokens(this.getMessage("stringValueTooSmallExclusive"),[this.schema.minimum]):t.stringValueTooSmall.message=$$.substituteTokens(this.getMessage("stringValueTooSmall"),[this.schema.minimum])),i=2===n||this._validateMultipleOf(),t.stringValueNotMultipleOf={message:"",status:i},i||(t.stringValueNotMultipleOf.message=$$.substituteTokens(this.getMessage("stringValueNotMultipleOf"),[this.schema.multipleOf])),e&&t.stringNotANumber.status&&t.invalidPattern.status&&t.stringDivisibleBy.status&&t.stringValueTooLarge.status&&t.stringValueTooSmall.status&&t.stringValueNotMultipleOf.status&&t.stringTooLong.status&&t.stringTooShort.status},_validateNumber:function(){var e=this._getControlVal();if("number"==typeof e&&(e=""+e),$$.isValEmpty(e))return!0;if(!e.match($$.regexps.number))return!1;var t=this.getValue();if(isNaN(t)){if(!$$.isValEmpty(this.options.maskString)){var n=e.replace(/_/g,"");if($$.isValEmpty(n))return!0;if(n.match(/^([0-9]\d*)$/))return 2}return!1}return!0},_validateDivisibleBy:function(){var e=this.getValue();return!(!$$.isEmpty(this.schema.divisibleBy)&&e%this.schema.divisibleBy!=0)},_validateMaximum:function(){var e=this.getValue();if(!$$.isEmpty(this.schema.maximum)){if(e>this.schema.maximum)return!1;if(!$$.isEmpty(this.schema.exclusiveMaximum)&&e==this.schema.maximum&&this.schema.exclusiveMaximum)return!1}return!0},_validateMinimum:function(){var e=this.getValue();if(!$$.isEmpty(this.schema.minimum)){if(e<this.schema.minimum)return!1;if(!$$.isEmpty(this.schema.exclusiveMinimum)&&e==this.schema.minimum&&this.schema.exclusiveMinimum)return!1}return!0},_validateMultipleOf:function(){var e=this.getValue();return!(!$$.isEmpty(this.schema.multipleOf)&&e&&0!==this.schema.multipleOf)},_validatePattern:function(){if(this.schema.pattern){var e=this.getValue();if($$.isNumber(e)&&(e=e.toString()),""===e&&this.options.allowOptionalEmpty&&!this.isRequired())return!0;if($$.isEmpty(e)&&(e=""),!e.match(this.schema.pattern))return!1}return!0},_validateMinLength:function(){if(!$$.isEmpty(this.schema.minLength)){var e=this.getValue();if($$.isNumber(e)&&(e=e.toString()),""===e&&this.options.allowOptionalEmpty&&!this.isRequired())return!0;if($$.isEmpty(e)&&(e=""),e.length<this.schema.minLength)return!1}return!0},_validateMaxLength:function(){if(!$$.isEmpty(this.schema.maxLength)){var e=this.getValue();if($$.isNumber(e)&&(e=e.toString()),""===e&&this.options.allowOptionalEmpty&&!this.isRequired())return!0;if($$.isEmpty(e)&&(e=""),e.length>this.schema.maxLength)return!1}return!0},getType:function(){return"number"},onKeyDown:function(e){var t=this;if(9!==e.keyCode&&37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode){if(8===e.keyCode){if(!$$.isEmpty(t.schema.minLength)&&(t.options.constrainLengths||t.options.constrainMinLength)){var n=t.getValue()||"";$$.isNumber(n)&&(n=n.toString()),n.length<=t.schema.minLength&&(e.preventDefault(),e.stopImmediatePropagation())}}else if(!$$.isEmpty(t.schema.maxLength)&&(t.options.constrainLengths||t.options.constrainMaxLength)){n=t.getValue()||"";$$.isNumber(n)&&(n=n.toString()),n.length>=t.schema.maxLength&&(e.preventDefault(),e.stopImmediatePropagation())}32===e.keyCode&&t.options.disallowEmptySpaces&&(e.preventDefault(),e.stopImmediatePropagation())}},onKeyUp:function(e){this.updateMaxLengthIndicator(),Z$(this.field).trigger("fieldkeyup")},getSchemaOfSchema:function(){return $$.merge(this.base(),{properties:{multipleOf:{title:"Multiple Of",description:"Property value must be a multiple of the multipleOf schema property such that division by this value yields an interger (mod zero).",type:"number"},minimum:{title:"Minimum",description:"Minimum value of the property.",type:"number"},maximum:{title:"Maximum",description:"Maximum value of the property.",type:"number"},exclusiveMinimum:{title:"Exclusive Minimum",description:"Property value can not equal the number defined by the minimum schema property.",type:"boolean",default:!1},exclusiveMaximum:{title:"Exclusive Maximum",description:"Property value can not equal the number defined by the maximum schema property.",type:"boolean",default:!1}}})},getSchemaOfOptions:function(){return $$.merge(this.base(),{properties:{numericEntry:{title:"Numeric Entry",description:"Whether to constrain data entry key presses to numeric values (0-9)",type:"boolean",default:!1}}})},getTitle:function(){return"Number Field"},getDescription:function(){return"Field for float numbers."}}),$$.registerFieldClass("number",$$.Fields.NumberField),$$.registerDefaultSchemaFieldMapping("number","number"),z_=jQuery,A_=z_.alpaca,A_.Fields.IntegerField=A_.Fields.NumberField.extend({getFieldType:function(){return"integer"},getControlValue:function(){var e=this.base();return void 0===e||""===e?e:parseInt(e,10)},onChange:function(e){this.base(),this.slider&&this.slider.slider("value",this.getValue())},postRender:function(e){var n=this;this.base(function(){n.options.slider&&(A_.isEmpty(n.schema.maximum)||A_.isEmpty(n.schema.minimum)||n.control&&(n.control.after('<div id="slider"></div>'),n.slider=z_("#slider",n.control.parent()).slider({value:n.getValue(),min:n.schema.minimum,max:n.schema.maximum,slide:function(e,t){n.setValue(t.value),n.refreshValidationState()}}))),e()})},handleValidate:function(){var e=this.base(),t=this.validation,n=this._validateInteger();return t.stringNotANumber={message:n?"":this.getMessage("stringNotAnInteger"),status:n},e},_validateInteger:function(){var e=this._getControlVal();if("number"==typeof e&&(e=""+e),A_.isValEmpty(e))return!0;if(!e.match(A_.regexps.integer))return!1;var t=this.getValue();return!isNaN(t)},getType:function(){return"integer"},getTitle:function(){return"Integer Field"},getDescription:function(){return"Field for integers."},getSchemaOfSchema:function(){return A_.merge(this.base(),{properties:{minimum:{title:"Minimum",description:"Minimum value of the property.",type:"integer"},maximum:{title:"Maximum",description:"Maximum value of the property.",type:"integer"},divisibleBy:{title:"Divisible By",description:"Property value must be divisible by this number.",type:"integer"}}})},getSchemaOfOptions:function(){return A_.merge(this.base(),{properties:{slider:{title:"Slider",description:"Generate jQuery UI slider control with the field if true.",type:"boolean",default:!1}}})}}),A_.registerFieldClass("integer",A_.Fields.IntegerField),A_.registerDefaultSchemaFieldMapping("integer","integer"),N_=jQuery,O_=N_.alpaca,O_.Fields.CheckBoxField=O_.ControlField.extend({getFieldType:function(){return"checkbox"},setup:function(){var i=this;i.base(),this.options.rightLabel||(this.options.rightLabel=""),void 0!==i.options.multiple||"array"!==i.schema.type&&void 0===i.schema.enum||(i.options.multiple=!0),i.checkboxOptions=[],i.options.multiple&&N_.each(i.getEnum(),function(e,t){var n=t;i.options.optionLabels&&(O_.isEmpty(i.options.optionLabels[e])?O_.isEmpty(i.options.optionLabels[t])||(n=i.options.optionLabels[t]):n=i.options.optionLabels[e]),i.checkboxOptions.push({value:t,text:n})})},getEnum:function(){var e=[];return this.schema&&this.schema.enum&&(e=this.schema.enum),e},onClick:function(e){this.refreshValidationState()},prepareControlModel:function(t){var n=this;this.base(function(e){e.checkboxOptions=n.checkboxOptions,t(e)})},postRender:function(i){var r=this;this.base(function(){if(r.data&&void 0!==r.data&&r.setValue(r.data),r.options.multiple&&(N_(r.getFieldEl()).find("input:checkbox").prop("checked",!1),r.data)){var e=r.data;if("string"==typeof r.data){e=r.data.split(",");for(var t=0;t<e.length;t++)e[t]=N_.trim(e[t])}for(var n in e)N_(r.getFieldEl()).find('input:checkbox[data-checkbox-value="'+e[n]+'"]').prop("checked",!0)}i()})},getControlValue:function(){var e=this,t=null;if(e.options.multiple){for(var n=[],i=0;i<e.checkboxOptions.length;i++){var r=N_(e.getFieldEl()).find("input[data-checkbox-index='"+i+"']");if(O_.checked(r)){var a=N_(r).attr("data-checkbox-value");n.push(a)}}"array"===e.schema.type?t=n:"string"===e.schema.type&&(t=n.join(","))}else{var o=N_(e.getFieldEl()).find("input");t=0<o.length&&O_.checked(N_(o[0]))}return t},setValue:function(r){function e(e){O_.isString(e)&&(e="true"===e);var t=N_(a.getFieldEl()).find("input");0<t.length&&O_.checked(N_(t[0]),e)}function t(e){"string"==typeof e&&(e=e.split(","));for(var t=0;t<e.length;t++)e[t]=O_.trim(e[t]);O_.checked(N_(a.getFieldEl()).find("input[data-checkbox-value]"),!1);for(var n=0;n<e.length;n++){var i=N_(a.getFieldEl()).find('input[data-checkbox-value="'+e[n]+'"]');0<i.length&&O_.checked(N_(i[0]),r)}}var a=this,n=!1;a.options.multiple?"string"!=typeof r&&!O_.isArray(r)||(t(r),n=!0):"boolean"!=typeof r&&"string"!=typeof r||(e(r),n=!0),!n&&r&&O_.logError("CheckboxField cannot set value for schema.type="+a.schema.type+" and value="+r),this.base(r)},_validateEnum:function(){if(!this.options.multiple)return!0;var e=this.getValue();return!(this.isRequired()||!O_.isValEmpty(e))||("string"==typeof e&&(e=e.split(",")),O_.anyEquality(e,this.schema.enum))},disable:function(){N_(this.control).find("input").each(function(){N_(this).disabled=!0,N_(this).prop("disabled",!0)})},enable:function(){N_(this.control).find("input").each(function(){N_(this).disabled=!1,N_(this).prop("disabled",!1)})},getType:function(){return"boolean"},getTitle:function(){return"Checkbox Field"},getDescription:function(){return"Checkbox Field for boolean (true/false), string ('true', 'false' or comma-delimited string of values) or data array."},getSchemaOfOptions:function(){return O_.merge(this.base(),{properties:{rightLabel:{title:"Option Label",description:"Optional right-hand side label for single checkbox field.",type:"string"},multiple:{title:"Multiple",description:"Whether to render multiple checkboxes for multi-valued type (such as an array or a comma-delimited string)",type:"boolean"}}})}}),O_.registerFieldClass("checkbox",O_.Fields.CheckBoxField),O_.registerDefaultSchemaFieldMapping("boolean","checkbox"),v0=jQuery,w0=v0.alpaca,w0.Fields.ObjectField=w0.ContainerField.extend({getFieldType:function(){return"object"},setup:function(){var e=this;this.base();var t=e.resolveContainerItemTemplateType();if(!t){e.resolveContainerItemTemplateType();return w0.throwErrorWithCallback("Unable to find template descriptor for container item: "+e.getFieldType())}if(this.containerItemTemplateDescriptor=e.view.getTemplateDescriptor("container-"+t+"-item",e),!w0.isEmpty(this.data)&&""!==this.data&&!w0.isObject(this.data)){if(!w0.isString(this.data))return;try{if(this.data=w0.parseJSON(this.data),!w0.isObject(this.data))return void w0.logWarn("ObjectField parsed data but it was not an object: "+JSON.stringify(this.data))}catch(e){return}}},setValue:function(e){if(e=e||{},w0.isObject(e)){var t={};for(var n in this.childrenById){t[a=this.childrenById[n].propertyId]=this.childrenById[n]}var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);for(var a in i){(o=t[a])&&(o.setValue(i[a]),delete t[a],delete i[a])}for(var a in t){var o;(o=t[a]).setValue(null)}}},getContainerValue:function(){if(0===this.children.length&&!this.isRequired())return{};for(var e={},t=0;t<this.children.length;t++){var n=this.children[t].propertyId,i=this.children[t].getValue();if(void 0!==i&&this.determineAllDependenciesValid(n)){var r=null;"boolean"==typeof i?r=!!i:(w0.isArray(i)||w0.isObject(i)||w0.isNumber(i)||i||0===i)&&(r=i),null!==r&&(e[n]=r)}}return e},afterRenderContainer:function(e,t){this.base(e,function(){t()})},createItems:function(t){var l=this,s=[],e={};for(var n in l.data)e[n]=n;var i=l.data;l.schema&&l.schema.properties&&(i=l.schema.properties);var r=[];for(var a in i){var o=null;l.data&&l.data.hasOwnProperty(a)&&(o=l.data[a]);var u=function(r,a,o){return function(i){l.resolvePropertySchemaOptions(r,function(e,t,n){if(n)return w0.throwErrorWithCallback("Circular reference detected for schema: "+JSON.stringify(e),_this.errorCallback);e||w0.logDebug("Unable to resolve schema for property: "+r),l.createItem(r,e,t,a,null,function(e){s.push(e),delete o[r],w0.nextTick(function(){i()})})})}}(a,o,e);r.push(u)}w0.series(r,function(e){t(s)})},createItem:function(n,e,t,i,r,a){var o=this;v0("<div></div>").alpaca({data:i,options:t,schema:e,view:this.view.id?this.view.id:this.view,connector:this.connector,error:function(e){o.destroy(),o.errorCallback.call(o,e)},notTopLevel:!0,render:function(e,t){e.parent=o,e.propertyId=n,"/"!==o.path?e.path=o.path+"/"+n:e.path=o.path+n,e.render(null,function(){t()})},postRender:function(e){var t=w0.tmpl(o.containerItemTemplateDescriptor,{id:o.getId(),name:e.name,parentFieldId:o.getId(),actionbarStyle:o.options.actionbarStyle,view:o.view,data:i});w0.logDebug("acioina MARKER6: "+v0(t)[0].innerHTML);var n=v0(t).find("."+w0.MARKER_CLASS_CONTAINER_FIELD_ITEM_FIELD);0===n.length&&v0(t).hasClass(w0.MARKER_CLASS_CONTAINER_FIELD_ITEM_FIELD)&&(n=v0(t)),0!==n.length?(v0(n).before(e.getFieldEl()),v0(n).remove(),e.containerItemEl=t,w0.fieldApplyFieldAndChildren(e,function(e){e.hideInitValidationError=!1}),a&&a(e)):o.errorCallback.call(o,{message:"Cannot find insertion point for field: "+o.getId()})}})},resolvePropertySchemaOptions:function(e,i){function l(e,t,n){r.options.readonly&&(t.readonly=!0),i(e,t,n)}var r=this,t=null;r.schema&&r.schema.properties&&r.schema.properties[e]&&(t=r.schema.properties[e]);var n={};if(r.options&&r.options.fields&&r.options.fields[e]&&(n=r.options.fields[e]),t&&t.$ref){for(var s=t.$ref,a=this,u=[a];a.parent;)a=a.parent,u.push(a);var c=t,p=n;w0.loadRefSchemaOptions(a,s,function(e,t){for(var n=0,i=0;i<u.length;i++)!u[i].schema||u[i].schema.id!==s&&u[i].schema.id!=="#"+s&&u[i].schema.$ref!==s||n++;var r=1<n,a={};c&&w0.mergeObject(a,c),e&&w0.mergeObject(a,e),c&&c.id&&(a.id=c.id);var o={};p&&w0.mergeObject(o,p),t&&w0.mergeObject(o,t),w0.nextTick(function(){l(a,o,r)})})}else w0.nextTick(function(){l(t,n)})},applyCreatedItems:function(i,r){var a=this;this.base(i,function(){var n=function(e){if(e!==i.items.length){var t=i.items[e].propertyId;a.showOrHidePropertyBasedOnDependencies(t),a.bindDependencyFieldUpdateEvent(t),a.refreshDependentFieldStates(t),n(e+1)}else r()};n(0)})},handleValidate:function(){var e=this.base(),t=this.validation,n=this._validateMaxProperties();return t.tooManyProperties={message:n?"":w0.substituteTokens(this.getMessage("tooManyProperties"),[this.schema.maxProperties]),status:n},n=this._validateMinProperties(),t.tooFewProperties={message:n?"":w0.substituteTokens(this.getMessage("tooManyItems"),[this.schema.items.minProperties]),status:n},e&&t.tooManyProperties.status&&t.tooFewProperties.status},_validateMaxProperties:function(){if(void 0===this.schema.maxProperties)return!0;var e=this.schema.maxProperties,t=0;for(var n in this.data)t++;return t<=e},_validateMinProperties:function(){if(void 0===this.schema.minProperties)return!0;var e=this.schema.minProperties,t=0;for(var n in this.data)t++;return e<=t},showOrHidePropertyBasedOnDependencies:function(e){var t=this.childrenByPropertyId[e];if(!t)return w0.throwErrorWithCallback("Missing property: "+e,this.errorCallback);this.determineAllDependenciesValid(e)?(t.show(),t.onDependentReveal()):(t.hide(),t.onDependentConceal()),t.getFieldEl().trigger("fieldupdate")},determineAllDependenciesValid:function(n){var i=this,e=this.childrenByPropertyId[n];if(!e)return w0.throwErrorWithCallback("Missing property: "+n,i.errorCallback);var t=e.schema.dependencies;if(!t)return!0;var r=!0;return w0.isString(t)?r=i.determineSingleDependencyValid(n,t):w0.isArray(t)&&v0.each(t,function(e,t){r=r&&i.determineSingleDependencyValid(n,t)}),r},bindDependencyFieldUpdateEvent:function(n){var a=this,o=this.childrenByPropertyId[n];if(!o)return w0.throwErrorWithCallback("Missing property: "+n,a.errorCallback);var e=o.schema.dependencies;if(!e)return!0;function i(e,t){var n,i,r=w0.resolveField(a,t);r&&(r.getFieldEl().bind("fieldupdate",(n=o,i=e,function(e){a.showOrHidePropertyBasedOnDependencies(i),n.getFieldEl().trigger("fieldupdate")})),r.getFieldEl().trigger("fieldupdate"))}w0.isString(e)?i(n,e):w0.isArray(e)&&v0.each(e,function(e,t){i(n,t)})},refreshDependentFieldStates:function(e){var n=this,t=this.childrenByPropertyId[e];if(!t)return w0.throwErrorWithCallback("Missing property: "+e,n.errorCallback);var i=t.schema.dependencies;if(!i)return!0;function r(e){var t=w0.resolveField(n,e);t&&t.getFieldEl().trigger("fieldupdate")}w0.isString(i)?r(i):w0.isArray(i)&&v0.each(i,function(e,t){r(t)})},determineSingleDependencyValid:function(e,t){var n=w0.resolveField(this,t);if(!n)return!1;var i=n.data,r=!1,a=this.childrenByPropertyId[e].options.dependencies;if(a&&0!==a.length){"boolean"!==n.getType()||i||(i=!1);var o=a[t];!w0.isEmpty(o)&&w0.isFunction(o)?r=o.call(this,i):(r=!0,w0.isArray(o)?w0.anyEquality(i,o)||(r=!1):w0.isEmpty(o)||w0.anyEquality(o,i)||(r=!1))}else r=!("boolean"===n.getType()&&!this.childrenByPropertyId[e].options.dependencies&&!i)&&!w0.isValEmpty(n.data);return n&&n.isHidden()&&(r=!1),r},getIndex:function(e){if(w0.isEmpty(e))return-1;for(var t=0;t<this.children.length;t++){if(this.children[t].propertyId==e)return t}return-1},addItem:function(e,t,n,i,r,a){var o=this;this.createItem(e,t,n,i,r,function(e){var t=null;if(r&&o.childrenById[r])for(var n=0;n<o.children.length;n++)if(o.children[n].getId()==r){t=n;break}o.registerChild(e,null!=t?t+1:null),o.doAddItem(t,e),o.handleRepositionDOMRefresh(),o.refreshValidationState(!0,function(){o.trigger("add",e),o.triggerUpdate(),a&&a()})})},doAddItem:function(e,t){if(e){var n=this.getContainerEl().children("[data-alpaca-container-item-index='"+e+"']");n&&0<n.length&&n.after(t.containerItemEl)}else v0(this.container).append(t.containerItemEl);this.doAfterAddItem(t)},doAfterAddItem:function(e){},doResolveItemContainer:function(){return v0(this.container)},removeItem:function(n,e){var t=this,i=this.childrenByPropertyId[n];i?(this.children=v0.grep(this.children,function(e,t){return e.propertyId!==n}),delete this.childrenByPropertyId[n],delete this.childrenById[i.getId()],t.doRemoveItem(i),this.refreshValidationState(!0,function(){t.handleRepositionDOMRefresh(),t.trigger("remove",i),t.triggerUpdate(),e&&e()})):e()},doRemoveItem:function(e){this.doResolveItemContainer().children(".alpaca-container-item[data-alpaca-container-item-name='"+e.name+"']").remove(),e.destroy()},getType:function(){return"object"},moveItem:function(n,i,e,r){var a=this;if(("function"==typeof e&&(r=e,e=a.options.animate),void 0===e&&(e=!a.options.animate||a.options.animate),"string"==typeof n&&(n=parseInt(n,10)),"string"==typeof i&&(i=parseInt(i,10)),i<0&&(i=0),i>=a.children.length&&(i=a.children.length-1),-1!==i)&&a.children[i]){var o=a.getContainerEl().children("[data-alpaca-container-item-index='"+n+"']"),l=a.getContainerEl().children("[data-alpaca-container-item-index='"+i+"']"),s=v0("<div class='tempMarker1'></div>");o.before(s);var u=v0("<div class='tempMarker2'></div>");l.before(u);function t(){for(var e=[],t=0;t<a.children.length;t++)e[t]=t===n?a.children[i]:t===i?a.children[n]:a.children[t];a.children=e,s.replaceWith(l),u.replaceWith(o),a.handleRepositionDOMRefresh(),v0(o).find("[data-alpaca-array-actionbar-item-index='"+n+"']").attr("data-alpaca-array-actionbar-item-index",i),v0(l).find("[data-alpaca-array-actionbar-item-index='"+i+"']").attr("data-alpaca-array-actionbar-item-index",n),a.refreshValidationState(),a.triggerUpdate(),a.trigger("move"),r&&r()}e?w0.animatedSwap(o,l,500,function(){t()}):t()}},getTitle:function(){return"Object Field"},getDescription:function(){return"Object field for containing other fields"},getSchemaOfSchema:function(){var e={properties:{properties:{title:"Properties",description:"List of child properties.",type:"object"},maxProperties:{type:"number",title:"Maximum Number Properties",description:"The maximum number of properties that this object is allowed to have"},minProperties:{type:"number",title:"Minimum Number of Properties",description:"The minimum number of properties that this object is required to have"}}},t=e.properties.properties;if(t.properties={},this.children)for(var n=0;n<this.children.length;n++){var i=this.children[n].propertyId;t.properties[i]=this.children[n].getSchemaOfSchema(),t.properties[i].title=i+" :: "+t.properties[i].title}return w0.merge(this.base(),e)},getSchemaOfOptions:function(){var e=w0.merge(this.base(),{properties:{}}),t={properties:{fields:{title:"Field Options",description:"List of options for child fields.",type:"object"}}},n=t.properties.fields;if(n.properties={},this.children)for(var i=0;i<this.children.length;i++){var r=this.children[i].propertyId;n.properties[r]=this.children[i].getSchemaOfOptions(),n.properties[r].title=r+" :: "+n.properties[r].title}return w0.merge(e,t)}}),w0.registerFieldClass("object",w0.Fields.ObjectField),w0.registerDefaultSchemaFieldMapping("object","object"),T3=jQuery.alpaca,T3.Fields.AnyField=T3.ControlField.extend({getFieldType:function(){return"any"},setup:function(){this.base()},getControlValue:function(){return this._getControlVal(!0)},setValue:function(e){T3.isEmpty(e)?this.control.val(""):this.control.val(e),this.base(e)},disable:function(){this.control.disabled=!0},enable:function(){this.control.disabled=!1},focus:function(e){this.control.focus(),e&&e(this)},getType:function(){return"any"},getTitle:function(){return"Any Field"},getDescription:function(){return"Any field."},getSchemaOfSchema:function(){return T3.merge(this.base(),{properties:{}})},getSchemaOfOptions:function(){return T3.merge(this.base(),{properties:{}})}}),T3.registerFieldClass("any",T3.Fields.AnyField),T3.registerDefaultSchemaFieldMapping("any","any"),W3=jQuery,X3=W3.alpaca,X3.Fields.ListField=X3.ControlField.extend({setup:function(){var i=this;i.base(),i.selectOptions=[],i.getEnum()&&W3.each(i.getEnum(),function(e,t){var n=t;i.options.optionLabels&&(X3.isEmpty(i.options.optionLabels[e])?X3.isEmpty(i.options.optionLabels[t])||(n=i.options.optionLabels[t]):n=i.options.optionLabels[e]),i.selectOptions.push({value:t,text:n})}),i.isRequired()&&!i.data&&!0===i.options.removeDefaultNone&&i.schema.enum&&0<i.schema.enum.length&&(i.data=i.schema.enum[0])},prepareControlModel:function(t){var n=this;this.base(function(e){e.noneLabel=n.getMessage("noneLabel"),void 0!==n.options.noneLabel&&(e.noneLabel=n.options.noneLabel),e.hideNone=n.isRequired(),void 0!==n.options.removeDefaultNone&&(e.hideNone=n.options.removeDefaultNone),t(e)})},getEnum:function(){if(this.schema&&this.schema.enum)return this.schema.enum},convertValue:function(r){var e=this;return X3.isArray(r)?W3.each(r,function(n,i){W3.each(e.selectOptions,function(e,t){t.value===i&&(r[n]=t.value)})}):W3.each(this.selectOptions,function(e,t){t.value===r&&(r=t.value)}),r},beforeRenderControl:function(n,r){var a=this;this.base(n,function(){if(a.options.dataSource){a.selectOptions=[];function i(){a.schema.enum=[],a.options.optionLabels=[];for(var e=0;e<a.selectOptions.length;e++)a.schema.enum.push(a.selectOptions[e].value),a.options.optionLabels.push(a.selectOptions[e].text);n.selectOptions=a.selectOptions,r()}if(X3.isFunction(a.options.dataSource))a.options.dataSource.call(a,function(e){if(X3.isArray(e)){for(var t=0;t<e.length;t++)"string"==typeof e[t]?a.selectOptions.push({text:e[t],value:e[t]}):X3.isObject(e[t])&&a.selectOptions.push(e[t]);i()}else if(X3.isObject(e)){for(var n in e)a.selectOptions.push({text:n,value:e[n]});i()}else i()});else if(!X3.isUri(a.options.dataSource))if(X3.isArray(a.options.dataSource)){for(var e=0;e<a.options.dataSource.length;e++)"string"==typeof a.options.dataSource[e]?a.selectOptions.push({text:a.options.dataSource[e],value:a.options.dataSource[e]}):X3.isObject(a.options.dataSource[e])&&a.selectOptions.push(a.options.dataSource[e]);i()}else if(X3.isObject(a.options.dataSource)){for(var t in a.options.dataSource)a.selectOptions.push({text:a.options.dataSource[t],value:t});i()}else r()}else r()})},getSchemaOfSchema:function(){return X3.merge(this.base(),{properties:{enum:{title:"Enumeration",description:"List of field value options",type:"array",required:!0}}})},getSchemaOfOptions:function(){return X3.merge(this.base(),{properties:{optionLabels:{title:"Option Labels",description:"Labels for options. It can either be a map object or an array field that maps labels to items defined by enum schema property one by one.",type:"array"},dataSource:{title:"Option Datasource",description:"Datasource for generating list of options.  This can be a string or a function.  If a string, it is considered to be a URI to a service that produces a object containing key/value pairs or an array of elements of structure {'text': '', 'value': ''}.  This can also be a function that is called to produce the same list.",type:"string"},removeDefaultNone:{title:"Remove Default None",description:"If true, the default 'None' option will not be shown.",type:"boolean",default:!1},noneLabel:{title:"None Label",description:"The label to use for the 'None' option in a list (select, radio or otherwise).",type:"string",default:"None"},hideNone:{title:"Hide None",description:"Whether to hide the None option from a list (select, radio or otherwise).  This will be true if the field is required and false otherwise.",type:"boolean",default:!1}}})}}),v4=jQuery,w4=v4.alpaca,w4.Fields.RadioField=w4.Fields.ListField.extend({getFieldType:function(){return"radio"},setup:function(){this.base(),this.options.name?this.name=this.options.name:this.name||(this.name=this.getId()+"-name"),w4.isUndefined(this.options.emptySelectFirst)&&(this.options.emptySelectFirst=!1),w4.isUndefined(this.options.vertical)&&(this.options.vertical=!0)},getControlValue:function(){var e=this,t=null;return v4(this.control).find(":checked").each(function(){t=v4(this).val(),t=e.ensureProperType(t)}),t},setValue:function(e){v4(this.control).find("input").each(function(){w4.checked(v4(this),null)}),void 0!==e&&w4.checked(v4(this.control).find('input[value="'+e+'"]'),"checked"),this.options.emptySelectFirst&&0===v4(this.control).find("input:checked").length&&w4.checked(v4(this.control).find("input:radio").first(),"checked"),this.base(e)},initControlEvents:function(){var t=this;t.base();var e=v4(this.control).find("input");e.focus(function(e){t.suspendBlurFocus||(t.onFocus.call(t,e),t.trigger("focus",e))}),e.blur(function(e){t.suspendBlurFocus||(t.onBlur.call(t,e),t.trigger("blur",e))})},prepareControlModel:function(t){var n=this;this.base(function(e){e.selectOptions=n.selectOptions,e.removeDefaultNone=n.options.removeDefaultNone,t(e)})},afterRenderControl:function(e,t){var n=this;this.base(e,function(){n.options.emptySelectFirst&&n.selectOptions&&0<n.selectOptions.length&&(n.data=n.selectOptions[0].value,0===v4("input:radio:checked",n.control).length&&w4.checked(v4(n.control).find('input:radio[value="'+n.data+'"]'),"checked")),n.options.vertical?v4(n.control).css("display","block"):v4(n.control).css("display","inline-block"),t()})},onClick:function(e){var t=this.getValue();this.base(e);var n=v4(e.currentTarget).find("input").val();void 0!==n&&(this.setValue(n),this.refreshValidationState(),t!==n&&this.trigger("change"))},disable:function(){this.base(),this.getFieldEl().addClass("disabled")},enable:function(){this.base(),this.getFieldEl().removeClass("disabled")},getTitle:function(){return"Radio Group Field"},getDescription:function(){return"Radio Group Field with list of options."},getSchemaOfOptions:function(){return w4.merge(this.base(),{properties:{name:{title:"Field name",description:"Field name.",type:"string"},emptySelectFirst:{title:"Empty Select First",description:"If the data is empty, then automatically select the first item in the list.",type:"boolean",default:!1},vertical:{title:"Position the radio selector items vertically",description:"By default, radio controls are stacked vertically.  Set to false if you'd like radio controls to lay out horizontally.",type:"boolean",default:!0}}})}}),w4.registerFieldClass("radio",w4.Fields.RadioField),P4=jQuery,Q4=P4.alpaca,Q4.Fields.SelectField=Q4.Fields.ListField.extend({getFieldType:function(){return"select"},setup:function(){this.base()},getControlValue:function(){var e=this._getControlVal(!0);return void 0===e&&(e=this.data),this.convertValue(e)},setValue:function(e){Q4.isArray(e)?Q4.compareArrayContent(e,this.getValue())||(!Q4.isEmpty(e)&&this.control&&this.control.val(e),this.base(e)):e!==this.getValue()&&(this.control&&void 0!==e&&null!=e&&this.control.val(e),this.base(e))},getEnum:function(){if(this.schema){if(this.schema.enum)return this.schema.enum;if(this.schema.type&&"array"===this.schema.type&&this.schema.items&&this.schema.items.enum)return this.schema.items.enum}},initControlEvents:function(){var t=this;if(t.base(),t.options.multiple){var e=this.control.parent().find("button.multiselect");e.focus(function(e){t.suspendBlurFocus||(t.onFocus.call(t,e),t.trigger("focus",e))}),e.blur(function(e){t.suspendBlurFocus||(t.onBlur.call(t,e),t.trigger("blur",e))})}},beforeRenderControl:function(e,t){var n=this;this.base(e,function(){n.schema.type&&"array"===n.schema.type&&(n.options.multiple=!0),t()})},prepareControlModel:function(t){var n=this;this.base(function(e){e.selectOptions=n.selectOptions,t(e)})},afterRenderControl:function(e,t){var n=this;this.base(e,function(){if(Q4.isUndefined(n.data)&&n.options.emptySelectFirst&&n.selectOptions&&0<n.selectOptions.length&&(n.data=n.selectOptions[0].value),n.data&&n.setValue(n.data),n.options.multiple&&P4.fn.multiselect){var e=null;(e=n.options.multiselect?n.options.multiselect:{}).nonSelectedText||(e.nonSelectedText="None",n.options.noneLabel&&(e.nonSelectedText=n.options.noneLabel)),n.options.hideNone&&delete e.nonSelectedText,P4(n.getControlEl()).multiselect(e)}t()})},_validateEnum:function(){var n=this;if(this.schema.enum){var e=this.getValue();if(!this.isRequired()&&Q4.isValEmpty(e))return!0;if(this.options.multiple){var i=!0;return e=e||[],Q4.isArray(e)||Q4.isObject(e)||(e=[e]),P4.each(e,function(e,t){if(P4.inArray(t,n.schema.enum)<=-1)return i=!1}),i}return-1<P4.inArray(e,this.schema.enum)}return!0},onChange:function(e){this.base(e);var t=this;Q4.later(25,this,function(){var e=t.getValue();t.setValue(e),t.refreshValidationState()})},_validateMinItems:function(){return!(this.schema.items&&this.schema.items.minItems&&P4(":selected",this.control).length<this.schema.items.minItems)},_validateMaxItems:function(){return!(this.schema.items&&this.schema.items.maxItems&&P4(":selected",this.control).length>this.schema.items.maxItems)},handleValidate:function(){var e=this.base(),t=this.validation,n=this._validateMaxItems();return t.tooManyItems={message:n?"":Q4.substituteTokens(this.getMessage("tooManyItems"),[this.schema.items.maxItems]),status:n},n=this._validateMinItems(),t.notEnoughItems={message:n?"":Q4.substituteTokens(this.getMessage("notEnoughItems"),[this.schema.items.minItems]),status:n},e&&t.tooManyItems.status&&t.notEnoughItems.status},getTitle:function(){return"Select Field"},getDescription:function(){return"Select Field"},getSchemaOfOptions:function(){return Q4.merge(this.base(),{properties:{multiple:{title:"Mulitple Selection",description:"Allow multiple selection if true.",type:"boolean",default:!1},size:{title:"Displayed Options",description:"Number of options to be shown.",type:"number"},emptySelectFirst:{title:"Empty Select First",description:"If the data is empty, then automatically select the first item in the list.",type:"boolean",default:!1},multiselect:{title:"Multiselect Plugin Settings",description:"Multiselect plugin properties - http://davidstutz.github.io/bootstrap-multiselect",type:"any"}}})}}),Q4.registerFieldClass("select",Q4.Fields.SelectField),function(){var s=jQuery.alpaca;s.registerView({id:"base",title:"Abstract base view"});var e={field:function(){},control:function(){},container:function(){},form:function(){},required:function(){},optional:function(){},readonly:function(){},disabled:function(){},enabled:function(){},clearValidity:function(){},invalid:function(e){},valid:function(){var e=this;if(e.options&&0!==e.getValue().length){if(e.options.disallowOnlyEmptySpaces){var t=e.getValue().trim(),n=e.validation;if(e.schema.minLength&&t.length<e.schema.minLength)return n.notOptional={message:s.substituteTokens(this.getMessage("stringTooShortAfterTrimming"),[e.schema.minLength]),status:!1},void e.setValue(t)}if(e.options.dateFormat){var i,r,a,o=e.getValue();if((o||e.isRequired())&&e.options.isBetween&&s.isArray(e.options.isBetween)&&4==e.options.isBetween.length){if(i=moment(o,e.options.dateFormat,!0),r=moment(e.options.isBetween[0],e.options.placeholder,!0),a=moment(e.options.isBetween[1],e.options.placeholder,!0),!(i.isValid()&&r.isValid()&&a.isValid()))return void((n=e.validation).notOptional={message:s.substituteTokens(this.getMessage("invalidDateRangeDef"),[e.options.isBetween[0],e.options.isBetween[1]]),status:!1});var l=e.options.isBetween[3];if(l&&s.isString(l)&&2==l.length&&!i.isBetween(r,a,e.options.isBetween[2],l))return void((n=e.validation).notOptional={message:s.substituteTokens(this.getMessage("invalidDateRange"),[l[0],e.options.isBetween[0],e.options.isBetween[1],l[1]]),status:!1})}}e.options.onValidValue&&"function"==typeof e.options.onValidValue&&e.options.onValidValue(this)}},addMessage:function(e,t,n,i){},removeMessages:function(){},enableButton:function(e){},disableButton:function(e){},arrayToolbar:function(e){},arrayActionbars:function(e){},autocomplete:function(){this.options&&this.options.onAutocomplete&&"function"==typeof this.options.onAutocomplete&&this.options.onAutocomplete(this)}},t={button:"",smallButton:"",addIcon:"",removeIcon:"",upIcon:"",downIcon:"",expandedIcon:"",collapsedIcon:""};s.registerView({id:"web-display",parent:"base",type:"view",ui:"web",title:"Default HTML5 display view",displayReadonly:!0,templates:{},callbacks:e,styles:t,horizontal:!1}),s.registerView({id:"web-edit",parent:"base",type:"edit",ui:"web",title:"Default HTML5 edit view",displayReadonly:!0,templates:{},callbacks:e,styles:t,horizontal:!1})}(),Alpaca});